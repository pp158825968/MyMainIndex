var __reflect=this&&this.__reflect||function(e,t,r){e.__class__=t,r?r.push(t):r=[t],e.__types__=e.__types__?r.concat(e.__types__):r},__extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);r.prototype=t.prototype,e.prototype=new r},__awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{h(n.next(e))}catch(t){i(t)}}function s(e){try{h(n["throw"](e))}catch(t){i(t)}}function h(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(o,s)}h((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,i&&(o=i[2&r[0]?"return":r[0]?"throw":"next"])&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[0,o.value]),r[0]){case 0:case 1:o=r;break;case 4:return h.label++,{value:r[1],done:!1};case 5:h.label++,i=r[1],r=[0];continue;case 7:r=h.ops.pop(),h.trys.pop();continue;default:if(o=h.trys,!(o=o.length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){h=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){h.label=r[1];break}if(6===r[0]&&h.label<o[1]){h.label=o[1],o=r;break}if(o&&h.label<o[2]){h.label=o[2],h.ops.push(r);break}o[2]&&h.ops.pop(),h.trys.pop();continue}r=t.call(e,h)}catch(n){r=[6,n],i=0}finally{a=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var a,i,o,s,h={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:r(0),"throw":r(1),"return":r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BasicManager=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){Arrester.languageManager.addEventListener(LanguageManager.LANGUAGE_CHANGE,this.onLanguageChange,this)},t.prototype.onLanguageChange=function(e){this.updateLanguage()},t.prototype.updateLanguage=function(){},t}(egret.EventDispatcher);__reflect(BasicManager.prototype,"BasicManager");var BehaviorObject=function(e){function t(){var t=e.call(this)||this;return t.angleSpeed=2,t._fakeRotation=0,t.b=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this._position=new FVector2D,this._velocity=new FVector2D,this._steer=new FVector2D,this._perCounter=new PerCounter,this._perCounter.followObject=this,this._takeAction=this.defaultTaker},t.prototype.updatePosition=function(){this.updateVelocity(),this.position=this.position.add(this._velocity)},t.prototype.updateVelocity=function(){this._velocity=this._velocity.add(this._steer)},t.prototype.dispatchUpdatePositionEvent=function(){this.dispatchEvent(new egret.Event(t.UPDATE_POSITION))},t.prototype.dispatchUpdateActionEvent=function(){this.dispatchEvent(new egret.Event(t.UPDATE_ACTION))},t.prototype.getNextPosition=function(){var e=this.position.clone().add(this._velocity.add(this._steer));return e},Object.defineProperty(t.prototype,"action",{get:function(){return this._action},set:function(e){this._action!=e&&(this._action=e,this.dispatchUpdateActionEvent(),this.actionChange())},enumerable:!0,configurable:!0}),t.prototype.actionChange=function(){},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this.dispatchUpdatePositionEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"velocity",{get:function(){return this._velocity},set:function(e){this._velocity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"steer",{get:function(){return this._steer},set:function(e){this._steer=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"referVelocity",{get:function(){return this._referVelocity},set:function(e){this._referVelocity=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"perCounter",{get:function(){return this._perCounter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sourceData",{get:function(){return this._sourceData},set:function(e){this._sourceData=e,this.addFromSourceData()},enumerable:!0,configurable:!0}),t.prototype.addFromSourceData=function(){},Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},set:function(e){this._proxy=e,this._proxy.model=this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"takeAction",{get:function(){return this._takeAction},set:function(e){this._takeAction=e||this.defaultTaker},enumerable:!0,configurable:!0}),t.prototype.defaultTaker=function(e){},t.prototype.follow=function(){if(this._followTarget){var e=this._followTarget.subtract(this._position);this._velocity=e.mutliply(Arrester.rangeRandom(.02,.1)),this.updatePosition()}},t.prototype.followInSteer=function(){if(this._followTarget){var e=this._followTarget.subtract(this._position).mutliply(.1),t=e.clone();t.angle+=this.angleSpeed,this.makeFVPrecision(t);var r=e.add(t);this.makeFVPrecision(r),this._velocity=r,this.updatePosition()}},t.prototype.makePrecision=function(e,t){return void 0===t&&(t=100),Math.floor(e*t)/t},t.prototype.makeFVPrecision=function(e,t){void 0===t&&(t=100),e.x=this.makePrecision(e.x,t),e.y=this.makePrecision(e.y,t)},Object.defineProperty(t.prototype,"followTarget",{get:function(){return this._followTarget},set:function(e){this._followTarget=e},enumerable:!0,configurable:!0}),t.prototype.checkEqual=function(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=!1),this._position.isEqual(e))return!0;var n=this._position.dist(e);if(r){if(t>=n)return!0;var a=this._velocity.add(this._steer);return a.length>n}return t>=n},Object.defineProperty(t.prototype,"fakeRotation",{get:function(){return this._fakeRotation},set:function(e){this._fakeRotation=e},enumerable:!0,configurable:!0}),t.UPDATE_POSITION="update position",t.UPDATE_HP="update hp",t.UPDATE_ACTION="update action",t}(egret.EventDispatcher);__reflect(BehaviorObject.prototype,"BehaviorObject");var BehaviorProxy=function(){function e(){this.inits()}return e.prototype.inits=function(){},Object.defineProperty(e.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._view.proxy=this,this.linkViewToModel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(e){this._model=e,this.linkModelToView()},enumerable:!0,configurable:!0}),e.prototype.linkModelToView=function(){this._model.addEventListener(BehaviorObject.UPDATE_ACTION,this.onUpdateAction,this)},e.prototype.linkViewToModel=function(){},Object.defineProperty(e.prototype,"followPosition",{get:function(){return this._followPosition},set:function(e){this._followPosition=e},enumerable:!0,configurable:!0}),e.prototype.removeView=function(){DisplayTool.removeChildInSafe(this._view)},e.prototype.updateView=function(){},e.prototype.onUpdateAction=function(e){this.model.takeAction=Arrester.behaviorManager.getActionTaker(this.model.action)},e}();__reflect(BehaviorProxy.prototype,"BehaviorProxy");var BehaviourRole=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"proxy",{get:function(){return this._proxy},set:function(e){this._proxy=e,this.updateProxy()},enumerable:!0,configurable:!0}),t.prototype.updateProxy=function(){},t}(egret.DisplayObjectContainer);__reflect(BehaviourRole.prototype,"BehaviourRole");var BaseTent=function(e){function t(){var t=e.call(this)||this;return t.init(),t}return __extends(t,e),t.prototype.init=function(){this.initBackgroundRect(),this.initListeners()},t.prototype.initListeners=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},t.prototype.onAdded=function(e){this.stage.addEventListener(egret.Event.RESIZE,this.onReisze,this),this.onReisze(null)},t.prototype.onRemoved=function(e){this.stage.removeEventListener(egret.Event.RESIZE,this.onReisze,this)},t.prototype.onReisze=function(e){this.backgroundRect.width=Arrester.senceWidth,this.backgroundRect.height=Arrester.senceHeight},t.prototype.initBackgroundRect=function(){this.backgroundRect=new SampleRect(Arrester.senceWidth,Arrester.senceHeight,6711159),this.backgroundRect.touchEnabled=!1,this.backgroundRect.alpha=.1,this.addChild(this.backgroundRect)},Object.defineProperty(t.prototype,"height",{get:function(){return this.backgroundRect.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.backgroundRect.width},enumerable:!0,configurable:!0}),t}(eui.UILayer);__reflect(BaseTent.prototype,"BaseTent");var VelocityTool=function(){function e(){}return e.initForVelocity=function(){e._zero=new FVector2D(0,0);e.leftVelocity=new FVector2D(-1,0),e.rightVelocity=new FVector2D(1,0),e.upVelocity=new FVector2D(0,-1),e.downVelocity=new FVector2D(0,1),e.upLeftVelocity=new FVector2D(-1,-1),e.upRightVelocity=new FVector2D(1,-1),e.downLeftVelocity=new FVector2D(-1,1),e.downRightVelocity=new FVector2D(1,1),e.velocitys=[e.zero,e.leftVelocity,e.rightVelocity,e.upVelocity,e.downVelocity,e.upLeftVelocity,e.upRightVelocity,e.downLeftVelocity,e.downRightVelocity]},Object.defineProperty(e,"randomVelocity",{get:function(){var t=Math.floor(Math.random()*e.velocitys.length);return e.velocitys[t].clone()},enumerable:!0,configurable:!0}),e.getSmoothVelocity=function(t){var r=DirectionJar.getSmoothDirection(t?t.angle:0),n=r==DirectionJar.ZERO?e.zero:e[r+"Velocity"];return n},Object.defineProperty(e,"zero",{get:function(){return e._zero.clone()},enumerable:!0,configurable:!0}),e}();__reflect(VelocityTool.prototype,"VelocityTool");var AllKeyJar=function(){function e(){}return e.initArrays=function(){e.initButtons(),e.initNavis()},e.initButtons=function(){e.buttons=[e.START,e.LEFT_HOOK,e.RIGHT_HOOK,e.LEFT_RUN,e.RIGHT_RUN]},e.initNavis=function(){e.shopNavis=[e.ALL,e.BAITS,e.FEEDS,e.DRAGS,e.BOXES,e.PONDS,e.CLEANSERS,e.DARKNESS],e.itemNavis=[e.ALL,e.FISH,e.BAITS,e.FEEDS,e.DRAGS,e.BOXES,e.PONDS,e.CLEANSERS,e.DARKNESS],e.allShops=[e.BAITS,e.FEEDS,e.DRAGS,e.BOXES,e.PONDS,e.CLEANSERS,e.DARKNESS];var t=[e.BAITS,e.FEEDS,e.DRAGS,e.BOXES,e.PONDS,e.CLEANSERS,e.DARKNESS];e.allItems=t.concat(SignJar.fishes)},e.START="start",e.LEFT_HOOK="leftHook",e.RIGHT_HOOK="rightHook",e.LEFT_RUN="leftRun",e.RIGHT_RUN="rightRun",e.TALK="talk",e.ALL="all",e.BAITS="baits",e.FEEDS="feeds",e.DRAGS="drags",e.BOXES="boxes",e.PONDS="ponds",e.CLEANSERS="cleansers",e.DARKNESS="darkness",e.BOX="box",e.LAKE="lake",e.FISH="fish",e.UP_ALLOW="↑",e.DOWN_ALLOW="↓",e}();__reflect(AllKeyJar.prototype,"AllKeyJar");var DefaultChineseWord=function(){function e(){this.start="开始"}return e}();__reflect(DefaultChineseWord.prototype,"DefaultChineseWord");var DirectionJar=function(){function e(){}return e.angleInIndex=function(e){var t,r=e/Arrester.AR;r=0>r?r+360:r;Math.floor(r/90);return t},e.getSmoothDirection=function(t){var r,n=e.angleInIndex(t),a=e.directions[n],i=e.getInferDirection(a,e.verticalDirections);i=i.replace(e.ZERO,"");var o=e.getInferDirection(a,e.horizontalDirections);return o=o.replace(e.ZERO,""),r=i+" "+o,r=" "==r?e.ZERO:""==i?o:Arrester.getMatchAction(r)},e.getInferDirection=function(e,t){var r,n=t.length,a=Math.round(n*Math.random());return r=t[a],r==e&&(a++,a=a>=n-1?0:a,r=t[a]),r},e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.TOP_LEFT="top left",e.TOP_RIGHT="top right",e.BOTTOM_LEFT="bottom left",e.BOTTOM_RIGHT="bottom right",e.ZERO="zero",e.directions=[e.RIGHT,e.DOWN,e.LEFT,e.UP],e.autoMoveDirects=[e.ZERO,e.RIGHT,e.UP,e.DOWN,e.LEFT],e.horizontalDirections=[e.ZERO,e.LEFT,e.RIGHT],e.verticalDirections=[e.ZERO,e.UP,e.DOWN],e}();__reflect(DirectionJar.prototype,"DirectionJar");var LanguageKeyJar=function(){function e(){}return e.getFishQuality=function(e){return e+"_quality"},e.GAME_NAME="game_name",e.MACRO_SHARP="[#]",e.INFO="info",e.GO_FISH="go_fish",e.LANGUAGE_TITLE="language_title",e.VIVID_LABEL="vivid_label",e.NICK_LABEL="nick_label",e.RANDOM_NICK_NAME_BUTTON="random_nick_name_button",e.OK_BUTTON="ok_button",e.NICK_NAME="nick_name",e.MONEY="money",e.MONEY_NAME="money_name",e.ASK_NICK_COMPLETE="ask_nick_complete",e.ANSWER_TWO_TITLE="answer_to_title",e.ALL_HAVE="all_have",e.FISH_BOX_STATUS="fish_box_status",e.YES="yes",e.NO="no",e.FISH_SHOW_TITLE="fish_show_title",e.GRID_SHOW_TITLE="grid_show_title",e.MORRA_BUTTON="morra_button",e.MORRA_TEXT="morra_text",e.MORRA_TITLE="morra_title",e.MORRA_WIN_TEXT="morra_win_text",e.MORRA_STOP="morra_stop",e.LANGUAGE_CHANGE="language_change",e.MY_ITEM="my_item",e.MY_LAKE_BUTTON="my_lake_button",e.GUPPY_NAME="guppy_name",e.GUPPY_DESCRIPT="guppy_description",e.MARY_NAME="mary_name",e.MARY_DESCRIPT="mary_description",e.SAPHIRE_NAME="saphire_name",e.SAPHIRE_DESCRIPT="saphire_description",e.RUBINE_NAME="rubine_name",e.RUBINE_DESCRIPT="rubine_description",e.MY_SPACE_TITLE="my_space_title",e.QUALITY="quality",e.HIGH_QUALITY="high_quality",e.MEDIUM_QUALITY="medium_quality",e.LOW_QUALITY="low_quality",e.PRICE="price",e.PUT_BOX="put_box",e.PUT_LAKE="put_lake",e.SELL="sell",e.NOT_SELL="not_sell",e.CLOSE_BUTTON="close_button",e.BIGGER_BOX_TIPS="bigger_box_tips",e.MY_FISH_BOX="my_fish_box",e.MY_BAIT="my_bait",e.MY_FEED="my_feed",e.BUSINESSMAN="businessman",e.DEAL_TITLE="deal_title",e.DEAL_FAIL_TITLE="deal_fail_title",e.DEAL_FAIL_TEXT="deal_fail_text",e.SHOT_AUTO_CLOSE="shot_auto_close",e.FISH_COUNT="fish_count",e.SELLED_FISH_TEXT="selled_fish_text",e.INCOME_TEXT="income_text",e.POUNDAGE_TEXT="poundage_text",e.POUNDAGE_RATE_TEXT="poundage_rate_text",e.POUNDAGE_LIMIT_TEXT="poundage_limit_text",e.TRUE_INCOME_TEXT="true_income_text",e.DEAL_ASSESS="deal_assess",e.BAIT_TITLE="bait_title",e.BAIT_IN="bait_in",e.BAIT_NOT_IN="bait_not_in",e.BAIT_IN_WATER="bait_in_water",e.BAIT_RETURN="bait_return",e.BAIT_THROW="bait_throw",e.BAIT_IN_TIP="bait_in_tip",e.BAIT_IS_WET="bait_is_wet",e.BAIT_IS_NOT_WET="bait_is_not_wet",e.FEED_THROW="feed_throw",e.FEED_IN_TIP="feed_in_tip",e.TO_BAIT="to_bait",e.TO_FEED="to_feed",e.NO_FISH="no_fish",e.TO_THROW="to_throw",e.TO_LOOSE="to_loose",e.HAVE_FISH="have_fish",e.DUMMY_FISH_COUNT="dummy_fish_count",e.DUMMY_FISH_INCOME="dummy_fish_income",e.ALL_FISH="all_fish",e.FEED_NOT_ALLOW="feed_not_allow",e.FEED_NOT_ALLOW_TITLE="feed_not_allow_title",e.CLEAN_ALLOW="clean_allow",e.CLEAN_ALLOW_TITLE="clean_allow_title",e.CLEAN_NOT_ALLOW="clean_not_allow",e.CLEAN_NOT_ALLOW_TITLE="clean_not_allow_title",e.STRONG_ALLOW="strong_allow",e.STRONG_NOT_ALLOW="strong_not_allow",e.STRONG_ALLOW_TITLE="strong_allow_title",e.STRONG_NOT_ALLOW_TITLE="strong_not_allow_title",e.BOX_ALLOW="box_allow",e.BOX_NOT_ALLOW="box_not_allow",e.BOX_ALLOW_TITLE="box_allow_title",e.BOX_NOT_ALLOW_TITLE="box_not_allow_title",e.POND_ALLOW="pond_allow",e.POND_NOT_ALLOW="pond_not_allow",e.POND_ALLOW_TITLE="pond_allow_title",e.POND_NOT_ALLOW_TITLE="pond_not_allow_title",e.ITEMS_TITLE="items_title",e.SHOP_BUTTON="shop_title",e.HELP_TITLE="help_title",e.USE_ITEM="use_item",e.NOT_USE_ITEM="not_use_item",e.USE_ITEM_TITLE="use_item_title",e.USE_NEW_BAIT="use_new_bait",e.USE_BAIT_REPEATE="use_bait_repeate",e.USE_BAIT_REPLACE="use_bait_replace",e.SHOP_NAME="shop_name",e.SHOP_TEXT="shop_text",e.DESCRIPT_TITLE="description_title",e.ITEM_NAME="item_name",e.ITEM_DESCRIPT="item_descript",e.ITEM_PRICE="item_price",e.BUY_BUTTON="buy_button",e.NOT_BUY_BUTTON="not_buy_button",e.TRADE_BUTTON="trade_button",e.TRADER="trader",e.TRADE_TEXT="trade_text",e.QUOTE_TITLE="quote_title",e.QUOTE_DESCRIPT="quote_descript",e.TREND_BUTTON="trend_button",e.TREND_DESCRIPT="trend_descript",e.CURRENT_MORATORIUM_TIME="current_moratorium_time",e.SECONDS="seconds",e.COST_TO_OPEN="cost_to_open",e.GO="go",e.NO_GO="no_go",e.BAN_IN_MORATORIUM="ban_in_moratorium",e.COST_TO_OPEN_SURE="cost_to_open_sure",e.COST_TO_OPEN_ALLOW_TITLE="cost_to_open_allow_title",e.COST_TO_OPEN_ALLOW="cost_to_open_allow",e.COST_TO_OPEN_NOT_ALLOW_TITLE="cost_to_open_not_allow_title",e.COST_TO_OPEN_NOT_ALLOW="cost_to_open_not_allow",e.LEVEL_STOP="level_stop",e.FISH_QUALITY_CHANGE="fish_quality_change",e.FISH_OPRATE_TITLE="fish_oprate_title",e.FISH_OPRATE_PUT_BOX="fish_oprate_put_box",e.FISH_OPRATE_SELL="fish_oprate_sell",e.FISH_OPRATE_FREE="fish_oprate_free",e.LAKE_CLOSE="lake_close",e.BOX_LIMIT_OVER="box_limit_over",e.BOX_LIMIT_FREE="box_limit_free",e.FEED_NOT_EXCHANGE="feed_not_exchange",e.FEED_IN="feed_in",e.FEED_NOT_IN="feed_not_in",e.FEED_TITLE="feed_title",e.MY_CLEANSER="my_cleanser",e.CLEAN_TITLE="clean_title",e.CLEAN_LEVEL="clean_level",e.CLEAN_EXP="clean_exp",e.MY_CLEANSER_TIP="my_cleanser_tip",e.BUY_OK="buy_ok",e.BUY_NOT_OK="buy_not_ok",e.HAVE_DODGE="have_dodge",e.HAVE_NO_DODGE="have_no_dodge",e.LEVY_BUTTON="levy_button",e.USE_DODGE="use_dodge",e.DODGE_IN_TAX="dodge_in_tax",e.DODGE_USE_TIP="dodge_use_tip",e.POOL_TITLE="pool_title",e.START_BUTTON="start_button",e.HELP_BUTTON="help_button",e.CLARIFY_BUTTON="clarify_button",e.RULES="rules",e.SOUND_BUTTON="sound_button",e.ABOUT_BUTTON="about_button",e.VOLUMN="volumn",e.ABOUT_TEXT="about_text",e}();__reflect(LanguageKeyJar.prototype,"LanguageKeyJar");var SignJar=function(){function e(){}return Object.defineProperty(e,"fishes",{get:function(){return e._fishes||(e._fishes=Arrester.gameData.role.fishes),e._fishes},enumerable:!0,configurable:!0}),e.SMALL_FISH="small_fish",e.KANI="kani",e}();__reflect(SignJar.prototype,"SignJar");var SoundJar=function(){function e(){}return e.GMAE_START="game_start",e.AUTO_MOVE="auto_move",e.BE_ENCHANTED="be_enchanted",e.POWER="power",e.DODGE_IN_TAX="dodge_in_tax",e.LEVY="levy",e.RUN_PART="run_part",e.FEED="feed",e.CLEAN="clean",e.HOOK_THROW="hook_throw",e}();__reflect(SoundJar.prototype,"SoundJar");var Arrester=function(){function e(){}return Object.defineProperty(e,"stage",{get:function(){return e._stage},set:function(t){e._stage=t,e._stage.addEventListener(egret.Event.RESIZE,e.onStageResize,e)},enumerable:!0,configurable:!0}),e.onStageResize=function(t){e.senceWidth=e.stage.stageWidth,e.senceHeight=e.stage.stageHeight},e.inject=function(t){void 0===t&&(t=null),e.AR=Math.PI/180,e.senceWidth=e.stage.stageWidth,e.senceHeight=e.stage.stageHeight,e.senceRadius=.25*Math.pow(Math.pow(e.senceWidth,2)+Math.pow(e.senceHeight,2),.5);var r=20;e.limitTop=-r,e.limitBottom=e.senceHeight+r,e.limitLeft=-r,e.limitRight=e.senceWidth+r,e.languageManager=new LanguageManager,e.nouManager=new NouManager,e.levelManager=new LevelManager,e.uiLogicManager=new UILogicManager,e.uiTentManager=new UITentManager,e.uiButtonManager=new UIButtonManager,e.poolsTentManager=new PoolsTentManager,e.mapManager=new MapManager,e.roleManager=new RoleManager,e.behaviorManager=new BehaviorsManager,e.mySpaceManager=new MySpaceManager,e.fishOperateManager=new FishOperateManager,e.quoteManager=new QuoteManager,e.tradeManager=new TradeManager,e.shopManager=new ShopManager,e.itemManager=new ItemManager,e.fireDragonManager=new FireDragonManager,e.morraManager=new MorraManager,e.breedManager=new BreedManager,e.vividManager=new VividManager,e.levelTailManager=new LevelTailManager,e.darkRouteManager=new DarkRouteManager,e.startManager=new StartManager,e.helpManager=new HelpManager,e.soundManager=new SoundManager},e.getLang=function(t,r,n){return void 0===r&&(r=""),void 0===n&&(n=-1),e.languageManager.getLanguageTextByKey(t,r,n)},e.rangeRandom=function(e,t){return e+Math.random()*(t-e)},e.makePriceKey=function(e,t){return e+"_"+t},e.replaceInMarco=function(e,t,r){return e.replace(r,t)},e.findMarines=function(e,t,r){void 0===r&&(r=null);var n=[];for(var a in t){var i=t[a];this.mismatch(e,i,r)&&n.push(i)}return n},e.mismatch=function(e,t,r){void 0===r&&(r=null);var n=!1;for(var a in e){var i=e[a],o=r?t[r][a]:t[a];if(i!=o){n=!1;break}n=!0}return n},e.evaluateInObject=function(e,t){for(var r in e){new Object;(t.hasOwnProperty(r)||t.propertyIsEnumerable(r))&&(t[r]=e[r])}},e.changeToArrayCollection=function(e){return new eui.ArrayCollection(e)},e.setKeyValue=function(e,t){for(var r in t)e[r]=t[r]},e.getMatchAction=function(e){for(var t="",r=e.split(" "),n=0;n<r.length;n++){var a=r[n];if(0!=n){var i=a.charAt(0).toUpperCase(),o=a.length>1?a.substr(1):"";a=i.concat(o)}t=t.concat(a)}return t},e.getAreaIndex=function(t,r){var n=.5*e.senceWidth,a=.5*e.senceHeight,i=Math.floor(t/n),o=Math.floor(r/a);return{xIndex:i,yIndex:o}},e.getRegionOutPosition=function(t,r){var n,a,i=Math.floor(2*Math.random()),o=Math.floor(2*Math.random()),s=e.getAreaIndex(t,r);s.xIndex==i&&s.xIndex==i&&(i=i++,o=o++,i=2==i?0:i,o=2==o?0:o);var h=.5*e.senceWidth,l=.5*e.senceHeight;return n=e.rangeRandom(i*h,(i+1)*h),a=e.rangeRandom(o*l,(o+1)*l),{xPos:n,yPos:a}},e}();__reflect(Arrester.prototype,"Arrester");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,r){function n(n){t.call(r,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var BehaviorsManager=function(){function e(){this.tapTime=0,this.escapeTime=0,this.eatTime=0,this.inits()}return e.prototype.inits=function(){},e.prototype.updateBehavior=function(e){e.takeAction(e)},e.prototype.getActionTaker=function(e){var t=Arrester.getMatchAction(e);return this[t]},e.prototype.autoMove=function(e){e.perCounter.checkInAnlog(ActionJar.AUTO_MOVE)&&(Arrester.behaviorManager.tapTime++,Arrester.roleManager.hook.action==ActionJar.HOOK_FREE&&Arrester.behaviorManager.checkBeEnchantFish(e)?(Arrester.behaviorManager.tapTime=0,e.action=ActionJar.BE_ENCHANTED,e.perCounter.addCountKey(ActionJar.BE_ENCHANTED,e.currentData.beEnchantedTime),e.perCounter.addCountKey("enchant_time",e.currentData.enchantTime),Arrester.fishOperateManager.addToTalk(e,e.action),Arrester.soundManager.play(e.currentData.beEnchantedSound,!1,!0)):(e.referVelocity=VelocityTool.getSmoothVelocity(e.velocity),e.perCounter.addCountKey(ActionJar.AUTO_MOVE,e.currentData.autoMoveTime))),e.velocity.isEqual(e.referVelocity)||(e.steer=e.referVelocity.subtract(e.velocity).mutliply(e.sourceData.a_strength)),Arrester.behaviorManager.checkInPopo(e),Arrester.behaviorManager.updatePositionWithLimit(e)},e.prototype.checkBeEnchantFish=function(e,t){void 0===t&&(t=!1);var r=Arrester.roleManager.hook;if(r.action!=ActionJar.HOOK_FREE)return!1;var n=t?4:3,a=Arrester.behaviorManager.checkFishIsInDistance(e,r),i=a?1:0,o=Arrester.behaviorManager.checkFishIsHungry(e),s=o?1:0,h=Arrester.behaviorManager.checkHookIsDelicious(r),l=h?1:0,u=t&&Arrester.behaviorManager.checkHookIsPowerful(e),c=u?1:0,p=i+s+l+c;return p>.5*n},e.prototype.checkFishIsInDistance=function(e,t){var r=t.baitData.hp*t.baitData.hpPercent,n=t.position.dist(e.position),a=Math.abs(r-n),i=r>n,o=i?r:n,s=i?Math.abs(a/o):.1*Math.random();return s>Math.random()},e.prototype.checkFishIsLucky=function(e,t){var r=e.currentData.lucky,n=t.baitData.lucky,a=Math.abs(r-n),i=r>n,o=i?r:n,s=i?Math.abs(a/o):.2*Math.random();return s>Math.random()},e.prototype.checkFishIsHungry=function(e){return e.currentData.belly>Math.random()},e.prototype.checkHookIsDelicious=function(e){return.3*e.baitData.hpPercent*Math.random()+.7*e.baitData.delicious*Math.random()>Math.random()},e.prototype.checkHookIsPowerful=function(e){var t=Arrester.roleManager.hook,r=Arrester.roleManager.hook.player,n=t.baitData.power+r.currentData.strong;n=Arrester.rangeRandom(.5*n,1.2*n);var a=e.currentData.power;return a=Arrester.rangeRandom(.5*a,1.5*a),n>a},e.prototype.updatePositionWithLimit=function(e){var t=e.getNextPosition(),r=!0;t.x<Arrester.limitLeft?t.x=Arrester.limitLeft:t.x>Arrester.limitRight?t.x=Arrester.limitRight:t.y<Arrester.limitTop?t.y=Arrester.limitTop:t.y>Arrester.limitBottom?t.y=Arrester.limitBottom:r=!1,e.updateVelocity(),e.position=t,r&&(e.velocity.reverse(),e.referVelocity.reverse())},Object.defineProperty(e.prototype,"randomVelocity",{get:function(){return VelocityTool.randomVelocity},enumerable:!0,configurable:!0}),e.prototype.beEnchanted=function(e){var t=Arrester.roleManager.hook;if((!e.proxy.followPosition||e.checkEqual(e.proxy.followPosition,20))&&(e.proxy.followPosition=Arrester.behaviorManager.getToHookPosition(e),e.perCounter.addCountKey(ActionJar.BE_ENCHANTED,e.currentData.beEnchantedTime)),!e.position.isEqual(e.proxy.followPosition)){var r=e.proxy.followPosition.subtract(e.position);r.length=20,e.referVelocity=r}e.velocity.isEqual(e.referVelocity)||(e.steer=e.referVelocity.subtract(e.velocity).mutliply(e.sourceData.a_strength)),(t.action!=ActionJar.HOOK_FREE||e.perCounter.checkInAnlog("enchant_time"))&&Arrester.behaviorManager.gotoNextInBeEnchant(e),Arrester.behaviorManager.checkInPopo(e),Arrester.behaviorManager.updatePositionWithLimit(e)},e.prototype.getToHookPosition=function(e){var t=Arrester.roleManager.hook,r=t.position.subtract(e.position),n=DirectionJar.angleInIndex(r.angle),a=DirectionJar.directions[n];a=DirectionJar.getInferDirection(a,DirectionJar.directions);var i,o,s=32,h=32,l=t.position.x,u=t.position.y;switch(a){case DirectionJar.LEFT:i=Arrester.rangeRandom(l-s,l),o=Arrester.rangeRandom(u-h,u+h);break;case DirectionJar.RIGHT:i=Arrester.rangeRandom(l,l+s),o=Arrester.rangeRandom(u-h,u+h);break;case DirectionJar.UP:i=Arrester.rangeRandom(l-s,l+s),o=Arrester.rangeRandom(u-h,u);break;case DirectionJar.DOWN:i=Arrester.rangeRandom(l-s,l+s),o=Arrester.rangeRandom(u,u+h)}return i=Math.min(i,Arrester.levelManager.levelTent.width),i=Math.max(i,0),o=Math.min(o,Arrester.levelManager.levelTent.height),o=Math.max(o,0),new FVector2D(i,o)},e.prototype.gotoNextInBeEnchant=function(e,t){void 0===t&&(t=!1);var r=Arrester.roleManager.hook;Arrester.behaviorManager.escapeTime++,Arrester.behaviorManager.eatTime++,r.action!=ActionJar.HOOK_FREE||Arrester.behaviorManager.checkIsFishEscape(e,t)?(Arrester.behaviorManager.escapeTime=0,e.followTarget=Arrester.behaviorManager.getEscapePosition(),e.perCounter.addCountKey(ActionJar.ESCAPE,e.currentData.escapeTime),e.action=ActionJar.ESCAPE,Arrester.behaviorManager.addPopoInLevel(e,!0),Arrester.fishOperateManager.addToTalk(e,e.action),Arrester.soundManager.play(e.currentData.escapeSound,!1,!0)):Arrester.behaviorManager.checkIsFishHooked(e)&&(Arrester.behaviorManager.eatTime=0,e.action=ActionJar.EAT_BAIT,r.action=ActionJar.HOOKING,Arrester.fishOperateManager.addToTalk(e,Arrester.getLang(e.currentData.eatBaitWord)),Arrester.soundManager.play(e.currentData.eatBaitSound,!1,!0),Arrester.levelManager.closeInSideLevelPanel()),e.action!=ActionJar.BE_ENCHANTED&&(e.perCounter.removeCountKey(ActionJar.BE_ENCHANTED),e.perCounter.removeCountKey("enchant_time"),e.proxy.followPosition=null)},e.prototype.checkIsFishEscape=function(e,t){void 0===t&&(t=!1);var r=Arrester.roleManager.hook,n=t?3:2,a=Arrester.behaviorManager.checkFishIsInDistance(e,r),i=a?1:0,o=Arrester.behaviorManager.checkFishIsLucky(e,r),s=o?1:0,h=t&&Arrester.behaviorManager.checkHookIsPowerful(e),l=h?0:t?1:0,u=i+s+l;return u>.5*n},e.prototype.checkIsFishHooked=function(e){var t=Arrester.roleManager.hook,r=3,n=Arrester.behaviorManager.checkFishIsHungry(e),a=n?1:0,i=Arrester.behaviorManager.checkHookIsDelicious(t),o=i?1:0,s=Arrester.behaviorManager.checkFishIsLucky(e,t),h=s?1:0,l=a+o+h;return l>.5*r},e.prototype.getEscapePosition=function(){var e=Arrester.roleManager.hook,t=Arrester.getRegionOutPosition(e.position.x,e.position.y),r=t.xPos,n=t.yPos;return new FVector2D(r,n)},e.prototype.checkArrived=function(e,t){void 0===t&&(t=10);var r=e.position.dist(e.proxy.followPosition);if(t>=r)return!0;var n=e.position.subtract(e.velocity),a=n.dist(e.position);return a>=r?!0:!1},e.prototype.eatBait=function(e){var t=Arrester.roleManager.hook.position.x,r=Arrester.roleManager.hook.position.y;if(e.proxy.followPosition?(e.proxy.followPosition.x=t,e.proxy.followPosition.y=r):e.proxy.followPosition=new FVector2D(t,r),e.checkEqual(e.proxy.followPosition,10))e.action=ActionJar.HOOKED,e.moanInHooked(),Arrester.behaviorManager.handOnHooked();else{var n=e.proxy.followPosition.subtract(e.position);e.velocity=n.mutliply(.1),Arrester.behaviorManager.updatePositionWithLimit(e)}},e.prototype.handOnHooked=function(){Arrester.levelManager.levelTent.touchOffDrag(),Arrester.uiLogicManager.showHookButtons(),Arrester.levelManager.levelTent.closePanels(),Arrester.levelManager.levelTent.interruptTouchMove(),Arrester.levelManager.levelTent.levelTouchOff()},e.prototype.beFished=function(e){var t=Arrester.roleManager.hook;e.updatePosition(),t.position=e.position,Arrester.behaviorManager.checkFishLimitY(e)&&(e.action="not",t.booty=null,t.isInWater=!1,t.proxy.removeView(),Arrester.roleManager.player.currentData.addFishToHand(e.currentData),Arrester.levelManager.levelTent.removeBehaviorObject(e),Arrester.fishOperateManager.showFishOpratePanel(e),Arrester.uiLogicManager.removeHookButtons(),Arrester.levelManager.levelTent.levelTouchOn(),Arrester.fishOperateManager.addToTalk(e,Arrester.getLang(e.currentData.beFishedWord)),Arrester.levelTailManager.updateTipText(),Arrester.soundManager.play(e.currentData.beFishedSound,!1,!0))},e.prototype.putBox=function(e){e.updatePosition(),Arrester.behaviorManager.checkFishLimitY(e)&&(e.action="not",e.proxy.view.touchEnabled=!0,Arrester.levelManager.levelTent.removeBehaviorObject(e))},e.prototype.escape=function(e){Arrester.roleManager.hook;e.perCounter.checkInAnlog(ActionJar.ESCAPE)?e.action=ActionJar.AUTO_MOVE:e.follow()},e.prototype.alive=function(e){e.followTarget?e.checkEqual(e.followTarget,10,!0)?(e.followTarget=null,e.perCounter.addCountKey(ActionJar.ALIVE,e.currentData.aliveTime)):e.follow():e.perCounter.checkInAnlog(ActionJar.ALIVE)&&(e.action=ActionJar.AUTO_MOVE,Arrester.levelManager.levelTent.levelTouchOn(),Arrester.levelManager.levelTent.checkToHook(),Arrester.levelTailManager.updateTipText(),Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.TO_LOOSE),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),Arrester.soundManager.play(e.currentData.autoMoveWord,!1,!0))},e.prototype.hooked=function(e){var t=Arrester.roleManager.player.hook;if(t.action==ActionJar.HOOK_INCREASE_POWER){if(e.plusHP(-t.baitData.power),e.position=e.position.subtract(t.pullVectory()),Arrester.levelManager.levelTent.fixTopHookPoint(),e.currentData.isDead)return e.action=ActionJar.BE_FISHED,t.booty=e,e.velocity=t.proxy.getFloatVelocity(),t.action=ActionJar.HOOK_STAND_BY,t.perCounter.removeCountKey(ActionJar.HOOK_INCREASE_POWER),void console.log("鱼被钓起时的速度 "+e.velocity);if(Arrester.behaviorManager.checkFishLimitY(e))return e.action=ActionJar.BE_FISHED,t.booty=e,t.action=ActionJar.HOOK_STAND_BY,void t.perCounter.removeCountKey(ActionJar.HOOK_INCREASE_POWER);t.perCounter.checkInAnlog(ActionJar.HOOK_INCREASE_POWER)&&(t.action=ActionJar.HOOKING,t.perCounter.removeCountKey(ActionJar.HOOK_INCREASE_POWER));var r=Math.random();e.currentData.escape_value>=r&&(e.action=ActionJar.ESCAPE,e.perCounter.addCountKey(ActionJar.ESCAPE,e.currentData.escapeTime));var n=Math.floor(100*e.currentData.hpPercent).toString()+"%",a=Arrester.replaceInMarco(Arrester.getLang(e.currentData.hookedWord),n,LanguageKeyJar.MACRO_SHARP);Arrester.fishOperateManager.addToTalk(e,a)}else t.plusHP(-e.currentData.power),e.steer=e.dragSteer(),e.updatePosition(),Arrester.soundManager.play(e.currentData.hookedSound,!1),(t.baitData.isDead||Arrester.behaviorManager.checkHookLimitY(t))&&(e.action=ActionJar.ALIVE,t.action=ActionJar.HOOK_STAND_BY,t.baitData=null,t.perCounter.removeCountKey(ActionJar.HOOK_INCREASE_POWER));e.action==ActionJar.ESCAPE?(e.followTarget=Arrester.behaviorManager.getEscapePosition(),t.followTarget=new FVector2D(.5*Arrester.senceWidth+Arrester.rangeRandom(-10,10),.5*Arrester.senceHeight+Arrester.rangeRandom(-10,10)),e.perCounter.addCountKey(ActionJar.ESCAPE,e.currentData.escapeTime),Arrester.behaviorManager.addPopoInLevel(e,!0),Arrester.levelManager.levelTent.levelTouchOn(),Arrester.fishOperateManager.addToTalk(e,Arrester.getLang(e.currentData.escapeWord)),Arrester.soundManager.play(e.currentData.escapeSound,!1,!0)):e.action==ActionJar.ALIVE&&(e.action=ActionJar.ALIVE,t.perCounter.removeCountKey(ActionJar.HOOK_INCREASE_POWER),e.followTarget=new FVector2D(.5*Arrester.senceWidth+Arrester.rangeRandom(-5,5),.5*Arrester.senceHeight+Arrester.rangeRandom(-5,5)),t.proxy.removeView(),Arrester.fishOperateManager.addToTalk(e,Arrester.getLang(e.currentData.aliveWord)),Arrester.soundManager.play(e.currentData.aliveSound,!1,!0)),(e.action==ActionJar.ESCAPE||e.action==ActionJar.ALIVE)&&(Arrester.uiLogicManager.removeHookButtons(),t.baitData?(t.action=ActionJar.HOOK_FREE,Arrester.levelManager.levelTent.touchOnDrag()):t.action=ActionJar.HOOK_STAND_BY,Arrester.levelManager.levelTent.fixHookPosition()),Arrester.behaviorManager.checkInPopo(e,!0),t.position=e.position
},e.prototype.eatFeed=function(e){e.followTarget&&(e.checkEqual(e.followTarget,25,!0)?(BreedManager.updateExp(e.currentData,Arrester.roleManager.player.paw.currentFeed.exp),e.followTarget.x=Arrester.rangeRandom(Arrester.limitLeft,Arrester.limitRight),e.followTarget.y=Arrester.rangeRandom(Arrester.limitTop,Arrester.limitBottom),e.velocity=e.followTarget.subtract(e.position).normalize().mutliply(1.5),e.action=ActionJar.EAT_FAT,e.perCounter.addCountKey(ActionJar.EAT_FAT,e.currentData.eatFatTime)):e.follow())},e.prototype.eatFat=function(e){e.perCounter.checkInAnlog(ActionJar.EAT_FAT)&&(e.action=ActionJar.AUTO_MOVE,e.perCounter.removeCountKey(ActionJar.EAT_FAT))},e.prototype.checkFishLimitY=function(e){return e.position.y<=Arrester.limitTop},e.prototype.checkHookLimitY=function(e){return e.position.y>=Arrester.limitBottom},e.prototype.think=function(e){e.action=ActionJar.AUTO_MOVE},e.prototype.hookThrow=function(e){e.checkEqual(e.followTarget,5,!0)?(e.velocity=VelocityTool.zero,e.fakeRotation=0,e.dispatchUpdatePositionEvent(),e.action=ActionJar.HOOK_FREE,e.takeAction=null,Arrester.levelManager.levelTent.touchOnDrag(),Arrester.levelManager.levelTent.fixHookPosition()):e.followInSteer()},e.prototype.hookRecyle=function(e){e.updatePosition(),Arrester.behaviorManager.checkFishLimitY(e)&&(e.action=ActionJar.HOOK_STAND_BY,e.isInWater=!1,e.proxy.removeView(),Arrester.levelTailManager.updateTipText(),Arrester.levelManager.levelTent.checkToHook())},e.prototype.popoUp=function(e){Arrester.behaviorManager.checkFishLimitY(e)?Arrester.levelManager.levelTent.removeBehaviorObject(e):e.updatePosition()},e.prototype.popoThin=function(e){Arrester.behaviorManager.checkFishLimitY(e)||e.proxy.view.alpha<=0?Arrester.levelManager.levelTent.removeBehaviorObject(e):(e.proxy.view.alpha-=.02,e.updatePosition())},e.prototype.addPopoInLevel=function(e,t){void 0===t&&(t=!1);var r=Math.random();if(!(r<e.sourceData.popo_value)){var n=Arrester.roleManager.makePopo(t);n.position=e.position,Arrester.levelManager.levelTent.addBehaviorObjectToFront(n,0),e.perCounter.addCountKey(ActionJar.POPO_UP,e.currentData.popoTime)}},e.prototype.checkInPopo=function(e,t){void 0===t&&(t=!1),e.perCounter.checkInAnlog(ActionJar.POPO_UP)&&Arrester.behaviorManager.addPopoInLevel(e,t)},e}();__reflect(BehaviorsManager.prototype,"BehaviorsManager");var DarkRouteManager=function(e){function t(){var t=e.call(this)||this;return t.levyPercent=0,t.dodgeItem=new DodgeData,Arrester.gameData.shop.cargos.push(t.dodgeItem),t}return __extends(t,e),t.prototype.standardToLevyPanel=function(){return this.levyPanel?this.levyPanel:(this.levyPanel=new LevyPanel,this.levyPanel.agreeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgreeTap,this),this.levyPanel)},t.prototype.onAgreeTap=function(e){var t,r=Arrester.roleManager.player,n=r.currentData.dodges,a=n&&n.length>0;if(a)ImpressTool.removeFromArray(n[0],r.currentData.items),t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.USE_DODGE),r.currentData.name,LanguageKeyJar.MACRO_SHARP);else{var i=Math.floor(r.currentData.balance*this.levyPercent);r.currentData.balance-=i;var o=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),i.toString(),LanguageKeyJar.MACRO_SHARP);t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DODGE_IN_TAX),o,LanguageKeyJar.MACRO_SHARP),Arrester.vividManager.updateVividBar(),Arrester.soundManager.play(SoundJar.DODGE_IN_TAX,!1,!0)}Arrester.fishOperateManager.stanardToShotMessagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=t,Arrester.fishOperateManager.showShotMeesagePanel()},t.prototype.showLevyPanel=function(){this.standardToLevyPanel(),this.updateLevyPercent(),this.updateLevyText(),Arrester.uiLogicManager.addWing(this.levyPanel),Arrester.soundManager.play(SoundJar.LEVY,!1,!0)},t.prototype.updateLevyPercent=function(){this.levyPercent=Math.floor(Arrester.rangeRandom(10,50))/100},t.prototype.updateLevyText=function(){var e=Arrester.roleManager.player,t=e.currentData.dodges,r=t&&t.length>0;this.levyPanel.title=Arrester.getLang(LanguageKeyJar.TRADER),this.levyPanel.tipLabel.text=Arrester.replaceInMarco(Arrester.getLang(r?LanguageKeyJar.HAVE_DODGE:LanguageKeyJar.HAVE_NO_DODGE),e.currentData.name,LanguageKeyJar.MACRO_SHARP),r?this.levyPanel.agreeButton.label=Arrester.getLang(this.dodgeItem.name):this.levyPanel.agreeButton.label=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.LEVY_BUTTON),(100*this.levyPercent).toString(),LanguageKeyJar.MACRO_SHARP)},t.prototype.checkInLevy=function(){this.isInLevy&&this.showLevyPanel()},Object.defineProperty(t.prototype,"isInLevy",{get:function(){var e=Arrester.roleManager.player,t=e.currentData.lakeFishes;return e.currentData.balance>=2e3&&t.length>=20&&Math.random()>.5?!0:!1},enumerable:!0,configurable:!0}),t}(BasicManager);__reflect(DarkRouteManager.prototype,"DarkRouteManager");var FireDragonManager=function(){function e(){this.inits()}return e.prototype.inits=function(){var e=RES.getRes("HookedFish_ske_json"),t=RES.getRes("HookedFish_tex_json"),r=RES.getRes("HookedFish_tex_png");this.fishFactory=dragonBones.EgretFactory.factory,this.fishFactory.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(e)),this.fishFactory.addTextureAtlas(new dragonBones.EgretSheetAtlas(r,t))},e}();__reflect(FireDragonManager.prototype,"FireDragonManager");var LanguageManager=function(e){function t(){var r=e.call(this)||this;return r.currentLanguage=Arrester.gameData.lang.default_lang,r.currentLanguageData=r.getLangData(r.currentLanguage),r.languages=Arrester.gameData.lang.langs,r.addEventListener(t.LANGUAGE_CHANGE,r.updateLanguage,r),r}return __extends(t,e),t.prototype.getLanguageTextByKey=function(e,t,r){void 0===t&&(t=""),void 0===r&&(r=-1),t=""==t?e:t;var n=this.getRandomText(e,t,r);return n},t.prototype.replaceToMacros=function(e,t,r){var n;return n},t.prototype.getRandomText=function(e,t,r){void 0===t&&(t=""),void 0===r&&(r=-1);var n,a=this.currentLanguageData[e];return n=a&&a.length>0?-1==r?a[Math.floor(Arrester.rangeRandom(0,a.length))]:a[r]:t},t.prototype.getLangData=function(e){var t=Arrester.findMarines({type:e},Arrester.gameData.lang.langs)[0];return Arrester.loadManager.getRes(t.url)},t.prototype.changeToLanguage=function(e){this.currentLanguage=e,this.currentLanguageData=this.getLangData(this.currentLanguage),this.dispatchEvent(new egret.Event(t.LANGUAGE_CHANGE))},t.prototype.getClarifyText=function(){var e,t="The Game Is Free, It does NOT Takes Any Money.\n\nAll of the game's contents are on the fence.\n\nAllRights By The Author [pp158825968@qq.com].\n\nThanks For Your Playing, Have A Nice Day.";switch(this.currentLanguage){case"chinese":e="本作品公开且免费,不存在任何实际意义上的充值渠道;\n\n本作品的所有内容全都是为了表现游戏的本身,并且没有冒犯任何人的意思与倾向;\n\n本作品禁止在商业用途及违法方面使用,最终解释权归作者[pp158825968@qq.com]所有;\n\n不便之处,敬请谅解,同时预祝您玩得开心.";break;case"english":e=t;break;case"japanese":e="このゲームが無料し　課金もなしでございます\n\nこのゲームの立場は中立的でございます\n\nこのゲームのすべての著作権は「pp158825968@qq.com」に帰属します。\n\nこのゲームをしていただきいて本当にありがとうございます。";break;default:e=t}return e},t.prototype.showLanguagePanel=function(){this.standardToLanguagePanel(),this.updateLanguage(),Arrester.uiLogicManager.addWing(this.languagePanel)},t.prototype.standardToLanguagePanel=function(){return this.languagePanel?this.languagePanel:(this.languagePanel=new LanguagePanel,this.languagePanel.horizontalCenter=0,this.languagePanel.verticalCenter=0,this.languagePanel.languageList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onLanuageItemTap,this),this.languagePanel.languageList.dataProvider=Arrester.changeToArrayCollection(this.languages),this.languagePanel)},t.prototype.onLanuageItemTap=function(e){var t=e.item;this.changeToLanguage(t.type)},t.prototype.updateLanguage=function(e){if(void 0===e&&(e=null),this.languagePanel){var r=Arrester.findMarines({type:this.currentLanguage},this.languages)[0];this.languagePanel.title=Arrester.replaceInMarco(this.getLanguageTextByKey(LanguageKeyJar.LANGUAGE_TITLE),r.sample,t.AWE_MARCO)}},t.LANGUAGE_CHANGE="language change",t.AWE_MARCO="[#]",t}(egret.EventDispatcher);__reflect(LanguageManager.prototype,"LanguageManager");var LoadManger=function(e){function t(){var t=e.call(this)||this;return t.resourceObj=new egret.HashObject,t}return __extends(t,e),t.prototype.getRes=function(e){return this.resourceObj[e]},t.prototype.loadSingle=function(e){if(!this.resourceObj[e]){this.currentURL=e;var t=e.search("json")>-1?RES.ResourceItem.TYPE_JSON:e.search("sounds")>-1?RES.ResourceItem.TYPE_SOUND:RES.ResourceItem.TYPE_BIN;e=e,RES.getResByUrl(e,this.onLoadComplete,this,t)}},t.prototype.loadArray=function(e){this.currentURLs=e,this.addEventListener(t.SINGLE_COMPLETE,this.onSingleEnd,this),this.loadSingle(e[0])},t.prototype.onSingleEnd=function(e){ImpressTool.removeFromArray(this.currentURL,this.currentURLs),this.currentURLs.length>0?this.loadSingle(this.currentURLs[0]):this.dispatchEventWith(t.ARRAY_COMPLETE)},t.prototype.onLoadComplete=function(e){this.resourceObj[this.currentURL]=e,this.dispatchEventWith(t.SINGLE_COMPLETE)},t.prototype.parseRES=function(){var e=[];Arrester.gameData.lang.langs.forEach(function(t){e.push(t.url)});var t=this.getSoundURLs();return e=e.concat(t)},t.prototype.getSoundURLs=function(){var e=[],t=RES.getRes("sounds_json");for(var r in t){var n=t[r];n.forEach(function(t){var r=e.indexOf(t);0>r&&e.push(t)})}return e},t.SINGLE_COMPLETE="single complete",t.ARRAY_COMPLETE="array complete",t}(egret.EventDispatcher);__reflect(LoadManger.prototype,"LoadManger");var NouManager=function(){function e(){}return e.prototype.gameStart=function(){this.initSets(),this.initUIComponents(),this.initLogicListener(),this.gotoStartTent()},e.prototype.initSets=function(){AllKeyJar.initArrays(),Arrester.roleManager.standardToPlayer(),VelocityTool.initForVelocity()},e.prototype.initUIComponents=function(){Arrester.uiButtonManager.strandToButtons()},e.prototype.initLogicListener=function(){Arrester.uiLogicManager.initLogicListeners(),Arrester.quoteManager.start(),Arrester.breedManager.start()},e.prototype.gotoStartTent=function(){Arrester.startManager.showStartTent()},e.prototype.gotoLevelTent=function(){Arrester.levelManager.standardToLevelTent(),Arrester.stage.addChild(Arrester.levelManager.levelTent),Arrester.levelManager.loadAndGotoLevel(Arrester.gameData.levels[1])},e.prototype.gotoPoolsTent=function(){Arrester.poolsTentManager.showPoolsTent()},e.prototype.gotoMySpaceTent=function(){Arrester.mySpaceManager.showMySpace()},e.prototype.gotoQuoteTent=function(){Arrester.quoteManager.showQuoteTent()},e.prototype.gotoShopTent=function(){Arrester.shopManager.showShopTent()},e.prototype.gotoItemTent=function(){Arrester.itemManager.showItemTent()},e.prototype.gotoVividTent=function(){Arrester.vividManager.showVividTent()},e}();__reflect(NouManager.prototype,"NouManager");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.volumn=.5,t.channelLib=new egret.HashObject,t.soundJson=RES.getRes("sounds_json"),t}return __extends(t,e),t.prototype.play=function(e,t,r,n){void 0===t&&(t=!0),void 0===r&&(r=!1),void 0===n&&(n=1);var a=this.getSoundKey(e),i=this.channelLib[e];if(!r)if(t)i&&(i.stop(),this.channelLib[e]=null);else if(i)return;var o=Arrester.loadManager.getRes(a);o&&(i=o.play(0,n),i.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),this.channelLib[e]=i,i.volume=this.volumn)},t.prototype.onSoundComplete=function(e){var t=e.target;t.stop();for(var r in this.channelLib)this.channelLib[r]==t&&(this.channelLib[r]=null)},t.prototype.getSoundKey=function(e,t){void 0===t&&(t=-1);var r=this.soundJson[e];if(!r||r.length<=0)return"";var n=-1==t?r[Math.floor(Arrester.rangeRandom(0,r.length))]:r[t];return n},t.prototype.stanardToSoundPanel=function(){return this.soundPanel?this.soundPanel:(this.soundPanel=new SoundPanel,this.soundPanel.volumnBar.value=this.volumn,this.soundPanel.volumnBar.addEventListener(egret.Event.CHANGE,this.onChange,this),this.soundPanel)},t.prototype.onChange=function(e){this.volumn=this.soundPanel.volumnBar.value},t.prototype.showSoundPanel=function(){this.stanardToSoundPanel(),this.updateLanguage(),Arrester.uiLogicManager.addWing(this.soundPanel)},t.prototype.updateLanguage=function(){this.soundPanel&&(this.soundPanel.title=Arrester.getLang(LanguageKeyJar.VOLUMN),this.soundPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON))},t}(BasicManager);__reflect(SoundManager.prototype,"SoundManager");var UILogicManager=function(){function e(){}return e.prototype.initLogicListeners=function(){},e.prototype.onLeftHookTouchTap=function(e){this.hookIncreasePower(),Arrester.soundManager.play(SoundJar.POWER,!1)},e.prototype.onLeftRunTouchTap=function(e){this.playerIncreasePower(),Arrester.soundManager.play(SoundJar.POWER,!1)},e.prototype.onLanguageButton=function(e){Arrester.languageManager.showLanguagePanel()},e.prototype.hookIncreasePower=function(){Arrester.roleManager.hook.booty||(Arrester.roleManager.hook.action=ActionJar.HOOK_INCREASE_POWER,Arrester.roleManager.hook.perCounter.addCountKey(ActionJar.HOOK_INCREASE_POWER,2))},e.prototype.playerIncreasePower=function(){Arrester.roleManager.player.currentData.runPower=Arrester.roleManager.player.currentData.strong},e.prototype.showHookButtons=function(){Arrester.uiButtonManager.showRunPart(),Arrester.uiButtonManager.runPart.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHookTouchTap,this),Arrester.uiButtonManager.runPart.rightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHookTouchTap,this)},e.prototype.removeHookButtons=function(){this.removeInRunPart()},e.prototype.showRunButtons=function(){this.removeInRunPart(),Arrester.uiButtonManager.showRunPart(),Arrester.uiButtonManager.runPart.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftRunTouchTap,this),Arrester.uiButtonManager.runPart.rightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftRunTouchTap,this)},e.prototype.removeRunButtons=function(){this.removeInRunPart()},e.prototype.removeInRunPart=function(){Arrester.uiButtonManager.runPart&&(DisplayTool.removeChildInSafe(Arrester.uiButtonManager.runPart),Arrester.uiButtonManager.runPart.leftButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHookTouchTap,this),Arrester.uiButtonManager.runPart.rightButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftHookTouchTap,this),Arrester.uiButtonManager.runPart.leftButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftRunTouchTap,this),Arrester.uiButtonManager.runPart.rightButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftRunTouchTap,this))},e.prototype.standardToGlassScreen=function(){return this.glassScreen?this.glassScreen:(this.glassScreen=new eui.UILayer,this.glassScreen.touchEnabled=!1,this.glassScreen.touchChildren=!1,this.glassScreen.touchThrough=!1,this.glassScreen)},e.prototype.showGlassScreen=function(){this.standardToGlassScreen(),Arrester.stage.addChild(this.glassScreen)},e.prototype.addWing=function(e){var t=this.putInTent(e);Arrester.stage.addChild(t)},e.prototype.putInTent=function(e){this.tentLib||(this.tentLib=new egret.HashObject),e.name=e.name&&""!=e.name?e.name:"ui_"+(new Date).getMilliseconds();var t=this.tentLib[e.name];return t||(t=new BaseTent,this.tentLib[e.name]=t),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovePanel,this),e.horizontalCenter=0,e.verticalCenter=0,t.addChild(e),t},e.prototype.onRemovePanel=function(e){var t=this.tentLib[e.target.name];DisplayTool.removeChildInSafe(t)},e}();__reflect(UILogicManager.prototype,"UILogicManager");var BreedManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.start=function(){if(!this.timer){var e=Arrester.gameData.delay.breed_delay?1e3*Arrester.gameData.delay.breed_delay:12e4;this.timer=new egret.Timer(e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)}this.timer.start()},t.prototype.onTimer=function(e){this.breedUpdate()},t.prototype.breedUpdate=function(){var e=Arrester.roleManager.player.currentData.lake;if(e){t.updateLakeStatus(e);var r=Arrester.roleManager.player.currentData.lakeFishes;r.forEach(function(e){t.updateExp(e,t.currentEXP)}),this.dispatchEvent(new egret.Event(t.BREED_UPDATE))}},t.updateLakeStatus=function(e,r){void 0===r&&(r=!0),r&&(e.cleanliness=Math.max(e.lowCleanLimit,e.cleanliness-e.cleanLoss),e.cleanliness=Math.min(e.highCleanLimit,e.cleanliness));var n=t.getCleanLevel(e);e.levelStatus=n;var a=e[n+"Rebate"];t._currentEXP=e.perEXP*a},t.getCleanLevel=function(e){var r="",n=e.cleanliness;return r=n>e.lowCleanLimit?n>e.mediumCleanLimit?t.HIGH:t.MEDIUM:t.LOW},Object.defineProperty(t,"currentEXP",{get:function(){return t._currentEXP},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFishEXP",{get:function(){return t.currentEXP},enumerable:!0,configurable:!0}),t.updateExp=function(e,r){e.exp+=r,e.exp=Math.max(e.lowExpLimit,e.exp),e.exp=Math.min(e.highExpLimit,e.exp);var n=t.getQualityLevel(e);e instanceof FishData?e.updateQuality(n)||e.dispatchExpEvent():e.quality=n},t.getQualityLevel=function(e){var t;return t=e.exp>e.lowExpLimit?e.exp>e.mediumExpLimit?QuoteManager.HIGH:QuoteManager.MEDIUM:QuoteManager.LOW},t.BREED_UPDATE="breed update",t.HIGH="high",t.MEDIUM="medium",t.LOW="low",t._currentEXP=0,t}(egret.EventDispatcher);__reflect(BreedManager.prototype,"BreedManager");var FishOperateManager=function(){function e(){this.closeDelay=10,this.currentDelay=0}return e.prototype.standardToFishOpratePanel=function(){return this.fishOpratePanel?this.fishOpratePanel:(this.fishOpratePanel=new FishOpratePanel,this.fishOpratePanel.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSellTouch,this),this.fishOpratePanel.boxButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxTouch,this),this.fishOpratePanel.freeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFreeTouch,this),Arrester.roleManager.player.paw.addEventListener(PawObject.FEED_FOR_FISH,this.onFeedForFish,this),this.fishOpratePanel.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.fishOpratePanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.fishOpratePanel)},e.prototype.onFeedForFish=function(e){this.updateFeedList()},e.prototype.onAdded=function(e){Arrester.quoteManager.addEventListener(QuoteManager.QUOTE_UPDATE,this.onQuoteUpdate,this)},e.prototype.onRemoved=function(e){Arrester.quoteManager.removeEventListener(QuoteManager.QUOTE_UPDATE,this.onQuoteUpdate,this)},e.prototype.onQuoteUpdate=function(e){this.currentFish&&this.fishOpratePanel&&this.fishOpratePanel.stage&&(this.fishOpratePanel.fishSellInfo.priceLabel.text=Arrester.quoteManager.getFishPrice(null,this.currentFish.currentData.sign,this.currentFish.currentData.quality).toString())},e.prototype.onSellTouch=function(e){Arrester.tradeManager.sellFishWithMessage(this.currentFish.currentData.sign,this.currentFish.currentData.quality,null,1,"hand",this.currentFish.currentData.id),Arrester.levelManager.levelTent.checkToHook()},e.prototype.onBoxTouch=function(e){var t=Arrester.roleManager.player,r=t.currentData.findFishesInHand({place:"hand",id:this.currentFish.currentData.id}),n=r.pop(),a=t.currentData.boxFishes,i=a.length>=t.currentData.fishBoxVolume;i||(t.currentData.addFishsFromLakeToBox(n),DisplayTool.removeChildInSafe(this.fishOpratePanel)),this.showShotMeesagePanel(),this.shotMessagePanel.messageLabel.text=Arrester.replaceInMarco(Arrester.getLang(i?LanguageKeyJar.BOX_LIMIT_OVER:LanguageKeyJar.BOX_LIMIT_FREE),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),Arrester.levelManager.levelTent.checkToHook()},e.prototype.onFreeTouch=function(e){Arrester.levelManager.levelTent.checkToHook()},e.prototype.showFishOpratePanel=function(e){this.currentFish=e,this.standardToFishOpratePanel(),this.updateFishOprateText(),Arrester.uiLogicManager.addWing(this.fishOpratePanel)},e.prototype.updateFishOprateText=function(){this.fishOpratePanel.title=Arrester.getLang(LanguageKeyJar.FISH_OPRATE_TITLE),this.fishOpratePanel.boxButton.label=Arrester.getLang(LanguageKeyJar.FISH_OPRATE_PUT_BOX),this.fishOpratePanel.sellButton.label=Arrester.getLang(LanguageKeyJar.FISH_OPRATE_SELL),this.fishOpratePanel.freeButton.label=Arrester.getLang(LanguageKeyJar.FISH_OPRATE_FREE),this.fishOpratePanel.fishSellInfo.fishLabel.text=Arrester.getLang(this.currentFish.sourceData.name),this.fishOpratePanel.fishSellInfo.descriptionLabel.text=Arrester.getLang(this.currentFish.sourceData.description),this.fishOpratePanel.fishSellInfo.fishThumb.source=this.currentFish.sourceData.thumb_url;var e=Arrester.quoteManager.getFishPrice(null,this.currentFish.currentData.sign,this.currentFish.currentData.quality).toString(),t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e,LanguageKeyJar.MACRO_SHARP);this.fishOpratePanel.fishSellInfo.priceLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.PRICE),t,LanguageKeyJar.MACRO_SHARP);var r=Arrester.getLang(LanguageKeyJar.getFishQuality(this.currentFish.currentData.quality));this.fishOpratePanel.fishSellInfo.qualityLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),r,LanguageKeyJar.MACRO_SHARP)},e.prototype.stanardToShotMessagePanel=function(){if(this.shotMessagePanel)return this.shotMessagePanel;this.shotMessagePanel=new ShotMessagePanel;var e=1e3;return this.shotTimer=new egret.Timer(e),this.shotMessagePanel.addEventListener(egret.Event.ADDED_TO_STAGE,this.onShotAdded,this),this.shotMessagePanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onShotRemoved,this),this.shotMessagePanel},e.prototype.onShotAdded=function(e){this.currentDelay=this.closeDelay,this.onCloseTimer(null),this.shotTimer.addEventListener(egret.TimerEvent.TIMER,this.onCloseTimer,this),this.shotTimer.start()},e.prototype.onCloseTimer=function(e){this.currentDelay<0?DisplayTool.removeChildInSafe(this.shotMessagePanel):(this.shotMessagePanel.closeButton.label=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.SHOT_AUTO_CLOSE),this.currentDelay.toString(),LanguageKeyJar.MACRO_SHARP),this.currentDelay--)},e.prototype.onShotRemoved=function(e){this.shotTimer.removeEventListener(egret.TimerEvent.TIMER,this.onCloseTimer,this),this.shotTimer.stop()},e.prototype.showShotMeesagePanel=function(e){void 0===e&&(e=10),this.stanardToShotMessagePanel(),this.closeDelay=e,this.shotMessagePanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.shotMessagePanel.title=Arrester.getLang(LanguageKeyJar.ANSWER_TWO_TITLE),Arrester.uiLogicManager.addWing(this.shotMessagePanel)},e.prototype.showInShideLevelPanel=function(){this.standardToInSideLevelPanel(),this.updateInSideLevelDatas(),Arrester.stage.addChild(this.inSideLevelPanel)},e.prototype.standardToInSideLevelPanel=function(){return this.inSideLevelPanel?this.inSideLevelPanel:(this.inSideLevelPanel=new InSideLevelPanel,this.inSideLevelPanel.boxList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBoxItemTap,this),this.inSideLevelPanel.baitList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListItemTap,this),Arrester.tradeManager.addEventListener(TradeManager.SELL_FISH_SUCCESS,this.onSellFishSuccess,this),Arrester.mySpaceManager.addEventListener(MySpaceManager.PUT_FISH,this.onPutFish,this),this.inSideLevelPanel.width=Arrester.senceWidth,this.inSideLevelPanel.height=Arrester.senceHeight,this.inSideLevelPanel.x=0,void(this.inSideLevelPanel.y=0))},e.prototype.updateInSideLevelDatas=function(){this.inSideLevelPanel.myBaitLabel.text=Arrester.roleManager.player.currentData.isInLake?"我的蛋糕":"我的诱饵",this.inSideLevelPanel.clearButton.visible=Arrester.roleManager.player.currentData.isInLake,this.updateBoxList(),this.updateInList()},e.prototype.updateInList=function(){var e=Arrester.roleManager.player;e.currentData.isInLake?this.updateFeedList():this.updateBaitList()},e.prototype.updateFeedList=function(){var e=Arrester.roleManager.player,t=Arrester.itemManager.assembleInSign(e.currentData.items,[AllKeyJar.FEEDS]);if(this.inSideLevelPanel.baitList.dataProvider=Arrester.changeToArrayCollection(t),e.paw.feedData){var r="饲料["+e.paw.feedData.name+"] 准备好了";this.inSideLevelPanel.baitTipLabel.text=r}else this.inSideLevelPanel.baitList.selectedItem=null,this.inSideLevelPanel.baitTipLabel.text=t&&t.length>0?"请选择你的蛋糕↓":"快去买蛋糕吧"},e.prototype.updateBaitList=function(){var e=Arrester.roleManager.player,t=Arrester.itemManager.assembleInSign(e.currentData.items,[AllKeyJar.BAITS]);this.inSideLevelPanel.baitList.dataProvider=Arrester.changeToArrayCollection(t)},e.prototype.onBoxItemTap=function(e){var t=e.item;Arrester.mySpaceManager.showFishShowPanel(t)},e.prototype.onListItemTap=function(e){var t=Arrester.roleManager.player;t.currentData.isInLake?this.handleInFeed(e.item):this.handleUseBait(e.item)},e.prototype.handleInFeed=function(e){Arrester.itemManager.useSingleItem(e),this.updateFeedList(),Arrester.levelManager.levelTent.checkInPersonal(),DisplayTool.removeChildInSafe(this.inSideLevelPanel)},e.prototype.handleUseBait=function(e){var t=e;Arrester.itemManager.hasEventListener(ItemManager.ITEM_USE_SUCCESS)||Arrester.itemManager.addEventListener(ItemManager.ITEM_USE_SUCCESS,this.onItemUseSuccess,this),Arrester.itemManager.useItemWithMessage(t)},e.prototype.onSellFishSuccess=function(e){this.updateBoxList()},e.prototype.onPutFish=function(e){this.updateBoxList()},e.prototype.onItemUseSuccess=function(e){if(Arrester.levelManager.levelTent&&Arrester.levelManager.levelTent.stage){var t=Arrester.roleManager.player,r=t.hook;r.proxy.view.stage||r.action==ActionJar.HOOK_STAND_BY?(r.action=ActionJar.HOOK_RECYLE,r.velocity=r.proxy.getFloatVelocity()):Arrester.levelManager.levelTent.checkToHook()}},e.prototype.updateBoxList=function(){var e=Arrester.roleManager.player;this.inSideLevelPanel.boxList.dataProvider=Arrester.changeToArrayCollection(Arrester.mySpaceManager.fillInSize(e.currentData.boxFishes,e.currentData.fishBoxVolume,e.currentData.fishBoxLimitVolume,!1))},e.prototype.showAnswerTwoPanel=function(){this.standardToAnswerTwoPanel(),this.answerTwoPanel.title=Arrester.getLang(LanguageKeyJar.ANSWER_TWO_TITLE),this.answerTwoPanel.yesButton.label=Arrester.getLang(LanguageKeyJar.YES),this.answerTwoPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.NO),Arrester.uiLogicManager.addWing(this.answerTwoPanel)},e.prototype.standardToAnswerTwoPanel=function(){return this.answerTwoPanel?this.answerTwoPanel:(this.answerTwoPanel=new AnswerTwoPanel,this.answerTwoPanel)},e.prototype.showTalkFishWindow=function(){this.standardToTalkFishWindow(),this.talkFishWindow.left=2,this.talkFishWindow.bottom=40,Arrester.levelManager.levelTent.map.addToBack(this.talkFishWindow)},e.prototype.standardToTalkFishWindow=function(){return this.talkFishWindow?this.talkFishWindow:(this.talkFishWindow=new TalkFishWindow,this.talkFishWindow)},e.prototype.addToTalk=function(e,t){if(this.talkFishWindow&&this.talkFishWindow.stage){var r=e.talk(t);r&&this.talkFishWindow.addWord(r)}},e}();__reflect(FishOperateManager.prototype,"FishOperateManager");var HelpManager=function(e){function t(){var t=e.call(this)||this;return t._helpIndex=0,t}return __extends(t,e),t.prototype.stanardToHelpPanel=function(){return this.helpPanel?this.helpPanel:(this.helpPanel=new HelpPanel,this.helpPanel.verticalCenter=0,this.helpPanel.horizontalCenter=0,this.helpPanel.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftTap,this),this.helpPanel.rightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightTap,this),this.helpPanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.helpPanel.soundButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSoundTap,this),this.helpPanel.aboutButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAboutTap,this),this.helpPanel)},t.prototype.onLeftTap=function(e){this.helpIndex--},t.prototype.onRightTap=function(e){this.helpIndex++},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onSoundTap=function(e){Arrester.soundManager.showSoundPanel()},t.prototype.onAboutTap=function(e){this.showAboutPanel()},t.prototype.showHelpPanel=function(){this.stanardToHelpPanel(),this.updateLanguage(),Arrester.uiLogicManager.addWing(this.helpPanel)},t.prototype.stanardToAboutPanel=function(){return this.aboutPanel?this.aboutPanel:(this.aboutPanel=new AboutPanel,this.aboutPanel.blogButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBlogTap,this),this.aboutPanel.title="Game Designed By pp158825968@qq.com",this.aboutPanel)},t.prototype.showAboutPanel=function(){this.stanardToAboutPanel(),this.aboutPanel.blogButton.label=Arrester.getLang(LanguageKeyJar.ABOUT_TEXT),this.aboutPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),Arrester.uiLogicManager.addWing(this.aboutPanel)},t.prototype.onBlogTap=function(e){window.open("http://www.cnblogs.com/pp158825968/","blank")},t.prototype.updateLanguage=function(){this.helpPanel&&(this.helpIndex=this.helpIndex,this.helpPanel.title=Arrester.getLang(LanguageKeyJar.HELP_TITLE),this.helpPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.helpPanel.soundButton.label=Arrester.getLang(LanguageKeyJar.SOUND_BUTTON),this.helpPanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE),this.helpPanel.aboutButton.label=Arrester.getLang(LanguageKeyJar.ABOUT_BUTTON))},Object.defineProperty(t.prototype,"helpIndex",{get:function(){return this._helpIndex},set:function(e){this._helpIndex=e;var t=Arrester.languageManager.currentLanguageData[LanguageKeyJar.RULES];if(!t)return void(this.helpPanel.tipLabel.text="");this._helpIndex=this._helpIndex>=t.length?0:this._helpIndex,this._helpIndex=this._helpIndex<0?t.length-1:this._helpIndex;var r=t[this._helpIndex];this.helpPanel.tipLabel.text=r},enumerable:!0,configurable:!0}),t}(BasicManager);__reflect(HelpManager.prototype,"HelpManager");var ItemManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToItemTent=function(){return this.itemTent?this.itemTent:(this.itemTent=new ItemTent,this.initListeners(),this.itemTent)},t.prototype.setInItemTent=function(){this.itemTent.itemPanel.title=Arrester.getLang(LanguageKeyJar.ITEMS_TITLE),this.itemTent.itemPanel.itemTabBar.dataProvider=Arrester.changeToArrayCollection(AllKeyJar.itemNavis),this.onSellFishSuccess(null)},t.prototype.initListeners=function(){this.itemTent.itemPanel.itemTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabTap,this),this.itemTent.itemPanel.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListTap,this),this.itemTent.itemPanel.mySpaceButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMySpaceTap,this),this.itemTent.itemPanel.shopButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShopTap,this),this.itemTent.itemPanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.itemTent.itemPanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.addEventListener(t.ITEM_USE_SUCCESS,this.onItemUseSuccess,this),Arrester.breedManager.addEventListener(BreedManager.BREED_UPDATE,this.onBreedUpdate,this)},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onMySpaceTap=function(e){Arrester.nouManager.gotoMySpaceTent(),DisplayTool.removeChildInSafe(this.itemTent)},t.prototype.onShopTap=function(e){Arrester.poolsTentManager.runToShop()},t.prototype.onTabTap=function(e){var t=e.item==AllKeyJar.ALL?AllKeyJar.allItems:e.item==AllKeyJar.FISH?SignJar.fishes:[e.item];this.itemTent.itemPanel.itemListDatas=this.assembleInSign(Arrester.roleManager.player.currentData.items,t)},t.prototype.assembleInSign=function(e,t){var r=[];return e.forEach(function(e){if(t.indexOf(e.sign)>-1){var n=e.genre==AllKeyJar.FISH,a=n?{sign:e.sign,quality:e.quality}:{sign:e.sign,name:e.name},i=Arrester.findMarines(a,r),o=i[0];if(o)o.datas.push(e),o.count=o.datas.length;
else{o={name:"",sign:"",description:"",count:0,buttonText:"",quality:"",datas:null,isFish:!1,thumb_url:"",price:"0"};var s=e;o.isFish=n,o.sign=s.sign,o.description=s.description,o.price=n?-1:s.price,o.name=s.name,o.datas=[e],o.count=o.datas.length,o.quality=s.quality,o.thumb_url=s.thumb_url&&""!=s.thumb_url?s.thumb_url:Arrester.roleManager.player.currentData.vivid,r.push(o)}}}),r},t.prototype.onListTap=function(e){if(this.currentItemData=e.item,this.currentItemData.isFish)Arrester.tradeManager.showTradePanel(),Arrester.tradeManager.hasEventListener(TradeManager.SELL_FISH_SUCCESS)||Arrester.tradeManager.addEventListener(TradeManager.SELL_FISH_SUCCESS,this.onSellFishSuccess,this),Arrester.tradeManager.tradePanel.currentData=this.currentItemData;else{this.standardToShopShowPanel();var t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_NAME),Arrester.getLang(this.currentItemData.name),LanguageKeyJar.MACRO_SHARP),r=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_DESCRIPT),Arrester.getLang(this.currentItemData.description),LanguageKeyJar.MACRO_SHARP),n=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),this.currentItemData.price,LanguageKeyJar.MACRO_SHARP);Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_PRICE),n,LanguageKeyJar.MACRO_SHARP);this.itemShowPanel.updateText(t,r,n),this.showItemShowPanel()}},t.prototype.onSellFishSuccess=function(e){if(void 0===e&&(e=null),this.itemTent&&this.itemTent.stage){var t=this.itemTent.itemPanel.itemTabBar.selectedItem;t||(t=AllKeyJar.ALL);var r=t==AllKeyJar.ALL?AllKeyJar.allItems:t==AllKeyJar.FISH?SignJar.fishes:[t];this.itemTent.itemPanel.itemListDatas=this.assembleInSign(Arrester.roleManager.player.currentData.items,r)}},t.prototype.onItemUseSuccess=function(e){this.onSellFishSuccess(null)},t.prototype.onBreedUpdate=function(e){if(this.itemTent&&this.itemTent.stage){var t=this.itemTent.itemPanel.itemTabBar.selectedItem;(t==AllKeyJar.ALL||t==AllKeyJar.FISH)&&this.onSellFishSuccess(null)}},t.prototype.showItemTent=function(){this.standardToItemTent(),this.updateLanguage(),Arrester.stage.addChild(this.itemTent),this.setInItemTent()},t.prototype.showItemShowPanel=function(){this.standardToShopShowPanel(),this.itemShowPanel.title=Arrester.getLang(LanguageKeyJar.USE_ITEM_TITLE),this.itemShowPanel.useButton.label=Arrester.getLang(LanguageKeyJar.USE_ITEM),this.itemShowPanel.cancelButton.label=Arrester.getLang(LanguageKeyJar.NOT_USE_ITEM),Arrester.uiLogicManager.addWing(this.itemShowPanel)},t.prototype.standardToShopShowPanel=function(){return this.itemShowPanel?this.itemShowPanel:(this.itemShowPanel=new ItemShowPanel,this.itemShowPanel.useButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUseTap,this),this.itemShowPanel)},t.prototype.onUseTap=function(e){this.useItemWithMessage(this.currentItemData)},t.prototype.useItem=function(e){var r=e.datas,n=this.useSingleItem(r[0]);if(n.isOK){if(!r||r.length<=0)return;var a=r.pop();ImpressTool.removeFromArray(a,Arrester.roleManager.player.currentData.items),this.dispatchEvent(new egret.Event(t.ITEM_USE_SUCCESS))}return n},t.prototype.useItemWithMessage=function(e){var t=this.useItem(e);return t.message&&""!=t.message&&(Arrester.fishOperateManager.stanardToShotMessagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=t.message,Arrester.fishOperateManager.shotMessagePanel.title=t.title,Arrester.fishOperateManager.showShotMeesagePanel()),t},t.prototype.useSingleItem=function(e,t){void 0===t&&(t=!0);var r={isOK:!1,message:"",title:""},n=Arrester.roleManager.player;switch(e.sign){case AllKeyJar.BAITS:r.isOK=!n.hook.baitData||n.hook.baitData.isWet||n.hook.baitData.sign!=e.sign;var a=n.hook.baitData?n.hook.baitData.isWet:!1;if(r.isOK){var i=n.hook.baitData;if(e&&e instanceof BaitData)n.hook.baitData=e;else{var o=new BaitData;Arrester.evaluateInObject(e,o),n.hook.baitData=o}n.hook.baitData.isWet=!1,i&&!i.isWet&&n.currentData.items.push(i)}r.title=Arrester.getLang(LanguageKeyJar.ANSWER_TWO_TITLE),r.message=r.isOK?Arrester.getLang(LanguageKeyJar.USE_NEW_BAIT):Arrester.getLang(LanguageKeyJar.USE_BAIT_REPEATE),r.message=r.isOK&&a?r.message+Arrester.getLang(LanguageKeyJar.USE_BAIT_REPLACE):r.message;break;case AllKeyJar.DRAGS:r.isOK=!n.currentData.isStrongOver,r.isOK&&(n.currentData.strong=Math.min(n.currentData.strong+e.strong,n.currentData.strong_limit)),r.message=r.isOK?Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.STRONG_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP):Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.STRONG_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=r.isOK?Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.STRONG_ALLOW_TITLE),n.currentData.name,LanguageKeyJar.MACRO_SHARP):Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.STRONG_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP);break;case AllKeyJar.BOXES:r.isOK=!n.currentData.isBoxLimitOver,r.isOK?(Arrester.evaluateInObject(e,n.currentData.box),r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.BOX_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.BOX_ALLOW_TITLE)):(r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.BOX_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.BOX_NOT_ALLOW_TITLE));break;case AllKeyJar.PONDS:r.isOK=null==n.currentData.lake,r.isOK?(n.currentData.lake=new LakeData,Arrester.evaluateInObject(e,n.currentData.lake),BreedManager.updateLakeStatus(n.currentData.lake,!1),r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POND_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.POND_ALLOW_TITLE)):(r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POND_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.POND_NOT_ALLOW_TITLE));break;case AllKeyJar.FEEDS:if(n.currentData.isInLake){var s=e,h=s instanceof FeedData;n.paw.feedData&&n.paw.feedData.sign==s.sign?(r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FEED_NOT_EXCHANGE),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.isOK=!1):(n.paw.feedData=h?s:new FeedData(s),h||ImpressTool.replaceFromArray(s,n.paw.feedData,n.currentData.items),r.isOK=!0)}else r.isOK=!1,r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FEED_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.FEED_NOT_ALLOW_TITLE);break;case AllKeyJar.CLEANSERS:n.currentData.isInLake?(n.currentData.lake.cleanliness+=e.cleanliness,ImpressTool.removeFromArray(e,n.currentData.items),r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.CLEAN_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.CLEAN_ALLOW_TITLE),r.isOK=!0):(r.isOK=!1,r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.CLEAN_NOT_ALLOW),n.currentData.name,LanguageKeyJar.MACRO_SHARP),r.title=Arrester.getLang(LanguageKeyJar.CLEAN_NOT_ALLOW_TITLE));break;case AllKeyJar.DARKNESS:r.isOK=!1,r.message=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DODGE_USE_TIP),n.currentData.name,LanguageKeyJar.MACRO_SHARP)}return r},t.prototype.updateLanguage=function(){this.itemTent&&(this.itemTent.itemPanel.title=Arrester.getLang(LanguageKeyJar.ITEMS_TITLE),this.itemTent.itemPanel.mySpaceButton.label=Arrester.getLang(LanguageKeyJar.MY_SPACE_TITLE),this.itemTent.itemPanel.shopButton.label=Arrester.getLang(LanguageKeyJar.SHOP_NAME),this.itemTent.itemPanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE),this.itemTent.itemPanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_TITLE))},t.ITEM_USE_SUCCESS="item use success",t}(BasicManager);__reflect(ItemManager.prototype,"ItemManager");var LevelManager=function(){function e(){}return e.prototype.standardToLevelTent=function(){return this.levelTent?this.levelTent:(Arrester.mapManager.standardToMap(),this.levelTent=new LevelTent,this.levelTent.map=Arrester.mapManager.map,this.levelTent.hook=Arrester.roleManager.hook,this.levelTent.player=Arrester.roleManager.player,this.levelTent)},e.prototype.onLongHold=function(e){Arrester.fishOperateManager.showInShideLevelPanel()},e.prototype.onInsideClose=function(e){this.closeInSideLevelPanel()},e.prototype.closeInSideLevelPanel=function(){Arrester.fishOperateManager.inSideLevelPanel&&DisplayTool.removeChildInSafe(Arrester.fishOperateManager.inSideLevelPanel)},e.prototype.gotoLevel=function(e){this._currentLevel=e},e.prototype.loadAndGotoLevel=function(e){this._currentLevelData=e,this._currentLevel=e.id,Arrester.mapManager.map.mapKey=e.map_key;var t="-1"==e.id;Arrester.levelManager.levelTent.isPersonalPool=t,t?e.fishes=Arrester.roleManager.player.currentData.lakeFishes:Arrester.roleManager.player.hook.proxy.hookLine.lineColor=this._currentLevelData.line_color,Arrester.roleManager.levelData=e,Arrester.levelManager.levelTent.fortunes=Arrester.roleManager.fortunes,Arrester.levelManager.levelTent.map.backgroundColor=Number(e.color),Arrester.levelTailManager.standardToUnderBar(),Arrester.levelTailManager.underBar.width=Arrester.levelManager.levelTent.width,Arrester.levelTailManager.underBar.bottom=0,Arrester.levelManager.levelTent.addChild(Arrester.levelTailManager.underBar),Arrester.stage.addChild(Arrester.levelManager.levelTent),Arrester.levelManager.levelTent.start(),Arrester.fishOperateManager.showTalkFishWindow(),t&&Arrester.levelManager.levelTent.fortunes.length<=0&&Arrester.mySpaceManager.showFishBoxPanel(),DisplayTool.removeChildInSafe(Arrester.poolsTentManager.poolsTent),DisplayTool.removeChildInSafe(Arrester.vividManager.vividBar)},Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this._currentLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevelData",{get:function(){return this._currentLevelData},enumerable:!0,configurable:!0}),e}();__reflect(LevelManager.prototype,"LevelManager");var LevelTailManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToLevelTailPanel=function(){if(this.levelTailPanel)return this.levelTailPanel;this.levelTailPanel=new LevelTailPanel,this.levelTailPanel.top=0,this.levelTailPanel.left=0,this.levelTailPanel.right=0,this.levelTailPanel.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseTap,this),this.levelTailPanel.tipButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTipTap,this),this.levelTailPanel.boxButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBoxTap,this),this.levelTailPanel.useButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onUseTap,this),this.levelTailPanel.morraButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMorraTap,this),this.levelTailPanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.levelTailPanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.levelTailPanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.levelTailPanel.backButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackTap,this);var e=Arrester.fishOperateManager.standardToAnswerTwoPanel();return e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),Arrester.mySpaceManager.addEventListener(MySpaceManager.BAIT_UPDATE,this.onBaitUpdate,this),Arrester.levelManager.levelTent.addEventListener(LevelTent.INSIDE_CLOSE,this.onInsideColse,this),this.addEventListener(t.FEED_UPDATE,this.onFeedUpdate,this),Arrester.breedManager.addEventListener(BreedManager.BREED_UPDATE,this.onBreedUpdate,this),this.levelTailPanel.top=0,this.levelTailPanel.left=0,this.levelTailPanel.right=0,this.levelTailPanel},t.prototype.onInsideColse=function(e){DisplayTool.removeChildInSafe(this.levelTailPanel),DisplayTool.removeChildInSafe(Arrester.mySpaceManager.baitPanel),DisplayTool.removeChildInSafe(Arrester.mySpaceManager.fishBoxPanel),DisplayTool.removeChildInSafe(Arrester.mySpaceManager.fishShowPanel),DisplayTool.removeChildInSafe(Arrester.mySpaceManager.baitPanel),DisplayTool.removeChildInSafe(Arrester.languageManager.languagePanel),DisplayTool.removeChildInSafe(Arrester.morraManager.morraPanel),DisplayTool.removeChildInSafe(Arrester.fishOperateManager.answerTwoPanel),DisplayTool.removeChildInSafe(Arrester.soundManager.soundPanel),DisplayTool.removeChildInSafe(Arrester.helpManager.helpPanel),Arrester.vividManager.removeVividBar()},t.prototype.onRemoved=function(e){Arrester.fishOperateManager.answerTwoPanel.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),Arrester.fishOperateManager.answerTwoPanel.yesButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYes,this)},t.prototype.onCloseTap=function(e){DisplayTool.removeChildInSafe(Arrester.vividManager.vividBar)},t.prototype.onBoxTap=function(e){Arrester.mySpaceManager.showFishBoxPanel()},t.prototype.onUseTap=function(e){Arrester.roleManager.player.currentData.isInLake?this.showFeedPanel():Arrester.mySpaceManager.showBaitPanel()},t.prototype.onBaitUpdate=function(e){Arrester.levelManager.levelTent&&Arrester.levelManager.levelTent.stage&&(Arrester.levelManager.levelTent.checkToHook(),this.recyleHook(),this.updateTipText())},t.prototype.recyleHook=function(){var e=Arrester.roleManager.hook;(e.action==ActionJar.HOOK_FREE||e.action==ActionJar.HOOK_STAND_BY)&&(e.action=ActionJar.HOOK_RECYLE,e.velocity=e.proxy.getFloatVelocity())},t.prototype.onMorraTap=function(e){Arrester.morraManager.showMorraPanel()},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onBackTap=function(e){Arrester.fishOperateManager.standardToAnswerTwoPanel().addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),Arrester.fishOperateManager.answerTwoPanel.quizLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.LEVEL_STOP),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),Arrester.fishOperateManager.showAnswerTwoPanel()},t.prototype.onTipTap=function(e){var t=Arrester.roleManager.player;if(t.currentData.isInLake)this.showCleanPoolPanel();else if(t.currentData.bait)if(t.hook.isInWater)this.recyleHook();else{var r=Arrester.rangeRandom(0,Arrester.senceWidth),n=Arrester.rangeRandom(0,Arrester.senceHeight);Arrester.levelManager.levelTent.throwHook(r,n)}else Arrester.mySpaceManager.showBaitPanel();this.updateTipText()},t.prototype.onAdded=function(e){Arrester.fishOperateManager.answerTwoPanel.yesButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYes,this)},t.prototype.onYes=function(e){"fishing"==Arrester.levelManager.currentLevelData.sign&&Arrester.levelManager.currentLevelData.checkInStrike()&&Arrester.levelManager.currentLevelData.startMoratorium(),Arrester.nouManager.gotoPoolsTent(),Arrester.levelManager.levelTent.stop(),Arrester.fishOperateManager.talkFishWindow.clearWord(),DisplayTool.removeChildInSafe(Arrester.levelManager.levelTent)},t.prototype.showLevelTailPanel=function(){this.standardToLevelTailPanel(),this.updateLanguage(),Arrester.levelManager.levelTent.addChild(this.levelTailPanel),Arrester.vividManager.showVividBar()},t.prototype.standardToUnderBar=function(){return this.underBar?this.underBar:(this.underBar=new UnderBar,this.underBar.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftTap,this),this.underBar.rightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightTap,this),this.underBar.bottom=0,this.underBar.left=0,this.underBar.right=0,this.underBar)},t.prototype.showLevelUnderBar=function(){this.standardToUnderBar(),Arrester.levelManager.levelTent.map.addToBack(this.underBar)},t.prototype.onRightTap=function(e){this.showLevelTailPanel()},t.prototype.onLeftTap=function(e){var t=Arrester.fishOperateManager.talkFishWindow;t&&t.stage?(DisplayTool.removeChildInSafe(t),this.underBar.leftButton.text="+"):(Arrester.fishOperateManager.showTalkFishWindow(),this.underBar.leftButton.text="-")},t.prototype.updateLanguage=function(){this.levelTailPanel&&(this.levelTailPanel.title=Arrester.getLang(Arrester.levelManager.currentLevelData.name),this.levelTailPanel.boxButton.label=Arrester.getLang(LanguageKeyJar.MY_FISH_BOX),this.levelTailPanel.morraButton.label=Arrester.getLang(LanguageKeyJar.MORRA_BUTTON),this.levelTailPanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_BUTTON),this.levelTailPanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE),this.levelTailPanel.useButton.label=Arrester.roleManager.player.currentData.isInLake?Arrester.getLang(LanguageKeyJar.MY_FEED):Arrester.getLang(LanguageKeyJar.MY_BAIT),this.updateTipText())},t.prototype.updateTipText=function(){var e=Arrester.roleManager.player,t="";t=e.currentData.isInLake?Arrester.getLang(LanguageKeyJar.MY_CLEANSER):e.currentData.bait?e.hook.isInWater?Arrester.getLang(LanguageKeyJar.BAIT_RETURN):Arrester.getLang(LanguageKeyJar.BAIT_THROW):Arrester.getLang(LanguageKeyJar.BAIT_IN_TIP),this.levelTailPanel.tipButton.label=t},t.prototype.showFeedPanel=function(){this.standardToFeedPanel();Arrester.roleManager.player;this.updateFeedList(),Arrester.uiLogicManager.addWing(this.feedPanel)},t.prototype.standardToFeedPanel=function(){return this.feedPanel?this.feedPanel:(this.feedPanel=new FeedPanel,this.feedPanel.feedList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onFeedItemTap,this),this.feedPanel)},t.prototype.onFeedItemTap=function(e){var r=Arrester.itemManager.useItemWithMessage(e.item);r.isOK&&(DisplayTool.removeChildInSafe(this.feedPanel),this.updateFeedList(),this.dispatchEventWith(t.FEED_UPDATE))},t.prototype.onFeedUpdate=function(e){Arrester.levelManager.levelTent.closePanels(),Arrester.levelManager.levelTent.checkInPersonal(),this.updateTipText(),this.updateLanguage()},t.prototype.updateFeedList=function(){var e=Arrester.roleManager.player,t=Arrester.itemManager.assembleInSign(e.currentData.items,[AllKeyJar.FEEDS]);this.feedPanel.feedList.dataProvider=Arrester.changeToArrayCollection(t),this.feedPanel.feedImage.source=e.paw.feedData?e.paw.feedData.thumb_url:e.currentData.vivid,this.updateFeedPanelLanguage()},t.prototype.updateFeedPanelLanguage=function(){this.feedPanel.title=Arrester.getLang(LanguageKeyJar.FEED_TITLE),this.feedPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON);var e,t=Arrester.roleManager.player;if(t.paw.feedData){var r=Arrester.getLang(t.paw.feedData.name);e=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FEED_IN),r,LanguageKeyJar.MACRO_SHARP)}else e=Arrester.getLang(LanguageKeyJar.FEED_NOT_IN);this.feedPanel.feedTipLabel.text=e},t.prototype.showCleanPoolPanel=function(){this.standardToCleanPoolPanel(),this.updateCleanPoolPanel(),this.updateCleanserList(),Arrester.uiLogicManager.addWing(this.cleanPoolPanel)},t.prototype.standardToCleanPoolPanel=function(){return this.cleanPoolPanel?this.cleanPoolPanel:(this.cleanPoolPanel=new CleanPoolPanel,this.cleanPoolPanel.cleanserList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.cleanPoolPanel)},t.prototype.updateCleanPoolPanel=function(){var e=Arrester.roleManager.player.currentData.lake;this.cleanPoolPanel.title=Arrester.getLang(LanguageKeyJar.CLEAN_TITLE),this.cleanPoolPanel.cleanLevelLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.CLEAN_LEVEL),Arrester.getLang(LanguageKeyJar.getFishQuality(e.levelStatus)),LanguageKeyJar.MACRO_SHARP),this.cleanPoolPanel.currentExpLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.CLEAN_EXP),Arrester.breedManager.currentFishEXP.toString(),LanguageKeyJar.MACRO_SHARP),this.cleanPoolPanel.myCleanserLabel.text=Arrester.getLang(LanguageKeyJar.MY_CLEANSER_TIP),this.cleanPoolPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON)},t.prototype.updateCleanserList=function(){var e=Arrester.itemManager.assembleInSign(Arrester.roleManager.player.currentData.items,[AllKeyJar.CLEANSERS]);this.cleanPoolPanel.cleanserList.dataProvider=Arrester.changeToArrayCollection(e)},t.prototype.onItemTap=function(e){this.currentCleanser=e.item,Arrester.fishOperateManager.showAnswerTwoPanel(),Arrester.fishOperateManager.answerTwoPanel.title="快用咯",Arrester.fishOperateManager.answerTwoPanel.quizLabel.text="要使用清洁剂吗",Arrester.fishOperateManager.answerTwoPanel.yesButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCleanserUse,this)},t.prototype.onCleanserUse=function(e){Arrester.fishOperateManager.answerTwoPanel.yesButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCleanserUse,this);var t=Arrester.itemManager.useItemWithMessage(this.currentCleanser);t.isOK&&(this.updateCleanserList(),Arrester.breedManager.breedUpdate(),Arrester.soundManager.play(SoundJar.CLEAN,!1,!0))},t.prototype.onClearButtonTap=function(e){this.showCleanPoolPanel()},t.prototype.onBreedUpdate=function(e){Arrester.roleManager.player;this.cleanPoolPanel&&this.cleanPoolPanel.stage&&this.updateCleanPoolPanel()},t.FEED_UPDATE="feed update",t}(BasicManager);__reflect(LevelTailManager.prototype,"LevelTailManager");var MapManager=function(){function e(){}return e.prototype.standardToMap=function(){return this.map?this.map:(this.map=new BaseMap,this.map)},e}();__reflect(MapManager.prototype,"MapManager");var MorraManager=function(e){function t(){var t=e.call(this)||this;return t.updateIndex=0,t}return __extends(t,e),t.prototype.showMorraPanel=function(){this.checkBaitIsOver()||(this.standardToMorraPanel(),this.standardMorraBolton(),this.updateMorraLanguage(),Arrester.uiLogicManager.addWing(this.morraPanel))},t.prototype.standardToMorraPanel=function(){return this.morraPanel?this.morraPanel:(this.morraPanel=new MorraPanel,this.morraPanel.guessButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGuessTap,this),this.morraPanel)},t.prototype.standardMorraBolton=function(){return this.morraBolton?this.morraBolton:(this.morraBolton=new MorraBolton,this.morraBolton.addEventListener(MorraBolton.MORRA_RESULT,this.onMorraResult,this),this.morraBolton.addEventListener(MorraBolton.MORRA_UPDATE,this.onMorraUpdate,this),this.morraBolton)},t.prototype.onMorraUpdate=function(e){var t=MorraBolton.signs[this.updateIndex];this.morraPanel.resultLabel.text=Arrester.getLang(t),this.updateIndex++,this.updateIndex=this.updateIndex>MorraBolton.signs.length-1?0:this.updateIndex},t.prototype.onMorraResult=function(e){var t=Math.floor(Arrester.rangeRandom(0,MorraBolton.signs.length)),r=MorraBolton.signs[t];this.morraPanel.resultLabel.text=Arrester.getLang(r);var n=this.morraPanel.selectedSign,a=this.morraBolton.getFightResult(n,r);if(a==MorraBolton.WIN?this.morraBolton.winTimes++:(this.morraBolton.winTimes--,this.morraBolton.winTimes=Math.max(0,this.morraBolton.winTimes)),this.morraPanel.setWinTimes(this.morraBolton.winTimes),this.morraPanel.guessButton.touchEnabled=!0,3==this.morraBolton.winTimes){var i=new BaitData,o=Arrester.findMarines({id:0},Arrester.gameData.shop.cargos)[0];Arrester.evaluateInObject(o,i),Arrester.roleManager.player.currentData.items.push(i),Arrester.fishOperateManager.inSideLevelPanel&&Arrester.fishOperateManager.updateBaitList(),Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MORRA_WIN_TEXT),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP)}},t.prototype.onGuessTap=function(e){this.checkBaitIsOver()||(this.morraBolton.winTimes>=3&&(this.morraBolton.winTimes=0),this.morraBolton.startMorra(),this.morraPanel.guessButton.touchEnabled=!1)},t.prototype.checkBaitIsOver=function(){var e=Arrester.roleManager.player,t=e.currentData.baits,r=t.length>=10;return r&&(Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MORRA_STOP),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP)),r},t.prototype.updateMorraLanguage=function(){this.morraPanel&&(this.morraPanel.title=Arrester.getLang(LanguageKeyJar.MORRA_TITLE),this.morraPanel.guessButton.label=Arrester.getLang(LanguageKeyJar.MORRA_BUTTON),this.morraPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.morraPanel.paperRadio.label=Arrester.getLang(MorraBolton.PAPER),this.morraPanel.scissorsRadio.label=Arrester.getLang(MorraBolton.SCISSOR),this.morraPanel.rockRadio.label=Arrester.getLang(MorraBolton.ROCK))},t}(egret.EventDispatcher);__reflect(MorraManager.prototype,"MorraManager");var MySpaceManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToMySpaceTent=function(){return this.mySpaceTent?this.mySpaceTent:(this.mySpaceTent=new MySpaceTent,this.mySpaceTent.mySpacePanel.myBoxButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyBoxButtonTap,this),this.mySpaceTent.mySpacePanel.myBaitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyBaitButtonTap,this),this.mySpaceTent.mySpacePanel.myItemButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyItemButtonTap,this),this.mySpaceTent.mySpacePanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageButtonTap,this),this.mySpaceTent.mySpacePanel.morraButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMorraTap,this),this.mySpaceTent.mySpacePanel.myLakeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyLakeTap,this),this.mySpaceTent.mySpacePanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.mySpaceTent.mySpacePanel.aboutButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAboutTap,this),this.mySpaceTent.mySpacePanel.gotoFishButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGotoFishTouchTab,this),this.mySpaceTent)},t.prototype.onMyLakeTap=function(e){Arrester.poolsTentManager.checkLakeIsOpen()&&Arrester.poolsTentManager.runToLake()},t.prototype.onMorraTap=function(e){Arrester.morraManager.showMorraPanel()},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onLanguageButtonTap=function(){Arrester.languageManager.showLanguagePanel()},t.prototype.onMyBoxButtonTap=function(e){this.showFishBoxPanel()},t.prototype.onAboutTap=function(e){Arrester.helpManager.showAboutPanel()},t.prototype.onMyBaitButtonTap=function(e){this.showBaitPanel()},t.prototype.onMyItemButtonTap=function(e){Arrester.nouManager.gotoItemTent()},t.prototype.showBaitPanel=function(){this.standardToBaitPanel();Arrester.roleManager.player;this.updateBaitList(),Arrester.uiLogicManager.addWing(this.baitPanel)},t.prototype.standardToBaitPanel=function(){return this.baitPanel?this.baitPanel:(this.baitPanel=new BaitPanel,this.baitPanel.baitList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onBaitItemTap,this),this.baitPanel)},t.prototype.onBaitItemTap=function(e){var r=Arrester.itemManager.useItemWithMessage(e.item);r.isOK&&(this.updateBaitList(),this.dispatchEventWith(t.BAIT_UPDATE))},t.prototype.updateBaitList=function(){var e=Arrester.roleManager.player,t=Arrester.itemManager.assembleInSign(e.currentData.items,[AllKeyJar.BAITS]);this.baitPanel.baitList.dataProvider=Arrester.changeToArrayCollection(t),this.baitPanel.baitImage.source=e.currentData.bait?e.currentData.bait.thumb_url:e.currentData.vivid,this.updateBaitPanelLanguage()},t.prototype.showFishBoxPanel=function(){this.standardFishBoxPanel();var e=Arrester.roleManager.player;this.updateFishBox(),this.fishBoxPanel.boxImage.source=e.currentData.box.thumb_url,this.updateFishBoxPanelLanguage(),Arrester.uiLogicManager.addWing(this.fishBoxPanel)},t.prototype.standardFishBoxPanel=function(){return this.fishBoxPanel?this.fishBoxPanel:(this.fishBoxPanel=new FishBoxPanel,this.fishBoxPanel.boxList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.fishBoxPanel)},t.prototype.onGotoFishTouchTab=function(e){DisplayTool.removeChildInSafe(Arrester.mySpaceManager.mySpaceTent),Arrester.nouManager.gotoPoolsTent()},t.prototype.showMySpace=function(){this.standardToMySpaceTent(),this.updateLanguage(),Arrester.stage.addChild(this.mySpaceTent),Arrester.vividManager.showVividBar()},t.prototype.updateFishBox=function(){if(this.fishBoxPanel){var e=Arrester.roleManager.standardToPlayer();this.fishBoxPanel.boxList.dataProvider=Arrester.changeToArrayCollection(Arrester.mySpaceManager.fillInSize(e.currentData.boxFishes,e.currentData.fishBoxVolume,e.currentData.fishBoxLimitVolume,!0))}},t.prototype.fillInSize=function(e,t,r,n){if(void 0===n&&(n=!0),e.length>=r)return e;for(var a,i=e.concat(),o=t-e.length,s=0;o>s;s++)a={thumb_url:"button_bg_png",isEmpty:!0},i.push(a);if(n){var h=r-t;for(s=0;h>s;s++)a={thumb_url:Arrester.roleManager.player.currentData.vivid,isEmpty:!1,isNotFree:!0},i.push(a)}return i},t.prototype.standardToFishShowPanel=function(){return this.fishShowPanel||(this.fishShowPanel=new FishShowPanel,this.fishShowPanel.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSellTap,this),this.fishShowPanel.putButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPutTap,this),this.fishShowPanel.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.fishShowPanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)),this.fishShowPanel},t.prototype.onItemTap=function(e){var t=e.item;this.showFishShowPanel(t)},t.prototype.onSellTap=function(e){var t=1,r=this.currentFishData.key,n=this.currentFishData.sign,a=this.currentFishData.quality,i=this.currentFishData.id,o=Arrester.tradeManager.sellFishWithMessage(n,a,r,t,"all",i);o.isOK&&(this.currentFishData.fishObject&&Arrester.roleManager.player.currentData.isInLake&&(this.currentFishData.fishObject.proxy.view.touchEnabled=!1,this.currentFishData.fishObject.velocity=VelocityTool.upVelocity.mutliply(7),this.currentFishData.fishObject.action=ActionJar.PUT_BOX),Arrester.fishOperateManager.addToTalk(this.currentFishData.fishObject,"selled")),this.updateFishBox(),Arrester.vividManager.updateVividBar()},t.prototype.onPutTap=function(e){var r=Arrester.roleManager.player;if(r.currentData.isInLake)if(this.currentFishData.place==AllKeyJar.BOX){this.currentFishData.place=AllKeyJar.LAKE;var n=Arrester.roleManager.getAFishRole(this.currentFishData,Arrester.roleManager.addForFishProxy,Arrester.roleManager.addFishFun);Arrester.levelManager.levelTent.addBehaviorObjectToFront(n),this.dispatchEvent(new egret.Event(t.PUT_FISH)),Arrester.fishOperateManager.addToTalk(n,"free"),Arrester.darkRouteManager.checkInLevy()}else this.currentFishData.place==AllKeyJar.LAKE&&(this.currentFishData.place=AllKeyJar.BOX,this.dispatchEvent(new egret.Event(t.PUT_FISH)),this.currentFishData.fishObject&&(this.currentFishData.fishObject.proxy.view.touchEnabled=!1,this.currentFishData.fishObject.velocity=VelocityTool.upVelocity.mutliply(7),this.currentFishData.fishObject.action=ActionJar.PUT_BOX),Arrester.fishOperateManager.addToTalk(this.currentFishData.fishObject,"shut"));this.updateFishBox()},t.prototype.showFishShowPanel=function(e){this.currentFishData=e,e&&(e.isEmpty||(this.standardToFishShowPanel(),this.setFishShowPanelContent(),Arrester.uiLogicManager.addWing(this.fishShowPanel)))},t.prototype.setFishShowPanelContent=function(){if(this.currentFishData)if(this.currentFishData.isNotFree)this.fishShowPanel.title=Arrester.getLang(LanguageKeyJar.GRID_SHOW_TITLE),this.fishShowPanel.okButton.label=Arrester.getLang(LanguageKeyJar.OK_BUTTON),this.fishShowPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.fishShowPanel.boxTipLabel.text=Arrester.getLang(LanguageKeyJar.BIGGER_BOX_TIPS),this.fishShowPanel.showBuyBareGroup();else{this.fishShowPanel.title=Arrester.getLang(LanguageKeyJar.FISH_SHOW_TITLE),this.fishShowPanel.fishSellInfo.descriptionLabel.text=Arrester.getLang(this.currentFishData.description),this.fishShowPanel.fishSellInfo.qualityLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),Arrester.getLang(LanguageKeyJar.getFishQuality(this.currentFishData.quality)),LanguageKeyJar.MACRO_SHARP),this.fishShowPanel.fishSellInfo.fishLabel.text=Arrester.getLang(this.currentFishData.name);
var e=Arrester.quoteManager.getFishPrice(null,this.currentFishData.sign,this.currentFishData.quality).toString();this.fishShowPanel.fishSellInfo.priceLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.PRICE),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),this.fishShowPanel.fishSellInfo.fishThumb.source=this.currentFishData.thumb_url,this.fishShowPanel.putButton.visible=Arrester.roleManager.player.currentData.isInLake,this.fishShowPanel.putButton.label=Arrester.getLang(this.currentFishData.isInLake?LanguageKeyJar.PUT_BOX:LanguageKeyJar.PUT_LAKE),this.fishShowPanel.sellButton.label=Arrester.getLang(LanguageKeyJar.SELL),this.fishShowPanel.close2Button.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.fishShowPanel.showSellFishGroup()}},t.prototype.onAdded=function(e){Arrester.quoteManager.addEventListener(QuoteManager.QUOTE_UPDATE,this.onQuoteUpdate,this),Arrester.breedManager.addEventListener(BreedManager.BREED_UPDATE,this.onBreedUpdate,this)},t.prototype.onRemoved=function(e){Arrester.quoteManager.removeEventListener(QuoteManager.QUOTE_UPDATE,this.onQuoteUpdate,this),Arrester.breedManager.removeEventListener(BreedManager.BREED_UPDATE,this.onBreedUpdate,this)},t.prototype.onQuoteUpdate=function(e){if(this.currentFishData&&this.fishShowPanel.stage&&this.fishShowPanel.fishSellInfo.visible){var t=Arrester.quoteManager.getFishPrice(null,this.currentFishData.sign,this.currentFishData.quality).toString();this.fishShowPanel.fishSellInfo.priceLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.PRICE),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),t,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP)}},t.prototype.onBreedUpdate=function(e){this.currentFishData&&this.fishShowPanel.stage&&this.fishShowPanel.fishSellInfo.visible&&(this.fishShowPanel.fishSellInfo.qualityLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),Arrester.getLang(LanguageKeyJar.getFishQuality(this.currentFishData.quality)),LanguageKeyJar.MACRO_SHARP))},t.prototype.updateLanguage=function(){this.mySpaceTent&&(this.mySpaceTent.mySpacePanel.title=Arrester.getLang(LanguageKeyJar.MY_SPACE_TITLE),this.mySpaceTent.mySpacePanel.gotoFishButton.label=Arrester.getLang(LanguageKeyJar.GO_FISH),this.mySpaceTent.mySpacePanel.myBoxButton.label=Arrester.getLang(LanguageKeyJar.MY_FISH_BOX),this.mySpaceTent.mySpacePanel.myBaitButton.label=Arrester.getLang(LanguageKeyJar.MY_BAIT),this.mySpaceTent.mySpacePanel.morraButton.label=Arrester.getLang(LanguageKeyJar.MORRA_BUTTON),this.mySpaceTent.mySpacePanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE),this.mySpaceTent.mySpacePanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_BUTTON),this.mySpaceTent.mySpacePanel.aboutButton.label=Arrester.getLang(LanguageKeyJar.ABOUT_BUTTON),this.mySpaceTent.mySpacePanel.myItemButton.label=Arrester.getLang(LanguageKeyJar.MY_ITEM),this.mySpaceTent.mySpacePanel.myLakeButton.label=Arrester.getLang(LanguageKeyJar.MY_LAKE_BUTTON),this.mySpaceTent.mySpacePanel.allLabel.text=Arrester.getLang(LanguageKeyJar.ALL_HAVE))},t.prototype.updateFishBoxPanelLanguage=function(){if(this.fishBoxPanel){var e=Arrester.roleManager.player,t=Arrester.getLang(e.currentData.box.name),r=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FISH_BOX_STATUS),e.currentData.box.fish_box_volume.toString(),LanguageKeyJar.MACRO_SHARP),n=t+r;this.fishBoxPanel.boxLabel.text=n,this.fishBoxPanel.title=Arrester.getLang(LanguageKeyJar.MY_FISH_BOX),this.fishBoxPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON)}},t.prototype.updateBaitPanelLanguage=function(){this.baitPanel.title=Arrester.getLang(LanguageKeyJar.BAIT_TITLE),this.baitPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON);var e,t=Arrester.roleManager.player;if(t.currentData.bait){var r=Arrester.getLang(t.currentData.bait.name);e=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.BAIT_IN),r,LanguageKeyJar.MACRO_SHARP),e+=t.currentData.bait.isWet?Arrester.getLang(LanguageKeyJar.BAIT_IS_WET):Arrester.getLang(LanguageKeyJar.BAIT_IS_NOT_WET)}else e=Arrester.getLang(LanguageKeyJar.BAIT_NOT_IN);this.baitPanel.baitTipLabel.text=e},t.BAIT_UPDATE="bait update",t.PUT_FISH="put fish",t}(BasicManager);__reflect(MySpaceManager.prototype,"MySpaceManager");var PoolsTentManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToPoolsTent=function(){return this.poolsTent||(this.poolsTent=new PoolsTent,this.poolsTent.poolPathView.addEventListener(PoolPathView.RENDER_TAP,this.onItemTap,this),this.poolsTent.poolPathView.addEventListener(PoolPathView.RUN_COMPLETE,this.onRunComplete,this),this.poolsTent.datas=this.buildLevelDatas(Arrester.gameData.levels),this.poolsTent.poolPathView.updatePlayerView()),this.poolsTent},t.prototype.showPoolsTent=function(){Arrester.poolsTentManager.standardToPoolsTent(),Arrester.poolsTentManager.poolsTent.poolTitlePanel.title=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POOL_TITLE),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),Arrester.stage.addChild(Arrester.poolsTentManager.poolsTent),this.updateLanguage()},t.prototype.updateLanguage=function(){this.poolsTent&&(Arrester.poolsTentManager.poolsTent.poolTitlePanel.title=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POOL_TITLE),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP))},t.prototype.buildLevelDatas=function(e){var t=[];return e.forEach(function(e){var r=new LevelData;Arrester.evaluateInObject(e,r),t.push(r),r.resetInStrike()}),t},t.prototype.standardToPoolsDescriptPanel=function(){return this.poolsDescriptPanel||(this.poolsDescriptPanel=new PoolDescriptionPanel,this.poolsDescriptPanel.okButton.addEventListener(egret.TouchEvent.TOUCH_END,this.onOKButtonTouchBegin,this),this.poolsDescriptPanel.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.poolsDescriptPanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)),this.poolsDescriptPanel},t.prototype.onAdded=function(e){this.selectedLevelData.addEventListener(LevelData.MORATORIUM_UPDATE,this.onMoratoriumUpdate,this)},t.prototype.onRemoved=function(e){this.selectedLevelData.removeEventListener(LevelData.MORATORIUM_UPDATE,this.onMoratoriumUpdate,this)},t.prototype.onItemTap=function(e){this.selectedLevelData=e.data,("-1"!=this.selectedLevelData.id||this.checkLakeIsOpen())&&(this.standardToPoolsDescriptPanel(),this.poolsDescriptPanel.title=Arrester.getLang(this.selectedLevelData.name),this.poolsDescriptPanel.descriptLabel.text=Arrester.getLang(this.selectedLevelData.description),this.poolsDescriptPanel.okButton.label=Arrester.getLang(LanguageKeyJar.GO),this.poolsDescriptPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.NO_GO),this.updatePoolTips(),Arrester.uiLogicManager.addWing(this.poolsDescriptPanel))},t.prototype.onMoratoriumUpdate=function(e){this.updatePoolTips()},t.prototype.updatePoolTips=function(){if(this.poolsDescriptPanel.tipsLabel.text="",this.selectedLevelData.is_open){if(this.selectedLevelData.sign==LevelData.FISHING_SIGN&&this.selectedLevelData.isInMoratorium){var e=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.SECONDS),this.selectedLevelData.currentMoratoriumTime.toString(),LanguageKeyJar.MACRO_SHARP);this.poolsDescriptPanel.tipsLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.CURRENT_MORATORIUM_TIME),e,LanguageKeyJar.MACRO_SHARP)}}else if(this.selectedLevelData.sign==LevelData.FISHING_SIGN&&this.selectedLevelData.cost>0){var t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),this.selectedLevelData.cost.toString(),LanguageKeyJar.MACRO_SHARP);this.poolsDescriptPanel.tipsLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.COST_TO_OPEN),t,LanguageKeyJar.MACRO_SHARP)}},t.prototype.onOKButtonTouchBegin=function(e){if(void 0===e&&(e=null),this.selectedLevelData.is_open){if(this.selectedLevelData.isInMoratorium)return Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.title=Arrester.getLang(LanguageKeyJar.ANSWER_TWO_TITLE),void(Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.getLang(LanguageKeyJar.BAN_IN_MORATORIUM))}else if(this.selectedLevelData.sign==LevelData.FISHING_SIGN&&this.selectedLevelData.cost>0){Arrester.fishOperateManager.showAnswerTwoPanel(),Arrester.fishOperateManager.answerTwoPanel.title=Arrester.getLang(LanguageKeyJar.ANSWER_TWO_TITLE);var t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),this.selectedLevelData.cost.toString(),LanguageKeyJar.MACRO_SHARP);return Arrester.fishOperateManager.answerTwoPanel.quizLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.COST_TO_OPEN_SURE),t,LanguageKeyJar.MACRO_SHARP),Arrester.fishOperateManager.answerTwoPanel.yesButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesTap,this),Arrester.fishOperateManager.answerTwoPanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedAnswer,this),void Arrester.vividManager.showVividBar()}Arrester.roleManager.player.currentData.level_id==this.selectedLevelData.id?this.onRunComplete(null):(this.poolsTent.touchEnabled=!1,this.poolsTent.touchChildren=!1,this.poolsTent.touchThrough=!1,this.poolsTent.poolPathView.startForRun(this.selectedLevelData.id),Arrester.uiLogicManager.showRunButtons(),this.poolsTent.addEventListener(egret.Event.ENTER_FRAME,this.onRuning,this),this.poolsDescriptPanel&&this.poolsDescriptPanel.close())},t.prototype.onYesTap=function(e){var t=Arrester.roleManager.player,r=t.currentData.balance-this.selectedLevelData.cost;r>=0&&(t.currentData.balance=r,this.selectedLevelData.is_open=!0,Arrester.fishOperateManager.stanardToShotMessagePanel().addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onShotRemoved,this),DisplayTool.removeChildInSafe(this.poolsDescriptPanel)),DisplayTool.removeChildInSafe(Arrester.vividManager.vividBar),Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.title=r>=0?Arrester.getLang(LanguageKeyJar.COST_TO_OPEN_ALLOW_TITLE):Arrester.getLang(LanguageKeyJar.COST_TO_OPEN_NOT_ALLOW_TITLE),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=r>=0?Arrester.getLang(LanguageKeyJar.COST_TO_OPEN_ALLOW):Arrester.getLang(LanguageKeyJar.COST_TO_OPEN_NOT_ALLOW)},t.prototype.onShotRemoved=function(e){Arrester.fishOperateManager.shotMessagePanel.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onShotRemoved,this),this.onOKButtonTouchBegin()},t.prototype.onRemovedAnswer=function(e){Arrester.fishOperateManager.answerTwoPanel.yesButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesTap,this),Arrester.fishOperateManager.answerTwoPanel.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedAnswer,this)},t.prototype.onRuning=function(e){this.poolsTent.poolPathView.playeRunning(Arrester.roleManager.player)},t.prototype.onRunComplete=function(e){this.poolsTent.removeEventListener(egret.Event.ENTER_FRAME,this.onRuning,this),Arrester.roleManager.player.currentData.level_id=this.selectedLevelData.id,"0"==this.selectedLevelData.id?"item"==this.selectedLevelData.data?Arrester.nouManager.gotoItemTent():Arrester.nouManager.gotoMySpaceTent():"-2"==this.selectedLevelData.id?Arrester.nouManager.gotoShopTent():"-3"==this.selectedLevelData.id?Arrester.nouManager.gotoQuoteTent():(Arrester.levelManager.standardToLevelTent(),Arrester.levelManager.loadAndGotoLevel(this.selectedLevelData)),DisplayTool.removeChildInSafe(this.poolsTent),Arrester.uiLogicManager.removeRunButtons(),this.poolsTent.touchEnabled=!0,this.poolsTent.touchChildren=!0,this.poolsTent.touchThrough=!0},Object.defineProperty(t.prototype,"shopLevelData",{get:function(){return this._shopLevelData||(this._shopLevelData=new LevelData,Arrester.evaluateInObject(Arrester.findMarines({id:"-2"},Arrester.gameData.levels)[0],this._shopLevelData)),this._shopLevelData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemLevelData",{get:function(){return this._itemLevelData||(this._itemLevelData=new LevelData,Arrester.evaluateInObject(Arrester.findMarines({id:"0"},Arrester.gameData.levels)[0],this._itemLevelData),this._itemLevelData.data="item"),this._itemLevelData},enumerable:!0,configurable:!0}),t.prototype.runToShop=function(){Arrester.nouManager.gotoPoolsTent(),this.selectedLevelData=this.shopLevelData,this.onOKButtonTouchBegin()},t.prototype.runToItem=function(){Arrester.nouManager.gotoPoolsTent(),this.selectedLevelData=this.itemLevelData,this.onOKButtonTouchBegin()},Object.defineProperty(t.prototype,"lakeData",{get:function(){return this._lakeData||(this._lakeData=new LevelData,Arrester.evaluateInObject(Arrester.findMarines({id:"-1"},Arrester.gameData.levels)[0],this._lakeData)),this._lakeData},enumerable:!0,configurable:!0}),t.prototype.runToLake=function(){Arrester.nouManager.gotoPoolsTent(),this.selectedLevelData=this.lakeData,this.onOKButtonTouchBegin()},t.prototype.checkLakeIsOpen=function(){var e=Arrester.roleManager.player;return e.currentData.lake?!0:(Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.getLang(LanguageKeyJar.LAKE_CLOSE),!1)},t}(BasicManager);__reflect(PoolsTentManager.prototype,"PoolsTentManager");var QuoteManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.initPriceObject()},t.prototype.initPriceObject=function(){var e=this;this.priceKeys=[],t.qualities=[t.HIGH,t.MEDIUM,t.LOW],t.trends=[t.FALL,t.STABLE,t.RISE],this.priceObject={},SignJar.fishes.forEach(function(r){t.qualities.forEach(function(t){var n=Arrester.makePriceKey(r,t);e.priceKeys.push(n);var a=Arrester.gameData.quote[n].price;e.priceObject[n]={key:n,name:r+"_name",sign:r,quality:t,prices:[{time:0,price:a}],max:a,min:a,last:a,lineColor:Arrester.gameData.quote[n].line_color}})})},t.prototype.getFishPrice=function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r=null);var n=e?e:Arrester.makePriceKey(t,r);return this.priceObject[n].last},t.prototype.start=function(){if(!this.timer){var e=Arrester.gameData.delay.price_delay?1e3*Arrester.gameData.delay.price_delay:12e4;this.timer=new egret.Timer(e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)}this.timer.start()},t.prototype.onTimer=function(e){var r=new Date;for(var n in this.priceObject){var a=this.priceObject[n],i=a.last,o=(a.maxPrice,this.inVisibleHand(i,n)),s=r.toDateString();if(a.prices.push({price:o,time:s}),o>a.max&&(a.max=o),o<a.min&&(a.min=o),a.prices.length>20){var h=a.prices.shift();h.price>=a.max&&(a.max=ImpressTool.max("price",a.prices)),h.price<=a.min&&(a.min=ImpressTool.min("price",a.prices))}a.last=o}this.dispatchEvent(new egret.Event(t.QUOTE_UPDATE)),this.updateQuoteView()},t.prototype.inVisibleHand=function(e,r,n,a){void 0===n&&(n=""),void 0===a&&(a="");var i=r?r:Arrester.makePriceKey(n,a),o=0,s=Arrester.gameData.quote[i];if(s.is_evil)return o=Number(s.evil_price);var h=Math.random(),l=this.getRegionIndex(h,s.fall_figue,s.rise_figue),u=t.trends[l],c=s[u+"_max_figue"],p=s[u+"_min_figue"],g=Arrester.rangeRandom(p,c);return o=Math.min(Math.ceil(e*g),s.max_price)},t.prototype.getRegionIndex=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=0;t.push(1);for(var a=0;a<t.length;a++){var i=Number(t[a]);if(i>=e){n=a;break}}return n},t.prototype.showQuoteTent=function(){this.standardToQuoteTent(),Arrester.stage.addChild(this.quoteTent),this.updateLanguage(),this.updateQuoteView(!0),Arrester.vividManager.showVividBar()},t.prototype.standardToQuoteTent=function(){return this.quoteTent?this.quoteTent:(this.quoteTent=new QuoteTent,this.quoteTent.quotePanel.quoteTabBar.dataProvider=Arrester.changeToArrayCollection(SignJar.fishes),this.quoteTent.quotePanel.quoteTabBar.selectedIndex=0,this.quoteTent.quotePanel.quoteTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onGroupTap,this),this.quoteTent.quotePanel.poolsButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPoolsTap,this),this.quoteTent.quotePanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.quoteTent.quotePanel.trendButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrendTap,this),this.quoteTent.quotePanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.quoteTent)},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onPoolsTap=function(e){Arrester.nouManager.gotoPoolsTent()},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onTrendTap=function(e){this.showTrendPanel()},t.prototype.onGroupTap=function(e){this.updatePriceInGroup(e.item)},t.prototype.updatePriceInGroup=function(e){void 0===e&&(e=null);var t=e;if(!t){var r=this.quoteTent.quotePanel.quoteTabBar.selectedItem;t=r?r:SignJar.fishes[0]}var n=this.getPriceDatasBySign(t);this.quoteTent.quotePanel.quoteDataGroup.dataProvider=Arrester.changeToArrayCollection(n)},t.prototype.getPriceDatasBySign=function(e){var r=this,n=[];return t.qualities.forEach(function(t){var a=Arrester.makePriceKey(e,t),i=r.priceObject[a];n.push(i)}),n},t.prototype.updateQuoteView=function(e){void 0===e&&(e=!1),(e||this.quoteTent&&this.quoteTent.stage)&&(this.updatePriceInGroup(),this.trendPanel&&this.trendPanel.stage&&this.trendPanel.quoteChart.updateQuote())},t.prototype.showTrendPanel=function(){this.standardToTrendPanel(),this.trendPanel.title=Arrester.getLang(LanguageKeyJar.TREND_BUTTON)+Arrester.getLang(LanguageKeyJar.TREND_DESCRIPT),this.trendPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),Arrester.uiLogicManager.addWing(this.trendPanel),setTimeout(function(){Arrester.quoteManager.trendPanel.quoteChart.updateQuote()},100)},t.prototype.standardToTrendPanel=function(){return this.trendPanel?this.trendPanel:(this.trendPanel=new TrendPanel,this.trendPanel.quoteChart.priceObject=this.priceObject,this.trendPanel.quoteChart.chartTabBar.itemRenderer=ItemTabBarItemRenderer,this.trendPanel.quoteChart.chartTabBar.dataProvider=Arrester.changeToArrayCollection(SignJar.fishes),this.trendPanel)},t.prototype.updateLanguage=function(){this.quoteTent&&(this.quoteTent.quotePanel.title=Arrester.getLang(LanguageKeyJar.QUOTE_TITLE)+Arrester.getLang(LanguageKeyJar.QUOTE_DESCRIPT),this.quoteTent.quotePanel.trendButton.label=Arrester.getLang(LanguageKeyJar.TREND_BUTTON),this.quoteTent.quotePanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_TITLE),this.quoteTent.quotePanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE))},t.HIGH="high",t.MEDIUM="medium",t.LOW="low",t.RISE="rise",t.STABLE="stable",t.FALL="fall",t.QUOTE_UPDATE="quote update",t}(BasicManager);__reflect(QuoteManager.prototype,"QuoteManager");var RoleManager=function(){function e(){this.fishes=[],this._fortunes=[]}return e.prototype.standardToFishes=function(){return this.fishes},e.prototype.standardToHook=function(){return this.hook?this.hook:(this.hook=new HookObject,this.hook.proxy=new HookProxy,this.hook.proxy.view=new HookRole,this.hook.action=ActionJar.HOOK_STAND_BY,Arrester.roleManager.buildBaitToHook(),this.hook)},e.prototype.buildFishes=function(e){this.fishes=this.getRolesByDatas(this._fortunes,e,this.addForFishProxy,this.addFishFun)},e.prototype.addForFishProxy=function(e){if(e.proxy);else{e.proxy=new PumpProxy;var t=new FishRole;e.proxy.view=t,Arrester.mapManager.map.addToFront(t)}},e.prototype.addFishFun=function(e,t){var r=new Date,n="wild"==e.currentData.place;e.currentData.id=n?"id_fish_"+r.toString():e.currentData.id,n&&t instanceof FishData||ImpressTool.replaceFromArray(t,e.currentData,Arrester.roleManager.player.currentData.items),e.referVelocity=VelocityTool.randomVelocity,e.position.x=Arrester.rangeRandom(Arrester.limitLeft,Arrester.limitRight),e.position.y=Arrester.rangeRandom(Arrester.limitTop,Arrester.limitBottom),e.action=ActionJar.AUTO_MOVE,e.perCounter.addCountKey(ActionJar.AUTO_MOVE,e.currentData.autoMoveTime),e.perCounter.addCountKey(ActionJar.POPO_UP,e.currentData.popoTime),e.perCounter.addCountKey(AllKeyJar.TALK,e.currentData.talkTime)},e.prototype.getRolesByDatas=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);for(var a=[],i=e,o=t.length,s=0;o>s;s++){var h=t[s],l=Arrester.roleManager.getAFishRole(h,r,n);i.unshift(l),a.push(l)}return a},e.prototype.getAFishRole=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=null);var n;return e.fishObject?n=e.fishObject:(n=new FishObject,n.sourceData=e.place&&"wild"!=e.place?e:Arrester.gameData.role[e.sign]),null!=t&&t(n,e),null!=r&&r(n,e),n},Object.defineProperty(e.prototype,"fortunes",{get:function(){return this._fortunes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelData",{get:function(){return this._levelData},set:function(e){this._levelData=e,this.buildFishes(this._levelData.fishes)},enumerable:!0,configurable:!0}),e.prototype.standardToPlayer=function(){return this.player?this.player:(this.player=new PlayerObject,this.player.sourceData=Arrester.gameData.role.player,this.player.currentData.level_id="0",this.player.hook=Arrester.roleManager.standardToHook(),this.player.paw=Arrester.roleManager.buildPaw(),this.player)},e.prototype.buildBaitToHook=function(){if(this.player.currentData.bait){var e=new BaitData;Arrester.evaluateInObject(this.player.currentData.bait,e),this.player.currentData.bait=e,this.player.hook.baitData=e}},e.prototype.buildPaw=function(){var e=new PawObject;return e},e.prototype.makePopo=function(e){void 0===e&&(e=!1);var t=new BehaviorObject;t.proxy=new PopoProxy;var r=Arrester.gameData.role.popo,n=Math.floor(Math.random()*r.skins.length),a=r.skins[n];t.sourceData={skin:a};var i=new FishRole;i.playTimes=1,t.proxy.view=i;var o=e?Arrester.rangeRandom(r.fast_min_speed,r.fast_max_speed):Arrester.rangeRandom(r.slow_min_speed,r.slow_max_speed);return t.velocity=new FVector2D(0,-1*o),t.action=ActionJar.POPO_UP,t},e.prototype.makeLabelPopo=function(e,t){void 0===t&&(t=0);var r=new BehaviorObject;r.proxy=new PopoProxy;var n=new eui.Label(e);n.textColor=t,n.size=12;var a=new BehaviourRole;a.addChild(n),r.proxy.view=a;var i=Arrester.gameData.role.popo;return r.velocity=new FVector2D(0,-1*i.slow_min_speed),r.action=ActionJar.POPO_THIN,r},e}();__reflect(RoleManager.prototype,"RoleManager");var ShopManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToShopTent=function(){return this.shopTent?this.shopTent:(this.shopTent=new ShopTent,this.shopTent.shopPanel.shopTabBar.dataProvider=Arrester.changeToArrayCollection(AllKeyJar.shopNavis),this.initListeners(),this.shopTent)},t.prototype.setInShopTent=function(){this.onTabTap()},t.prototype.initListeners=function(){this.shopTent.shopPanel.shopTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabTap,this),this.shopTent.shopPanel.shopList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onListTap,this),this.shopTent.shopPanel.poolsButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackTap,this),this.shopTent.shopPanel.myItemButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onItemTap,this),this.shopTent.shopPanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.shopTent.shopPanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this)},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onBackTap=function(e){Arrester.nouManager.gotoPoolsTent(),DisplayTool.removeChildInSafe(this.shopTent)},t.prototype.onItemTap=function(e){Arrester.poolsTentManager.runToItem()},t.prototype.onTabTap=function(e){void 0===e&&(e=null),this.shopTent.shopPanel.shopListDatas=null==e||"all"==e.item?Arrester.gameData.shop.cargos:Arrester.findMarines({sign:e.item},Arrester.gameData.shop.cargos)},t.prototype.onListTap=function(e){this.currentItemData=e.item,this.currentItemData.sign==AllKeyJar.DARKNESS&&(this.currentItemData.price=this.currentItemData.hookPrice(Arrester.roleManager.player.currentData.balance)),this.standardToShopShowPanel();var t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_NAME),Arrester.getLang(this.currentItemData.name),LanguageKeyJar.MACRO_SHARP),r=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_DESCRIPT),Arrester.getLang(this.currentItemData.description),LanguageKeyJar.MACRO_SHARP),n=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),this.currentItemData.price,LanguageKeyJar.MACRO_SHARP),a=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.ITEM_PRICE),n,LanguageKeyJar.MACRO_SHARP);this.shopShowPanel.updateText(t,r,a),this.showShopShowPanel()},t.prototype.showShopTent=function(){this.standardToShopTent(),this.updateLanguage(),Arrester.stage.addChild(this.shopTent),Arrester.vividManager.showVividBar(),this.setInShopTent()},t.prototype.showShopShowPanel=function(){this.standardToShopShowPanel(),this.shopShowPanel.title=Arrester.getLang(LanguageKeyJar.DESCRIPT_TITLE),this.shopShowPanel.buyButton.label=Arrester.getLang(LanguageKeyJar.BUY_BUTTON),this.shopShowPanel.notBuyButton.label=Arrester.getLang(LanguageKeyJar.NOT_BUY_BUTTON),Arrester.uiLogicManager.addWing(this.shopShowPanel)},t.prototype.standardToShopShowPanel=function(){return this.shopShowPanel?this.shopShowPanel:(this.shopShowPanel=new ShopShowPanel,this.shopShowPanel.buyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyTap,this),this.shopShowPanel)},t.prototype.onBuyTap=function(e){var t=this.buyItem(this.currentItemData,1);Arrester.fishOperateManager.showShotMeesagePanel(),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.replaceInMarco(Arrester.getLang(t.isOK?LanguageKeyJar.BUY_OK:LanguageKeyJar.BUY_NOT_OK),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),Arrester.vividManager.vividBar&&Arrester.vividManager.vividBar&&Arrester.vividManager.updateVividBar()},t.prototype.buyItem=function(e,t){var r={isOK:!1},n=Arrester.roleManager.standardToPlayer();if(e.sign==AllKeyJar.DARKNESS){var a=n.currentData.dodges,i=a&&a.length>0;if(i)return r}var o=e.price*t;if(n.currentData.balance>=o){r.isOK=!0,n.currentData.balance-=o;var s=e;n.currentData.items.push(s)}return r},t.prototype.updateLanguage=function(){this.shopTent&&(this.shopTent.shopPanel.title=Arrester.getLang(LanguageKeyJar.SHOP_NAME)+Arrester.getLang(LanguageKeyJar.SHOP_TEXT),this.shopTent.shopPanel.myItemButton.label=Arrester.getLang(LanguageKeyJar.ITEMS_TITLE),this.shopTent.shopPanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_TITLE),this.shopTent.shopPanel.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE))},t}(BasicManager);__reflect(ShopManager.prototype,"ShopManager");var StartManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToStartTent=function(){return this.startTent?this.startTent:(this.startTent=new StartTent,this.startTent.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.startTent.startPanel.startButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStartTap,this),this.startTent.startPanel.helpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHelpTap,this),this.startTent.startPanel.clarifyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClarifyTap,this),this.startTent)},t.prototype.onStartTap=function(e){Arrester.nouManager.gotoVividTent(),DisplayTool.removeChildInSafe(this.startTent),Arrester.soundManager.play(SoundJar.GMAE_START)},t.prototype.onHelpTap=function(e){Arrester.helpManager.showHelpPanel()},t.prototype.onClarifyTap=function(e){this.standardToClarifyPanel(),this.clarifyPanel.title=Arrester.getLang(LanguageKeyJar.CLARIFY_BUTTON),this.clarifyPanel.closeButton.label=Arrester.getLang(LanguageKeyJar.CLOSE_BUTTON),this.clarifyPanel.messageLabel.text=Arrester.languageManager.getClarifyText(),this.showClarifyPanel()},t.prototype.onRemove=function(e){this.clear()},t.prototype.showStartTent=function(){this.standardToStartTent(),this.setInStartTent(),this.updateLanguage(),Arrester.stage.addChild(this.startTent),this.startTent.startPanel.tweemLogo()},t.prototype.setInStartTent=function(){var e=Math.floor(Arrester.rangeRandom(0,Arrester.gameData.role.fishes.length)),t=Arrester.gameData.role.fishes[e];this.fishArmature=Arrester.fireDragonManager.fishFactory.buildArmature(t),this.startTent.startPanel.fishContainer.addChild(this.fishArmature.display),dragonBones.WorldClock.clock.add(this.fishArmature),this.fishArmature.animation.gotoAndPlay("auto_move",-1,-1,-1),this.tickOn()},t.prototype.tickOn=function(){this.startTent.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.onEnterFrame=function(e){dragonBones.WorldClock.clock.advanceTime(.024)},t.prototype.tickOff=function(){this.startTent.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.clear=function(){this.tickOff(),dragonBones.WorldClock.clock.remove(this.fishArmature),this.fishArmature.dispose()},t.prototype.updateLanguage=function(){this.startTent&&(this.startTent.startPanel.gameLabel.text=Arrester.getLang(LanguageKeyJar.GAME_NAME),this.startTent.startPanel.startButton.label=Arrester.getLang(LanguageKeyJar.START_BUTTON),this.startTent.startPanel.helpButton.label=Arrester.getLang(LanguageKeyJar.HELP_BUTTON),this.startTent.startPanel.clarifyButton.label=Arrester.getLang(LanguageKeyJar.CLARIFY_BUTTON))},t.prototype.standardToClarifyPanel=function(){return this.clarifyPanel?this.clarifyPanel:(this.clarifyPanel=new ClarifyPanel,this.clarifyPanel.horizontalCenter=0,this.clarifyPanel.verticalCenter=0,this.clarifyPanel)},t.prototype.showClarifyPanel=function(){this.standardToClarifyPanel(),Arrester.uiLogicManager.addWing(this.clarifyPanel)},t}(BasicManager);__reflect(StartManager.prototype,"StartManager");var TradeManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.showTradePanel=function(){this.standardToTradePanel(),Arrester.uiLogicManager.addWing(this.tradePanel)},t.prototype.standardToTradePanel=function(){return this.tradePanel?this.tradePanel:(this.tradePanel=new TradePanel,this.tradePanel.title=Arrester.getLang(LanguageKeyJar.FISH_SHOW_TITLE),this.tradePanel.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSellTap,this),Arrester.quoteManager.addEventListener(QuoteManager.QUOTE_UPDATE,this.onQuoteUpdate,this),Arrester.breedManager.addEventListener(BreedManager.BREED_UPDATE,this.onBreedUpdate,this),this.tradePanel.addEventListener(TradePanel.CURRENT_DATA_CHANGE,this.onDataChanged,this),this.tradePanel)},t.prototype.onBreedUpdate=function(e){if(this.tradePanel||this.tradePanel.stage){var t=Arrester.roleManager.player,r=Arrester.itemManager.assembleInSign(t.currentData.items,[this.tradePanel.currentData.sign]);r=Arrester.findMarines({quality:this.tradePanel.currentData.quality},r),r&&r.length>0?(this.tradePanel.currentData.count=r.length.toString(),this.tradePanel.currentData.datas=r):(this.tradePanel.currentData.count="0",this.tradePanel.currentData.datas=[])}},t.prototype.onDataChanged=function(e){this.updateTradeText()},t.prototype.onQuoteUpdate=function(e){this.tradePanel.stage&&this.updateTradeText()},t.prototype.updateTradeText=function(){this.tradePanel.fishSellInfo.descriptionLabel.text=Arrester.getLang(this.tradePanel.currentData.description),this.tradePanel.fishSellInfo.qualityLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),Arrester.getLang(LanguageKeyJar.getFishQuality(this.tradePanel.currentData.quality)),LanguageKeyJar.MACRO_SHARP),this.tradePanel.fishSellInfo.fishLabel.text=Arrester.getLang(this.tradePanel.currentData.name);var e=Arrester.quoteManager.getFishPrice(null,this.tradePanel.currentData.sign,this.tradePanel.currentData.quality).toString();
this.tradePanel.fishSellInfo.priceLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.PRICE),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),this.tradePanel.fishSellInfo.fishThumb.source=this.tradePanel.currentData.thumb_url,this.tradePanel.sellButton.label=Arrester.getLang(LanguageKeyJar.SELL),this.tradePanel.cancelSellButton.label=Arrester.getLang(LanguageKeyJar.NOT_SELL),this.tradePanel.allButton.label=Arrester.getLang(LanguageKeyJar.ALL_FISH),this.tradePanel.haveFishLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.HAVE_FISH),this.tradePanel.currentData.count,LanguageKeyJar.MACRO_SHARP),this.updateInCome()},t.prototype.updateInCome=function(){var e=Arrester.quoteManager.getFishPrice(null,this.tradePanel.currentData.sign,this.tradePanel.currentData.quality),t=Number(this.tradePanel.countInput.text),r=t*e,n=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DUMMY_FISH_COUNT),t.toString(),LanguageKeyJar.MACRO_SHARP),a=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DUMMY_FISH_INCOME),r.toString(),LanguageKeyJar.MACRO_SHARP);this.tradePanel.incomeLabel.text=n+a},t.prototype.onSellTap=function(e){var t=Number(this.tradePanel.countInput.text),r=this.tradePanel.currentData.key,n=this.tradePanel.currentData.sign,a=this.tradePanel.currentData.quality;this.sellFishWithMessage(n,a,r,t,"all")},t.prototype.sellFishWithMessage=function(e,r,n,a,i,o){void 0===o&&(o=null);var s=this.sellFishes(e,r,n,a,"all",o);Arrester.fishOperateManager.stanardToShotMessagePanel();var h=Arrester.roleManager.player;return s.isOK?(Arrester.fishOperateManager.shotMessagePanel.title=Arrester.replaceInMarco(Arrester.getLang(h.currentData.isInQuote?LanguageKeyJar.TRADE_TEXT:LanguageKeyJar.DEAL_TITLE),Arrester.getLang(h.currentData.isInQuote?LanguageKeyJar.TRADER:LanguageKeyJar.BUSINESSMAN),LanguageKeyJar.MACRO_SHARP),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=this.dealFinalMessage(s),this.dispatchEvent(new egret.Event(t.SELL_FISH_SUCCESS)),Arrester.fishOperateManager.showShotMeesagePanel(60)):(Arrester.fishOperateManager.shotMessagePanel.title=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DEAL_FAIL_TITLE),Arrester.getLang(h.currentData.isInQuote?LanguageKeyJar.TRADER:LanguageKeyJar.BUSINESSMAN),LanguageKeyJar.MACRO_SHARP),Arrester.fishOperateManager.shotMessagePanel.messageLabel.text=Arrester.getLang(LanguageKeyJar.DEAL_FAIL_TEXT),Arrester.fishOperateManager.showShotMeesagePanel()),s},t.prototype.dealFinalMessage=function(e){var t=Arrester.getLang(e.name),r=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),Arrester.getLang(LanguageKeyJar.getFishQuality(e.quality)),LanguageKeyJar.MACRO_SHARP),n=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e.price,LanguageKeyJar.MACRO_SHARP),a=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.PRICE),n,LanguageKeyJar.MACRO_SHARP),i=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FISH_COUNT),e.count,LanguageKeyJar.MACRO_SHARP),o=t+" "+r+" "+a+" "+i,s=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.SELLED_FISH_TEXT),o,LanguageKeyJar.MACRO_SHARP),h=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.INCOME_TEXT),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e.income,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),l=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POUNDAGE_TEXT),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e.poundage,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),u=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POUNDAGE_RATE_TEXT),Arrester.gameData.shop.poundage_rate.toString(),LanguageKeyJar.MACRO_SHARP),c=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.POUNDAGE_LIMIT_TEXT),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),Arrester.gameData.shop.poundage.toString(),LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),p=h+" "+l+" "+u+" "+c,g=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.TRUE_INCOME_TEXT),Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e.balance,LanguageKeyJar.MACRO_SHARP),LanguageKeyJar.MACRO_SHARP),d=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.DEAL_ASSESS),Arrester.roleManager.player.currentData.name,LanguageKeyJar.MACRO_SHARP),T=s+"\n"+p+"\n\n"+g+"\n\n"+d;return T},t.prototype.sellFishes=function(e,t,r,n,a,i){void 0===i&&(i=null);var o={isOK:!1,sign:e,quality:t,count:n.toString(),price:"",income:"",balance:"",poundage:"",name:""},s=Arrester.roleManager.standardToPlayer(),h=i?{sign:e,quality:t,id:i}:{sign:e,quality:t},l=s.currentData.findFishesInHand(h),u=s.currentData.findFishesInBox(h),c=s.currentData.findFishesInLake(h),p=l?l.length:0,g=u?u.length:0,d=c?c.length:0,T=p+g+d;if(0==n||n>T)return o;r=r||Arrester.makePriceKey(e,t);var f=Arrester.quoteManager.getFishPrice(r),y=n*f,_=s.currentData.isInQuote?0:Math.max(y*Arrester.gameData.shop.poundage_rate,Arrester.gameData.shop.poundage),A=y-_;s.currentData.balance+=A;for(var v,m=0;n>m;m++){var L=l.length>0?l.pop():u.length>0?u.pop():c.pop();v=L.name,ImpressTool.removeFromArray(L,s.currentData.items)}return o={isOK:!0,sign:e,quality:t,count:n.toString(),price:f.toString(),income:y.toString(),poundage:_.toString(),balance:A.toString(),name:v}},t.SELL_FISH_SUCCESS="sell fish success",t}(egret.EventDispatcher);__reflect(TradeManager.prototype,"TradeManager");var UIButtonManager=function(){function e(){this.isExChange=!1,this.buttonEXML="resource/eui_skins/ButtonSkin.exml"}return e.prototype.strandToButtons=function(){var e=this;AllKeyJar.buttons.forEach(function(t){var r=t+"Button";e[r]=e.buildButtons(t)}),this.buildLangaugeButton()},e.prototype.buildButtons=function(e,t){void 0===t&&(t="");var r=new eui.Button;return r.label=Arrester.getLang(e,t),r.skinName=this.buttonEXML,r},e.prototype.buildLangaugeButton=function(){Arrester.languageManager.languageButton=this.buildButtons("LLL")},e.prototype.standardToRunPart=function(){if(this.runPart)return this.runPart;this.runPart=new RunPart;var e=150;return this.timer=new egret.Timer(e),this.runPart.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.runPart.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.runPart},e.prototype.onAdded=function(e){this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.start()},e.prototype.onRemoved=function(e){this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer.stop()},e.prototype.onTimer=function(e){this.isExChange=!this.isExChange,this.runPart.leftButton.label=this.isExChange?AllKeyJar.DOWN_ALLOW:AllKeyJar.UP_ALLOW,this.runPart.rightButton.label=this.isExChange?AllKeyJar.UP_ALLOW:AllKeyJar.DOWN_ALLOW},e.prototype.showRunPart=function(){this.standardToRunPart(),this.runPart.left=0,this.runPart.right=0,Arrester.uiLogicManager.addWing(this.runPart),Arrester.soundManager.play(SoundJar.RUN_PART,!1,!0)},e}();__reflect(UIButtonManager.prototype,"UIButtonManager");var UITentManager=function(){function e(){}return e}();__reflect(UITentManager.prototype,"UITentManager");var VividManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.standardToVividTent=function(){return this.vividTent?this.vividTent:(this.vividTent=new VividTent,this.vividTent.vividPanel.vividList.itemRendererSkinName="resource/eui_skins/VividListItemRendererSkin.exml",this.vividTent.vividPanel.vividList.dataProvider=Arrester.changeToArrayCollection(Arrester.gameData.vivid.thumbs),this.vividTent.vividPanel.vividList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onVividItemTap,this),this.vividTent.vividPanel.nickInput.addEventListener(eui.UIEvent.FOCUS_OUT,this.onNickInputFoucsOut,this),this.vividTent.vividPanel.randomNickNameButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRandomTap,this),this.vividTent.vividPanel.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOKTap,this),this.vividTent.vividPanel.languageButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLanguageTap,this),this.vividTent)},t.prototype.onLanguageTap=function(e){Arrester.languageManager.showLanguagePanel()},t.prototype.onOKTap=function(e){this.showVividBar(),Arrester.fishOperateManager.showAnswerTwoPanel(),Arrester.fishOperateManager.answerTwoPanel.quizLabel.text=Arrester.getLang(LanguageKeyJar.ASK_NICK_COMPLETE),Arrester.fishOperateManager.answerTwoPanel.yesButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesAnswer,this),Arrester.fishOperateManager.answerTwoPanel.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoAnswer,this),Arrester.fishOperateManager.answerTwoPanel.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedAnswer,this)},t.prototype.onRemovedAnswer=function(e){Arrester.fishOperateManager.answerTwoPanel.yesButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesAnswer,this),Arrester.fishOperateManager.answerTwoPanel.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onNoAnswer,this),Arrester.fishOperateManager.answerTwoPanel.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedAnswer,this)},t.prototype.onYesAnswer=function(e){Arrester.nouManager.gotoMySpaceTent(),DisplayTool.removeChildInSafe(this.vividTent)},t.prototype.onNoAnswer=function(e){this.removeVividBar()},t.prototype.onRandomTap=function(e){void 0===e&&(e=null),Arrester.roleManager.player.currentData.name=Arrester.getLang(LanguageKeyJar.NICK_NAME),this.vividTent.vividPanel.nickInput.text=Arrester.roleManager.player.currentData.name},t.prototype.onNickInputFoucsOut=function(e){Arrester.roleManager.player.currentData.name=this.vividTent.vividPanel.nickInput.text},t.prototype.onVividItemTap=function(e){Arrester.roleManager.player.currentData.vivid=e.item.thumb},t.prototype.showVividTent=function(){this.standardToVividTent(),Arrester.stage.addChild(this.vividTent),this.updateLanguage()},t.prototype.updateLanguage=function(){if(this.vividTent&&this.vividTent.stage){var e=this.vividTent.vividPanel;e.title=Arrester.getLang(LanguageKeyJar.GAME_NAME),e.vividLabel.text=Arrester.getLang(LanguageKeyJar.VIVID_LABEL),e.nickLabel.text=Arrester.getLang(LanguageKeyJar.NICK_LABEL),e.randomNickNameButton.label=Arrester.getLang(LanguageKeyJar.RANDOM_NICK_NAME_BUTTON),e.okButton.label=Arrester.getLang(LanguageKeyJar.OK_BUTTON),e.languageButton.label=Arrester.getLang(LanguageKeyJar.LANGUAGE_CHANGE)}this.updateVividBar()},t.prototype.standardToVividBar=function(){return this.vividBar?this.vividBar:(this.vividBar=new VividBar,Arrester.tradeManager.addEventListener(TradeManager.SELL_FISH_SUCCESS,this.onSellFishSuccess,this),this.initListeners(),this.vividBar)},t.prototype.initListeners=function(){this.vividBar.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.vividBar.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},t.prototype.onAdded=function(e){this.vividBar.stage.addEventListener(egret.Event.RESIZE,this.onReisze,this),this.onReisze(null)},t.prototype.onRemoved=function(e){this.vividBar.stage.removeEventListener(egret.Event.RESIZE,this.onReisze,this)},t.prototype.onReisze=function(e){this.vividBar.stage&&(this.vividBar.width=Arrester.senceWidth,this.vividBar.x=0,this.vividBar.y=Arrester.senceHeight-this.vividBar.height)},t.prototype.showVividBar=function(){this.standardToVividBar(),this.updateVividBar(),Arrester.stage.addChild(this.vividBar)},t.prototype.removeVividBar=function(){DisplayTool.removeChildInSafe(this.vividBar)},t.prototype.updateVividBar=function(){if(this.vividBar){var e=Arrester.roleManager.player;if(!e.currentData.vivid||e.currentData.vivid!=this.vividBar.vividImage.source){if(""==e.currentData.vivid){var t=Math.floor(Arrester.rangeRandom(0,Arrester.gameData.vivid.thumbs.length)),r=Arrester.gameData.vivid.thumbs[t];e.currentData.vivid=r.thumb}this.vividBar.vividImage.source=e.currentData.vivid}e.currentData.name&&e.currentData.name==this.vividBar.nickLabel.text||(e.currentData.name&&""!=e.currentData.name||this.onRandomTap(),this.vividBar.nickLabel.text=e.currentData.name),this.vividBar.scoreLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),e.currentData.balance.toString(),LanguageKeyJar.MACRO_SHARP)}},t.prototype.onSellFishSuccess=function(e){this.updateVividBar()},t}(BasicManager);__reflect(VividManager.prototype,"VividManager");var PerCounter=function(e){function t(){var r=e.call(this)||this;return r.gapObject={},r.frameObject={},r.anlogFrame=0,r.isAnlogUpdate=!1,r.perGap=1,r.keysArray=[],r.updateAnlogEvent=new egret.Event(t.UPDATE_ANLOG),r}return __extends(t,e),t.prototype.setZero=function(){this.anlogFrame=0},t.prototype.updateAnlog=function(e){var t=this;void 0===e&&(e=1),this.keysArray.forEach(function(r){var n=t.gapObject[r],a=t.frameObject[r];a+=e,a>n?t.frameObject[r]=n+1:t.frameObject[r]=a}),this.dispatchEvent(this.updateAnlogEvent),null!=this._updateAnlogHandler&&this._updateAnlogHandler(this)},t.prototype.checkInAnlog=function(e){var t=this.gapObject[e],r=this.frameObject[e];return r>=t?(this.frameObject[e]=0,!0):!1},t.prototype.addCountKey=function(e,t,r){void 0===r&&(r=!0);var n=this.keysArray.indexOf(e);n>=0&&!r||(0>n&&this.keysArray.push(e),this.frameObject[e]=0,this.gapObject[e]=t)},t.prototype.addCountKeyAuto=function(e,t){void 0===t&&(t=5)},t.prototype.removeCountKey=function(e){var t=this.keysArray.indexOf(e);0>t||(this.keysArray.splice(t,1),delete this.frameObject[e],delete this.gapObject[e])},t.prototype.fixByKey=function(e,t,r){void 0===t&&(t=-1),void 0===r&&(r=-1),this.keysArray.indexOf(e)<0||(t>=0&&(this.frameObject[e]=t),r>0&&(this.gapObject[e]=r))},t.prototype.getAnlogFrame=function(e){return this.frameObject[e]},t.prototype.getAnlogPercent=function(e){var t=this.gapObject[e];return 0==t||isNaN(t)?0:this.frameObject[e]/this.gapObject[e]},Object.defineProperty(t.prototype,"getActionTimeGap",{get:function(){return this._getActionTimeGap},set:function(e){this._getActionTimeGap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateAnlogHandler",{get:function(){return this._updateAnlogHandler},set:function(e){this._updateAnlogHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"followObject",{get:function(){return this._followObject},set:function(e){this._followObject=e},enumerable:!0,configurable:!0}),t.UPDATE_ANLOG="update anlog",t}(egret.EventDispatcher);__reflect(PerCounter.prototype,"PerCounter");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadResource()];case 1:return t.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=t.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return r.sent(),[4,this.loadTheme()];case 2:return r.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return r.sent(),this.stage.removeChild(e),[3,5];case 4:return t=r.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,r){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.onLoadEnd=function(e){this.initHookedFish()},t.prototype.createGameScene=function(){Arrester.gameData=RES.getRes("game_json").game,Arrester.loadManager=new LoadManger,Arrester.loadManager.addEventListener(LoadManger.ARRAY_COMPLETE,this.onLoadEnd,this),Arrester.loadManager.loadArray(Arrester.loadManager.parseRES())},t.prototype.initHookedFish=function(){Arrester.stage=this.stage,Arrester.inject(),AllKeyJar.initArrays(),Arrester.nouManager.gameStart()},t.createBitmapByName=function(e){var t=new egret.Bitmap,r=RES.getRes(e);return t.texture=r,t},t.prototype.startAnimation=function(e){var t=this,r=new egret.HtmlTextParser,n=e.map(function(e){return r.parse(e)}),a=this.textfield,i=-1,o=function(){i++,i>=n.length&&(i=0);var e=n[i];a.textFlow=e;var r=egret.Tween.get(a);r.to({alpha:1},200),r.wait(2e3),r.to({alpha:0},200),r.call(o,t)};o()},t.prototype.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var FVector2D=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._x=e,this._y=t}return e.prototype.clone=function(){return new e(this._x,this._y)},e.prototype.zero=function(){return this._x=0,this._y=0,this},e.prototype.isZero=function(){return 0==this._x&&0==this._y},Object.defineProperty(e.prototype,"length",{get:function(){return Math.sqrt(this.lengthSQ)},set:function(e){var t=this.angle;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lengthSQ",{get:function(){return this._x*this._x+this._y*this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return Math.atan2(this._y,this._x)},set:function(e){var t=this.length;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t},enumerable:!0,configurable:!0}),e.prototype.normalize=function(){var e=this.length;return 0==e?(this._x=1,this):(this._x/=e,this._y/=e,this)},e.prototype.truncate=function(e){return this.length=Math.min(e,this.length),this},e.prototype.reverse=function(){return this._x=-this._x,this._y=-this._y,this},Object.defineProperty(e.prototype,"isNormalized",{get:function(){return 1==this.length},enumerable:!0,configurable:!0}),e.prototype.dotProd=function(e){return this._x*e.x+this.y*e.y},e.prototype.crossProd=function(e){return this._x*e.y-this._y*e.x},e.prototype.angleBetween=function(e,t){return e.isNormalized||(e=e.clone().normalize()),t.isNormalized||(t=t.clone().normalize()),Math.acos(e.dotProd(t))},e.prototype.sign=function(e){return this.perp.dotProd(e)<0?-1:1},Object.defineProperty(e.prototype,"perp",{get:function(){return new e(-this.y,this.x)},enumerable:!0,configurable:!0}),e.prototype.dist=function(e){return Math.sqrt(this.distSQ(e))},e.prototype.distSQ=function(e){var t=e.x-this._x,r=e.y-this._y;return t*t+r*r},e.prototype.add=function(t){return new e(this._x+t.x,this._y+t.y)},e.prototype.subtract=function(t){return new e(this._x-t.x,this._y-t.y)},e.prototype.mutliply=function(t){return new e(this._x*t,this._y*t)},e.prototype.divide=function(t){return new e(this._x/t,this._y/t)},e.prototype.isEqual=function(e){return this._x==e.x&&this._y==e.y},e.prototype.toString=function(){return"FV x: "+this._x+"  y: "+this._y},Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(e){this._y=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(e){this._x=e},enumerable:!0,configurable:!0}),e.prototype.checkEqual=function(e,t){return void 0===t&&(t=0),this.isEqual(e)?!0:this.dist(e)<=t},e}();__reflect(FVector2D.prototype,"FVector2D");var FishObject=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.currentData=new FishData,this.currentData.addEventListener(FishData.QUALITY_CHANGE,this.onQualityChange,this)},t.prototype.onQualityChange=function(e){this.proxy.updateView()},t.prototype.actionChange=function(){},t.prototype.addFromSourceData=function(){e.prototype.addFromSourceData.call(this),Arrester.evaluateInObject(this.sourceData,this.currentData),this.currentData.hp=this.sourceData.hp,this.currentData.maxHP=this.sourceData.hp,this.currentData.fishObject=this},t.prototype.moanInHooked=function(){this.velocity=new FVector2D(0,Number(this.currentData.v_strength))},t.prototype.moanOutHooked=function(){this.velocity=VelocityTool.zero,this.steer=VelocityTool.zero},t.prototype.dragSteer=function(){var e=Arrester.rangeRandom(-(Number(this.currentData.h_strength)+Number(this.currentData.a_strength)),Number(this.currentData.h_strength)+Number(this.currentData.a_strength)),t=Number(this.currentData.a_strength);return new FVector2D(e,t)},Object.defineProperty(t.prototype,"booty",{get:function(){return this._booty},set:function(e){this._booty=e},enumerable:!0,configurable:!0}),t.prototype.talk=function(e){var t,r=this.getWord(e);return t=Arrester.getLang(this.currentData.name)+": "+Arrester.getLang(r)},t.prototype.plusHP=function(e){this.currentData.hp+=e,this.dispatchEventWith(BehaviorObject.UPDATE_HP)},t.prototype.getWord=function(e){var t=Arrester.getMatchAction(e)+"Word";return this.currentData[t]?this.currentData[t]:e},Object.defineProperty(t.prototype,"isInLake",{get:function(){return this.currentData.place==AllKeyJar.LAKE},enumerable:!0,configurable:!0}),t}(BehaviorObject);__reflect(FishObject.prototype,"FishObject");var HookObject=function(e){function t(){var t=e.call(this)||this;return t._isInWater=!1,t}return __extends(t,e),t.prototype.addFromSourceData=function(){e.prototype.addFromSourceData.call(this)},t.prototype.actionChange=function(){},Object.defineProperty(t.prototype,"player",{get:function(){return this._player},set:function(e){this._player=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baitData",{get:function(){return this._baitData},set:function(e){this._baitData=e,this.player.currentData.bait=this._baitData,this.player.currentData.bait&&(this.player.currentData.bait.maxHP=this.player.currentData.bait.hp),this.dispatchEvent(new egret.Event(t.BAIT_UPDATE))},enumerable:!0,configurable:!0}),t.prototype.enchantFish=function(){return this.action==ActionJar.HOOK_INCREASE_POWER||this.action==ActionJar.HOOKING||this._baitData.isDead||this.booty?void console.log("enchantFish unable"):void this.dispatchEvent(new egret.Event(t.ENCHANT_FISH))},t.prototype.pullVectory=function(){var e=Arrester.rangeRandom(-this._baitData.xTensile,this._baitData.xTensile),t=Arrester.rangeRandom(this._baitData.power+.5*this._baitData.yTensile,this._baitData.power+this._baitData.yTensile);return new FVector2D(e,t)},t.prototype.plusHP=function(e){this.baitData&&(this.baitData.hp+=e,this.dispatchEventWith(BehaviorObject.UPDATE_HP))},Object.defineProperty(t.prototype,"booty",{get:function(){return this._booty},set:function(e){this._booty=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInWater",{get:function(){return this._isInWater},set:function(e){this._isInWater=e},enumerable:!0,configurable:!0}),t.BAIT_UPDATE="bait update",t.ENCHANT_FISH="enchant fish",t}(BehaviorObject);__reflect(HookObject.prototype,"HookObject");var PawObject=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addFromSourceData=function(){e.prototype.addFromSourceData.call(this)},Object.defineProperty(t.prototype,"player",{get:function(){return this._player},set:function(e){this._player=e},enumerable:!0,configurable:!0}),t.prototype.feedForFish=function(e){void 0===e&&(e=null),this.currentFeed=this.feedData,ImpressTool.removeFromArray(this.feedData,Arrester.roleManager.player.currentData.items),this.feedData=null,Arrester.soundManager.play(SoundJar.FEED,!1,!0),e&&this.dispatchEvent(new egret.Event(t.FEED_FOR_FISH,!1,!1,e))},t.FEED_FOR_FISH="feed for fish",t}(BehaviorObject);__reflect(PawObject.prototype,"PawObject");var PlayerObject=function(e){function t(){var t=e.call(this)||this;return t.currentData=new PlayerData,t}return __extends(t,e),t.prototype.addFromSourceData=function(){e.prototype.addFromSourceData.call(this),Arrester.evaluateInObject(this.sourceData,this.currentData),this.currentData.items=this.sourceData.items||[],this.currentData.fishBoxLimitVolume=this.sourceData.fish_box_limit_volumn,this.sourceData.box&&(this.currentData.box=new BoxData,Arrester.evaluateInObject(this.sourceData.box,this.currentData.box)),this.sourceData.lake&&""!=this.sourceData.lake&&(this.currentData.lake=new LakeData,Arrester.evaluateInObject(this.sourceData.lake,this.currentData.lake),BreedManager.updateLakeStatus(this.currentData.lake,!1))},Object.defineProperty(t.prototype,"hook",{get:function(){return this._hook},set:function(e){this._hook=e,this._hook.player=this},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paw",{get:function(){return this._paw},set:function(e){this._paw=e,this._paw.player=this},enumerable:!0,configurable:!0}),t}(BehaviorObject);__reflect(PlayerObject.prototype,"PlayerObject");var MorraBolton=function(e){function t(){var t=e.call(this)||this;return t.updateFrame=0,t.updateDelay=30,t.winTimes=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){},t.prototype.startMorra=function(){Arrester.stage.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this)},t.prototype.onEnterFrame=function(e){return this.updateFrame++,this.updateFrame>=this.updateDelay?(Arrester.stage.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.updateFrame=0,void this.dispatchEvent(new egret.Event(t.MORRA_RESULT))):void this.dispatchEvent(new egret.Event(t.MORRA_UPDATE))},t.prototype.getFightResult=function(e,r){var n;return e==r?n=t.DRAWM:e==t.PAPER?n=r==t.ROCK?t.WIN:t.LOSE:e==t.SCISSOR?n=r==t.PAPER?t.WIN:t.LOSE:e==t.ROCK?n=r==t.SCISSOR?t.WIN:t.LOSE:console.log("Error -> MorraLevelData#getPlayerMorraResult"),n},t.PAPER="paper",t.SCISSOR="scissor",t.ROCK="rock",t.signs=[t.PAPER,t.SCISSOR,t.ROCK],t.WIN="win",t.DRAWM="drawn",t.LOSE="lose",t.MORRA_RESULT="morra result",t.MORRA_UPDATE="morra update",t}(egret.EventDispatcher);__reflect(MorraBolton.prototype,"MorraBolton");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var HookProxy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this._hookLine=new HookLine,this._topHookLinePosition=new FVector2D(0,-3)},t.prototype.linkModelToView=function(){e.prototype.linkModelToView.call(this),this._model.addEventListener(BehaviorObject.UPDATE_POSITION,this.onUpdatePosition,this),this._model.addEventListener(HookObject.BAIT_UPDATE,this.onBaitUpdate,this),this._model.addEventListener(HookObject.ENCHANT_FISH,this.onEnchantFish,this),this._model.addEventListener(BehaviorObject.UPDATE_HP,this.onUpdateHP,this)},t.prototype.onEnchantFish=function(e){},t.prototype.onUpdatePosition=function(e){this._view.x=this.model.position.x,this._view.y=this.model.position.y,this._view.rotation=this.model.fakeRotation,this.drawHookLine()},t.prototype.drawHookLine=function(){this._hookLine.drawTwoPoints(this._topHookLinePosition,this._model.position)},t.prototype.onBaitUpdate=function(e){this._view&&this._model&&this.hookObject.baitData&&(this.hookRole.baitURL=this.hookObject.baitData.skin,this.baitFilter=new egret.GlowFilter,this.baitFilter.blurX=50,this.baitFilter.blurY=50,this.baitFilter.color=Number(this.hookObject.baitData.color),this.baitFilter.quality=1,this.updateBaitFilters())},t.prototype.onUpdateHP=function(e){this._view&&this._model&&this.updateBaitFilters()},t.prototype.updateBaitFilters=function(){this.baitFilter.alpha=Math.max(.1,this.hookObject.baitData.hpPercent),this.hookRole.filters=[this.baitFilter]},t.prototype.linkViewToModel=function(){e.prototype.linkViewToModel.call(this),!this._view},t.prototype.onViewRemove=function(e){DisplayTool.removeChildInSafe(this._hookLine)},Object.defineProperty(t.prototype,"hookLine",{get:function(){return this._hookLine},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topHookLinePosition",{get:function(){return this._topHookLinePosition},enumerable:!0,configurable:!0}),t.prototype.getFloatVelocity=function(){var e=this.topHookLinePosition.subtract(this.model.position).normalize().mutliply(20);return e.y>=0&&(e.y=-e.y,0==e.y&&(e.y=-20)),e},Object.defineProperty(t.prototype,"hookRole",{get:function(){return this._view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hookObject",{get:function(){return this._model},enumerable:!0,configurable:!0}),t}(BehaviorProxy);__reflect(HookProxy.prototype,"HookProxy");var PopoProxy=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.linkModelToView=function(){e.prototype.linkModelToView.call(this),this._model.addEventListener(BehaviorObject.UPDATE_POSITION,this.onUpdatePosition,this)},t.prototype.onUpdatePosition=function(e){this._view.x=this.model.position.x,this._view.y=this.model.position.y},t}(BehaviorProxy);__reflect(PopoProxy.prototype,"PopoProxy");var PumpProxy=function(e){function t(){var t=e.call(this)||this;return t.tapTime=0,t}return __extends(t,e),t.prototype.inits=function(){e.prototype.inits.call(this),this.highFilter=[new egret.GlowFilter(16737792,.5,6,5)],this.mediumFilter=[new egret.GlowFilter(4758485,.5,5,5)],this.lowFilter=[new egret.DropShadowFilter(3,45,0,.8,4,5)]},t.prototype.linkModelToView=function(){e.prototype.linkModelToView.call(this),this.updateView(),this._model.addEventListener(BehaviorObject.UPDATE_POSITION,this.onUpdatePosition,this),Arrester.roleManager.player.hook.addEventListener(HookObject.ENCHANT_FISH,this.onEnchantFish,this),Arrester.roleManager.player.paw.addEventListener(PawObject.FEED_FOR_FISH,this.onFeedForFish,this),this.fishObject.currentData.addEventListener(FishData.QUALITY_CHANGE,this.onQualityChange,this),this.fishObject.currentData.addEventListener(FishData.EXP_CHANGE,this.onExpChange,this),this.fishObject.perCounter.addEventListener(PerCounter.UPDATE_ANLOG,this.onTalk,this)},t.prototype.linkViewToModel=function(){this.updateView(),this._view.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFishTouchTap,this)},t.prototype.onFishTouchTap=function(e){var t=Arrester.roleManager.player;t.currentData.isInLake&&Arrester.mySpaceManager.showFishShowPanel(this.fishObject.currentData),Arrester.fishOperateManager.addToTalk(this.fishObject,"touch")},t.prototype.onEnchantFish=function(e){return this.fishObject.action==ActionJar.BE_ENCHANTED?void Arrester.behaviorManager.gotoNextInBeEnchant(this.fishObject,!0):void(this.fishObject.action==ActionJar.AUTO_MOVE&&Arrester.behaviorManager.checkBeEnchantFish(this.fishObject,!0)&&(this.tapTime=0,this.fishObject.action=ActionJar.BE_ENCHANTED,this.fishObject.perCounter.addCountKey(ActionJar.BE_ENCHANTED,1e3),this.fishObject.perCounter.addCountKey("enchant_time",this._model.sourceData.enchant_time),Arrester.fishOperateManager.addToTalk(this.fishObject,this.fishObject.action),Arrester.soundManager.play(this.fishObject.currentData.beEnchantedSound,!1,!0)))},t.prototype.onFeedForFish=function(e){(this._view||this._view.stage)&&(this._model.followTarget=new FVector2D(e.data.x,e.data.y),this._model.action=ActionJar.EAT_FEED)},t.prototype.onQualityChange=function(e){if(this._view&&this._view.stage){var t=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.FISH_QUALITY_CHANGE),Arrester.getLang(LanguageKeyJar.getFishQuality(this.fishObject.currentData.quality)),LanguageKeyJar.MACRO_SHARP);
this.makePopoInLevelTent(t,8930304);var r=FishData.QUALITY_CHANGE+" "+this.fishObject.currentData.quality;Arrester.fishOperateManager.addToTalk(this.fishObject,r)}},t.prototype.onExpChange=function(e){if(this._view&&this._view.stage){var t=Arrester.breedManager.currentFishEXP>0?"+1s":"-1s",r=Arrester.breedManager.currentFishEXP>0?2241408:9852439;this.makePopoInLevelTent(t,r);var n=FishData.EXP_CHANGE+" "+(Arrester.breedManager.currentFishEXP>0?"up":"down");Arrester.fishOperateManager.addToTalk(this.fishObject,n)}},t.prototype.makePopoInLevelTent=function(e,t){var r=Arrester.roleManager.makeLabelPopo(e,t);r.position=this.fishObject.position.clone(),Arrester.levelManager.levelTent.addBehaviorObjectToFront(r)},t.prototype.onUpdatePosition=function(e){this._view.x=this.model.position.x,this._view.y=this.model.position.y,this.model.velocity.isZero()||(this.model.action==ActionJar.HOOKED?this._view.rotation=this.model.velocity.clone().reverse().angle/Arrester.AR:this._view.rotation=this.model.velocity.angle/Arrester.AR)},t.prototype.updateView=function(){this._model&&this._view&&this.updateFilter()},Object.defineProperty(t.prototype,"fishObject",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.updateFilter=function(){this.view.filters=this.fishObject.currentData.quality==QuoteManager.MEDIUM?this.mediumFilter:this.fishObject.currentData.quality==QuoteManager.HIGH?this.highFilter:this.lowFilter},t.prototype.onTalk=function(e){if(this.fishObject.perCounter.checkInAnlog(AllKeyJar.TALK)){var t=this.fishObject.action;switch(this.fishObject.action){case ActionJar.AUTO_MOVE:t=this.fishObject.action+(this.fishObject.isInLake?" "+AllKeyJar.LAKE+" "+this.fishObject.currentData.quality:"")}this.fishObject.action!=ActionJar.HOOKED&&(Arrester.fishOperateManager.addToTalk(this.fishObject,t),this.fishObject.perCounter.addCountKey(AllKeyJar.TALK,Arrester.rangeRandom(this.fishObject.currentData.talk_time_min,this.fishObject.currentData.talk_time_max)))}},t}(BehaviorProxy);__reflect(PumpProxy.prototype,"PumpProxy");var BaitData=function(e){function t(){var t=e.call(this)||this;return t.genre="",t.name="",t.id="",t.sign="",t.price=-1,t.description="",t.skin="",t.power=-1,t.lucky=-1,t.lv=-1,t.delicious=-1,t.xTensile=-1,t.yTensile=-1,t.thumb_url="",t.color="",t.maxHP=0,t.hp=0,t._isWet=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isDead",{get:function(){return this.hp<=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hpPercent",{get:function(){return this.hp/this.maxHP},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWet",{get:function(){return this._isWet},set:function(e){this._isWet=e},enumerable:!0,configurable:!0}),t}(egret.HashObject);__reflect(BaitData.prototype,"BaitData");var BoxData=function(e){function t(){var t=e.call(this)||this;return t.genre="",t.name="",t.id="",t.sign="",t.price=-1,t.description="",t.fish_box_volume=-1,t.thumb_url="",t}return __extends(t,e),t}(egret.HashObject);__reflect(BoxData.prototype,"BoxData");var CleanserData=function(e){function t(){var t=e.call(this)||this;return t.genre="",t.name="",t.id="",t.sign="",t.price=0,t.description="",t.skin="",t.cleanliness=0,t.thumb_url="",t}return __extends(t,e),t}(egret.HashObject);__reflect(CleanserData.prototype,"CleanserData");var DodgeData=function(e){function t(){var t=e.call(this)||this;return t.genre="cargos",t.name="dodge_name",t.id="-0-",t.sign=AllKeyJar.DARKNESS,t.price=0,t.description="dodge_description",t.skin="",t.thumb_url="van_jpg",t.inits(),t}return __extends(t,e),t.prototype.inits=function(){},t.prototype.hookPrice=function(e){void 0===e&&(e=0);var t=0,r=Math.random()>.9&&Math.random()>.9;return r?t=Math.floor(e*Arrester.rangeRandom(.5,.8)):0==e?t=1:(t=Math.floor(Arrester.rangeRandom(e+1,100*e)),t=Math.min(1e6,t)),t},t}(egret.HashObject);__reflect(DodgeData.prototype,"DodgeData");var FeedData=function(e){function t(t){void 0===t&&(t=null);var r=e.call(this)||this;return r.genre="",r.name="",r.id="",r.sign="",r.price=-1,r.description="",r.exp=-1,r.skin="",r.thumb_url="",t&&Arrester.evaluateInObject(t,r),r}return __extends(t,e),t}(egret.HashObject);__reflect(FeedData.prototype,"FeedData");var FishData=function(e){function t(){var t=e.call(this)||this;return t.genre="",t.sign="",t.id="",t.name="",t.description="",t.quality="",t.belly=-1,t.behavior="",t.default_behavior="",t.skin="",t.max_speed_value=-1,t.min_speed_value=-1,t.h_strength=-1,t.v_strength=-1,t.a_strength=-1,t.power=-1,t.lucky=-1,t.lv=-1,t.thumb_url="",t.enchant_time=-1,t.escape_value=-1,t.popo_value=-1,t._maxHP=0,t._hp=0,t.place="",t.exp=0,t.highExpLimit=0,t.mediumExpLimit=0,t.lowExpLimit=0,t.autoMoveWord="",t.autoMoveLakeHighWord="",t.autoMoveLakeMediumWord="",t.autoMoveLakeLowWord="",t.beEnchantedWord="",t.eatBaitWord="",t.hookedWord="",t.escapeWord="",t.beFishedWord="",t.aliveWord="",t.eatFeedWord="",t.eatFatWord="",t.expChangeUpWord="",t.expChangeDownWord="",t.qualityChangeLowWord="",t.qualityChangeMediumWord="",t.qualityChangeHighWord="",t.touchWord="",t.freeWord="",t.shutWord="",t.selledWord="",t.talk_time_min=0,t.talk_time_max=0,t.auto_move_time_min=0,t.auto_move_time_max=0,t.popo_time_min=0,t.popo_time_max=0,t.be_enchanted_time_min=0,t.be_enchanted_time_max=0,t.enchant_time_min=0,t.enchant_time_max=0,t.escape_time_min=0,t.escape_time_max=0,t.alive_time_min=0,t.alive_time_max=0,t.eat_fat_time_min=0,t.eat_fat_time_max=0,t.beEnchantedSound="",t.eatBaitSound="",t.hookedSound="",t.escapeSound="",t.beFishedSound="",t.aliveSound="",t.autoMoveSound="",t}return __extends(t,e),Object.defineProperty(t.prototype,"isDead",{get:function(){return this.hp<=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHP",{get:function(){return this._maxHP},set:function(e){this._maxHP=Math.max(0,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hpPercent",{get:function(){return this._hp/this.maxHP},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hp",{get:function(){return this._hp},set:function(e){this._hp=Math.max(0,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnchantInBelly",{get:function(){return(1-this.belly)*Math.random()>Math.random()*this.hpPercent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInLake",{get:function(){return this.place==AllKeyJar.LAKE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"talkTime",{get:function(){return Arrester.rangeRandom(this.talk_time_min,this.talk_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoMoveTime",{get:function(){return Arrester.rangeRandom(this.auto_move_time_min,this.auto_move_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popoTime",{get:function(){return Arrester.rangeRandom(this.popo_time_min,this.popo_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beEnchantedTime",{get:function(){return Arrester.rangeRandom(this.be_enchanted_time_min,this.be_enchanted_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enchantTime",{get:function(){return Arrester.rangeRandom(this.enchant_time_min,this.enchant_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"escapeTime",{get:function(){return Arrester.rangeRandom(this.escape_time_min,this.escape_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"aliveTime",{get:function(){return Arrester.rangeRandom(this.alive_time_min,this.alive_time_max)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eatFatTime",{get:function(){return Arrester.rangeRandom(this.eat_fat_time_min,this.eat_fat_time_max)},enumerable:!0,configurable:!0}),t.prototype.updateQuality=function(e){var r,n=this.quality;return this.quality=e,r=""!=n&&n!=this.quality,r&&this.dispatchEvent(new egret.Event(t.QUALITY_CHANGE)),r},t.prototype.dispatchExpEvent=function(){this.dispatchEvent(new egret.Event(t.EXP_CHANGE))},t.QUALITY_CHANGE="quality change",t.EXP_CHANGE="exp change",t}(egret.EventDispatcher);__reflect(FishData.prototype,"FishData");var LakeData=function(e){function t(){var t=e.call(this)||this;return t.genre="",t.name="",t.id="",t.sign="",t.price=0,t.description="",t.skin="",t.cleanliness=0,t.perEXP=0,t.lowRebate=0,t.mediumRebate=0,t.highRebate=0,t.highCleanLimit=0,t.mediumCleanLimit=0,t.lowCleanLimit=0,t.cleanLoss=0,t}return __extends(t,e),t}(egret.HashObject);__reflect(LakeData.prototype,"LakeData");var LevelData=function(e){function t(){var t=e.call(this)||this;return t.id="",t.name="",t.strand="",t.sign="",t.fishes=[],t.description="",t.cost=0,t.is_open=!1,t.color=0,t.line_color=0,t.px=0,t.py=0,t.moratorium=0,t.currentMoratoriumTime=0,t.strike=0,t.currentStrikeTime=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"isInMoratorium",{get:function(){return this.currentMoratoriumTime>0},enumerable:!0,configurable:!0}),t.prototype.startMoratorium=function(){if(!this.moratoriumTimer){var e=1e3;this.moratoriumTimer=new egret.Timer(e)}this.currentMoratoriumTime=this.moratorium,this.moratoriumTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.moratoriumTimer.start()},t.prototype.stopMoratorium=function(){this.moratoriumTimer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.moratoriumTimer.stop(),this.resetInStrike()},t.prototype.onTimer=function(e){this.currentMoratoriumTime--,this.currentMoratoriumTime<=0&&this.stopMoratorium(),this.dispatchEventWith(t.MORATORIUM_UPDATE)},t.prototype.checkInStrike=function(){return this.currentStrikeTime--,this.currentStrikeTime<=0},t.prototype.resetInStrike=function(){this.currentStrikeTime=this.strike},t.FISHING_SIGN="fishing",t.PLAZA_SIGN="plaza",t.MORATORIUM_UPDATE="moratorium_update",t}(egret.EventDispatcher);__reflect(LevelData.prototype,"LevelData");var PlayerData=function(e){function t(){var t=e.call(this)||this;return t.id="",t.name="",t.description="",t.behavior="",t.default_behavior="",t.skin="",t.power=-1,t.lucky=-1,t.lv=-1,t.level_id="",t.strong=-1,t.strong_limit=-1,t.balance=-1,t.vivid="",t._fishBoxLimitVolume=-1,t._runPower=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){e&&(this._items=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fishBoxVolume",{get:function(){return this._boxData.fish_box_volume},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fishBoxLimitVolume",{get:function(){return this._fishBoxLimitVolume},set:function(e){this._fishBoxLimitVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxFishes",{get:function(){return Arrester.findMarines({place:"box"},this._items)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBoxLimitOver",{get:function(){return this.fishBoxVolume>=this.fishBoxLimitVolume},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lakeFishes",{get:function(){return Arrester.findMarines({place:"lake"},this._items)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dodges",{get:function(){return Arrester.findMarines({sign:AllKeyJar.DARKNESS},this._items)},enumerable:!0,configurable:!0}),t.prototype.chargeToFishData=function(e){return null},t.prototype.addFishToBox=function(e){e.place="box",this._items.push(e)},t.prototype.addFishToLake=function(e){e.place="lake",this._items.push(e)},t.prototype.addFishToHand=function(e){e.place="hand",this._items.push(e)},t.prototype.addFishsFromBoxToLake=function(e){e.place="lake"},t.prototype.addFishsFromLakeToBox=function(e){e.place="box"},t.prototype.findFishesInHand=function(e){return e.place="hand",Arrester.findMarines(e,this._items)},t.prototype.findFishesInBox=function(e){return e.place="box",Arrester.findMarines(e,this._items)},t.prototype.findFishesInLake=function(e){return e.place="lake",Arrester.findMarines(e,this._items)},t.prototype.findFishInTotal=function(e){return Arrester.findMarines(e,this._items)},Object.defineProperty(t.prototype,"isStrongOver",{get:function(){return this.strong>=this.strong_limit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lake",{get:function(){return this._lake},set:function(e){this._lake=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"runPower",{get:function(){return this._runPower},set:function(e){this._runPower=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baits",{get:function(){var e=Arrester.findMarines({sign:"baits"},this._items);return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInLake",{get:function(){return"-1"==this.level_id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isInQuote",{get:function(){return"-3"==this.level_id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"box",{get:function(){return this._boxData},set:function(e){this._boxData=e},enumerable:!0,configurable:!0}),t}(egret.HashObject);__reflect(PlayerData.prototype,"PlayerData");var DisplayTool=function(){function e(){}return e.removeAllChilds=function(e){for(;e.numChildren>0;)e.removeChildAt(e.numChildren-1)},e.removeChildInSafe=function(e){e&&e.parent&&e.parent.removeChild(e)},e}();__reflect(DisplayTool.prototype,"DisplayTool");var ImpressTool=function(){function e(){}return e.removeFromArray=function(e,t){var r=t.indexOf(e);r>-1&&t.splice(r,1)},e.replaceFromArray=function(e,t,r){var n=r.indexOf(e);n>-1&&(r[n]=t)},e.max=function(e,t){var r;return t.forEach(function(t){var n=e?t[e]:t;r?n>r&&(r=n):r=n}),r},e.min=function(e,t){var r;return t.forEach(function(t){var n=e?t:t[e];r?r>n&&(r=n):r=n}),r},e}();__reflect(ImpressTool.prototype,"ImpressTool");var ObjectPool=function(){function e(){}return e}();__reflect(ObjectPool.prototype,"ObjectPool");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.textField.wordWrap=!0,this.textField.multiline=!0,this.addChild(this.textField),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},t.prototype.onAdded=function(e){this.textField.x=.5*(this.stage.stageWidth-this.textField.width),this.textField.y=.5*(this.stage.stageHeight-this.textField.height)},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t,e==t&&(this.textField.text="文件准备中 请稍等\n\nPreparing  Wait A Minute Pls\n\n準備中　少々お待ちください"),this.onAdded(null)},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BaseMap=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.touchEnabled=!0,this.frontContainer=new egret.DisplayObjectContainer,this.backContainer=new eui.UILayer,this.backgroundRect=new SampleRect(Arrester.senceWidth,Arrester.senceHeight,14737632),this.addChild(this.backContainer),this.addChild(this.frontContainer),this.addToBack(this.backgroundRect),this.initListeners()},t.prototype.initListeners=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this)},t.prototype.onAdded=function(e){this.stage.addEventListener(egret.Event.RESIZE,this.onReisze,this),this.onReisze(null)},t.prototype.onRemoved=function(e){this.stage.removeEventListener(egret.Event.RESIZE,this.onReisze,this)},t.prototype.onReisze=function(e){this.backgroundRect.width=Arrester.senceWidth,this.backgroundRect.height=Arrester.senceHeight},t.prototype.addToBack=function(e){this.backContainer.addChild(e)},t.prototype.addToFront=function(e,t){void 0===t&&(t=-1),0>t?this.frontContainer.addChild(e):this.frontContainer.addChildAt(e,t)},Object.defineProperty(t.prototype,"mapKey",{get:function(){return this._mapKey},set:function(e){this._mapKey=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this.backgroundRect.color=this._backgroundColor},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);__reflect(BaseMap.prototype,"BaseMap");var BaseHook=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.touchChildren=!1,this.touchEnabled=!1,this.hookShape=new SampleRect(50,50,16773120),this.addChild(this.hookShape)},t}(egret.DisplayObjectContainer);__reflect(BaseHook.prototype,"BaseHook");var HookLine=function(e){function t(){var t=e.call(this)||this;return t._lineColor=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){},t.prototype.drawTwoPoints=function(e,t){var r=this.graphics;r.clear(),r.lineStyle(1,this._lineColor),r.moveTo(e.x,e.y),r.lineTo(t.x,t.y)},Object.defineProperty(t.prototype,"lineColor",{get:function(){return this._lineColor},set:function(e){this._lineColor=e},enumerable:!0,configurable:!0}),t}(egret.Shape);__reflect(HookLine.prototype,"HookLine");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,r,n){function a(e){t.call(n,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),r.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var FishRole=function(e){function t(){var t=e.call(this)||this;return t.playTimes=-1,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.touchEnabled=!0,this.touchChildren=!1,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveFromStage,this)},t.prototype.updateProxy=function(){this._proxy.model.addEventListener(BehaviorObject.UPDATE_ACTION,this.onUpdateAction,this),this.fishArmature=Arrester.fireDragonManager.fishFactory.buildArmature(this._proxy.model.sourceData.skin),this.addChild(this.fishArmature.display)},t.prototype.onUpdateAnlog=function(e){},t.prototype.onRemoveFromStage=function(e){dragonBones.WorldClock.clock.remove(this.fishArmature)},t.prototype.onAddedToStage=function(e){dragonBones.WorldClock.clock.add(this.fishArmature)},t.prototype.onUpdateAction=function(e){var t=this.fixAction(this._proxy.model.action);t=this.replaceSpace(t),this.fishArmature.animation.animationNames.indexOf(t)>=0&&this.fishArmature.animation.gotoAndPlay(t,-1,-1,this.playTimes)},t.prototype.fixAction=function(e){var t;switch(e){case ActionJar.EAT_FEED:t=ActionJar.ESCAPE;break;case ActionJar.EAT_FAT:t=ActionJar.ALIVE}return t=t||e},t.prototype.replaceSpace=function(e){return e.replace(" ","_")},t}(BehaviourRole);__reflect(FishRole.prototype,"FishRole");var HookRole=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.touchChildren=!1,this.touchEnabled=!1,this.baitImage=new eui.Image,this.addChild(this.baitImage),this.baitImage.addEventListener(egret.Event.COMPLETE,this.onComplete,this)},Object.defineProperty(t.prototype,"baitURL",{get:function(){return this._baitURL},set:function(e){this._baitURL=e,this.baitImage.source=this._baitURL,this.layoutBait()},enumerable:!0,configurable:!0}),t.prototype.onComplete=function(e){this.layoutBait()},t.prototype.layoutBait=function(){this.baitImage.x=.5*-this.baitImage.width,this.baitImage.y=.5*-this.baitImage.height},t.prototype.showBait=function(){this.baitImage.visible=!0},t.prototype.hideBait=function(){this.baitImage.visible=!1},t}(BehaviourRole);__reflect(HookRole.prototype,"HookRole");var RectRole=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.bgRect=new SampleRect(25,25,5675693),this.addChild(this.bgRect),this.bgRect.x=-12.5,this.bgRect.y=-12.5},t}(BehaviourRole);__reflect(RectRole.prototype,"RectRole");var PoolPathView=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.renders=[],this.playerView=new egret.DisplayObjectContainer;var e=Arrester.roleManager.player;this.playerView.addChild(Main.createBitmapByName(e.currentData.vivid))},Object.defineProperty(t.prototype,"datas",{get:function(){return this._datas},set:function(e){this._datas=e,this.makeNodePath()},enumerable:!0,configurable:!0}),t.prototype.setSize=function(e,t){this._realWidth=e,this._realHeight=t,this.makeNodePath(),this.updatePlayerView()},t.prototype.makeNodePath=function(){if(this._datas)for(var e=Math.max(this._datas.length,this.renders.length),t=0;e>t;t++){var r=this._datas[t],n=this.renders[t];n||(n=this.getRender(),n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRenderTap,this),this.renders[t]=n),r?(n.data=r,n.stage||this.addChild(n),n.x=r.px*(this._realWidth-n.width),n.y=r.py*(this._realHeight-n.height)):DisplayTool.removeChildInSafe(n)}},t.prototype.onRenderTap=function(e){this.dispatchEvent(new egret.Event(t.RENDER_TAP,!1,!1,e.target.data))},Object.defineProperty(t.prototype,"realWidth",{get:function(){return this._realWidth},set:function(e){this._realWidth=e,this.setSize(this._realWidth,this._realHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realHeight",{get:function(){return this._realWidth},set:function(e){this._realWidth=e,this.setSize(this._realWidth,this._realHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._realWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._realHeight},enumerable:!0,configurable:!0}),t.prototype.getRender=function(){var e=new PathNodeRenderer;return e},t.prototype.updatePlayerView=function(){var e=Arrester.roleManager.player,t={id:e.currentData.level_id},r=Arrester.findMarines(t,this.renders,"data")[0];r&&(this.playerView.x=r.x+.5*(r.width-this.playerView.width),this.playerView.y=r.y+10,this.addChild(this.playerView))},t.prototype.startForRun=function(e){this.playerPosition=new FVector2D(this.playerView.x,this.playerView.y);var t={id:e},r=Arrester.findMarines(t,this.renders,"data")[0];this.endPosition=new FVector2D(r.x+.5*(r.width-this.playerView.width),r.y+10),this.runSpeed=this.endPosition.subtract(this.playerPosition).normalize()},t.prototype.playeRunning=function(e){var r=e.currentData.strong+e.currentData.runPower,n=this.runSpeed.mutliply(r);this.playerPosition=this.playerPosition.add(n),this.playerView.x=this.playerPosition.x,this.playerView.y=this.playerPosition.y,e.currentData.runPower=Math.max(e.currentData.runPower-.1,0),this.playerPosition.checkEqual(this.endPosition,n.length)&&(this.playerView.x=this.endPosition.x,this.playerView.y=this.endPosition.y,this.dispatchEvent(new egret.Event(t.RUN_COMPLETE)))},t.RENDER_TAP="render trap",t.RUN_COMPLETE="run complete",t}(egret.DisplayObjectContainer);__reflect(PoolPathView.prototype,"PoolPathView");var SampleRect=function(e){function t(t,r,n){void 0===t&&(t=100),void 0===r&&(r=100),void 0===n&&(n=16746496);var a=e.call(this)||this;return a._width=t,a._height=r,a._color=n,a.inits(),a}return __extends(t,e),t.prototype.inits=function(){this.shape=new egret.Shape,this.addChild(this.shape),this.drawShape()},t.prototype.drawShape=function(){if(this.shape){var e=this.shape.graphics;e.clear(),e.beginFill(this._color),e.drawRect(0,0,this._width,this._height),e.endFill()}},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this.drawShape()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this.drawShape()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(e){this._color=e,this.drawShape()},enumerable:!0,configurable:!0}),t}(egret.Sprite);__reflect(SampleRect.prototype,"SampleRect");var ActionJar=function(){function e(){}return e.THINK="think",e.AUTO_MOVE="auto move",e.BE_ENCHANTED="be enchanted",e.EAT_BAIT="eat bait",e.HOOKED="hooked",e.ESCAPE="escape",e.BE_FISHED="be fished",e.ALIVE="alive",e.PUT_BOX="put box",e.EAT_FEED="eat feed",e.EAT_FAT="eat fat",e.HOOK_INCREASE_POWER="hook increase power",e.HOOKING="hooking",e.HOOK_FREE="hook free",e.HOOK_STAND_BY="hook stand by",e.HOOK_THROW="hook throw",e.HOOK_RECYLE="hook recyle",e.POPO_UP="popo up",e.POPO_THIN="popo thin",e}();__reflect(ActionJar.prototype,"ActionJar");var LevelTent=function(e){function t(){var t=e.call(this)||this;return t.isHookDraged=!1,t.isHookTouchBegined=!1,t.isTouchBegined=!1,t.isHookDraging=!1,t._isPersonalPool=!1,t}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.hookTipsLabel=new eui.Label;var t=new egret.GlowFilter;t.color=0,t.alpha=.2,t.blurX=t.blurY=1,this.hookTipsLabel.filters=[t],this.cameraContainer=new egret.DisplayObjectContainer,this.mainContainer=new egret.DisplayObjectContainer,this.mainContainer.addChild(this.cameraContainer),this.addChild(this.mainContainer)},t.prototype.start=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.isPersonalPool?this.checkInPersonal():this.checkToHook()},t.prototype.checkInPersonal=function(){this.player.paw.feedData&&(this.hookTipsLabel.text=Arrester.getLang(LanguageKeyJar.TO_FEED),this.map.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFeedTap,this),this.hookTipsLabel.horizontalCenter=0,this.hookTipsLabel.verticalCenter=0,this.map.addToBack(this.hookTipsLabel),this.tweenTips())},t.prototype.onFeedTap=function(e){this.feedFish(e.localX,e.localX)},t.prototype.feedFish=function(e,t){this.map.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onFeedTap,this),DisplayTool.removeChildInSafe(this.hookTipsLabel),this.player.paw.feedForFish({x:e,y:t})},t.prototype.onHoldBegin=function(e){if(!this.hook.proxy.view.hitTestPoint(e.localX,e.localY)){this.isTouchBegined=!0;var t=new Date;this.holdStartTime=t.getTime(),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onHoldTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onHoldTouch,this);var r=500;this.holdTimeOutID=setTimeout(this.onHoldEnd,r,this)}},t.prototype.onHoldTouch=function(e){this.isTouchBegined=!1},t.prototype.onHoldEnd=function(e){clearTimeout(e.holdTimeOutID),!e.isTouchBegined},t.prototype.touchOnDrag=function(){this.map.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMapTouchBegin,this)},t.prototype.touchOffDrag=function(){this.map.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onMapTouchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onHoldBegin,this)},t.prototype.levelTouchOn=function(){this.touchEnabled=!0,this.touchChildren=!0,this.touchThrough=!0},t.prototype.levelTouchOff=function(){this.touchEnabled=!1,this.touchChildren=!1,this.touchThrough=!1},t.prototype.stop=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.touchOffDrag(),this.clear()},t.prototype.clear=function(){for(var e=this._fortunes.length-1;e>=0;e--){var t=this._fortunes[e];this.removeBehaviorObject(t)}DisplayTool.removeChildInSafe(this.hook.proxy.hookLine),this.removeBehaviorObject(this.hook),this.hook.action=ActionJar.HOOK_STAND_BY,this.hook.isInWater=!1,this.closePanels()},t.prototype.onMapTouchBegin=function(e){void 0===e&&(e=null);var t=e.stageX,r=e.stageY;this.isHookDraged=this.hook.proxy.view.hitTestPoint(t,r),this.isHookDraging=!1,this.isHookDraged&&(this.isHookTouchBegined=!0,this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onHoldEnd,this),this.startDragX=t,this.startDragY=r,this.hook.position.x=this.startDragX,this.hook.position.y=this.startDragY,this.map.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onHookTouchMove,this),this.map.addEventListener(egret.TouchEvent.TOUCH_END,this.onHookTouchEnd,this))},t.prototype.onHookTouchMove=function(e){if(this.isTouchBegined=!1,this.isHookTouchBegined=!1,this.hook.action==ActionJar.HOOKING)return void this.onHookTouchEnd(null);this.hook.proxy.view.parent&&this.hook.proxy.view.parent.setChildIndex(this.hook.proxy.view,this.hook.proxy.view.parent.numChildren-1),this.isHookDraging=!0;var t=e.stageX,r=e.stageY,n=t-this.startDragX,a=r-this.startDragY;this.hook.position.x=this.startDragX+n,this.hook.position.y=this.startDragY+a,this.fixTopHookPoint(),this.hook.updatePosition()},t.prototype.fixTopHookPoint=function(){var e=this.hook.proxy.topHookLinePosition,t=e.x-this.hook.position.x,r=50;if(Math.abs(t)>r){var n=t>0?.5*-r:.5*r;e.x+=n,e.x=Math.max(e.x,Arrester.limitLeft),e.x=Math.min(e.x,Arrester.limitRight)}},t.prototype.onHookTouchEnd=function(e){if(this.isHookTouchBegined){this.hook.enchantFish(),this.hookTouchTween&&this.hookTouchTween.removeEventListener(egret.Event.CHANGE,this.onHookTouchTween,this),this.hookTouchTween=egret.Tween.get(this.hook),this.hookTwinkleTween=egret.Tween.get(this.hook.position),this.hookTouchTween.addEventListener(egret.Event.CHANGE,this.onHookTouchTween,this),this.hook.fakeRotation=45;var t=this.hook.position.x,r=5,n=Math.random()>.5,a=n?t-r:t+r,i=n?t+2*r:t-2*r;this.hookTwinkleTween.to({x:a},100).to({x:i},100).to({x:t},80).call(this.onHookTouchComplete,this),this.hookTouchTween.to({fakeRotation:-45},100).to({fakeRotation:40},100).to({fakeRotation:0},120)}this.isHookDraging&&this.fixHookPosition(),this.interruptTouchMove()},t.prototype.onHookTouchTween=function(e){this.hook.dispatchUpdatePositionEvent()},t.prototype.onHookTouchComplete=function(e){this.fixHookPosition()},t.prototype.interruptTouchMove=function(){this.hook.proxy.view.parent&&(this.map.addToFront(this.hook.proxy.view,0),this.map.addToFront(this.hook.proxy.hookLine,0)),this.isHookDraging=!1,this.isHookDraged=!1,this.isTouchBegined=!1,this.isHookTouchBegined=!1,this.map.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onHookTouchMove,this),this.map.removeEventListener(egret.TouchEvent.TOUCH_END,this.onHookTouchEnd,this)},t.prototype.fixHookPosition=function(){var e=this.hook.proxy.topHookLinePosition;e.x!=this.hook.position.x&&(this.hook.followTarget.x=e.x,this.hook.followTarget.y=e.dist(this.hook.position),this.hook.angleSpeed=this.hook.baitData?Math.random()>.5?2:-2:0,this.hook.takeAction=this.hookFollowTarget)},t.prototype.hookFollowTarget=function(e){e.checkEqual(e.followTarget,1,!0)?e.takeAction=null:e.followInSteer()},t.prototype.onEnterFrame=function(e){this.hook.perCounter.updateAnlog(),this.hook.takeAction&&this.hook.takeAction(this.hook),this.updateBehaviorObjects()},t.prototype.checkLevelOver=function(){this.isLevelOver&&(this.hookTipsLabel.text=Arrester.getLang(LanguageKeyJar.NO_FISH))},Object.defineProperty(t.prototype,"isLevelOver",{get:function(){return this._fortunes&&0==this.fortunes.length},enumerable:!0,configurable:!0}),t.prototype.updateBehaviorObjects=function(){dragonBones.WorldClock.clock.advanceTime(.024),this._fortunes.forEach(function(e){e.perCounter.updateAnlog(),Arrester.behaviorManager.updateBehavior(e)})},t.prototype.moveCamera=function(){var e=.5*(Arrester.senceWidth-this.hook.proxy.view.width),t=.5*(Arrester.senceHeight-this.hook.proxy.view.height),r=this.hook.proxy.view.localToGlobal(0,0),n=r.x-e,a=r.y-t,i=this.cameraContainer.x-n,o=this.cameraContainer.y-a,s=0,h=Arrester.senceWidth-this.cameraContainer.width;i>s?i=s:h>i&&(i=h);var l=0,u=Arrester.senceHeight-this.cameraContainer.height;o>l?o=l:u>o&&(o=u),this.cameraContainer.x=i,console.log("this.cameraContainer.x "+this.cameraContainer.x)},Object.defineProperty(t.prototype,"map",{get:function(){return this._map},set:function(e){this._map=e,this.cameraContainer.addChild(this._map)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hook",{get:function(){return this._hook},set:function(e){this._hook=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"player",{get:function(){return this._player
},set:function(e){this._player=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fishes",{get:function(){return this._fishes},set:function(e){this._fishes=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPersonalPool",{get:function(){return this._isPersonalPool},set:function(e){this._isPersonalPool=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fortunes",{get:function(){return this._fortunes},set:function(e){this._fortunes=e},enumerable:!0,configurable:!0}),t.prototype.removeBehaviorObject=function(e){e.proxy.removeView(),ImpressTool.removeFromArray(e,this._fortunes)},t.prototype.addBehaviorObjectToFront=function(e,t){void 0===t&&(t=-1),this._fortunes.push(e),e.proxy.view&&this.map.addToFront(e.proxy.view,t)},t.prototype.checkToHook=function(){this.hook.baitData?this.showThrowHookText():this.showInstallHookText(),this.hookTipsLabel.horizontalCenter=0,this.hookTipsLabel.verticalCenter=0,this.map.addToBack(this.hookTipsLabel),this.tweenTips()},t.prototype.tweenTips=function(){this.tipLabelTween=egret.Tween.get(this.hookTipsLabel),this.tipLabelTween.to({alpha:0},2e3).to({alpha:1},1500).to({alpha:0},2500).to({alpha:1},1500).to({alpha:.5},1500).to({alpha:1},1500)},t.prototype.showThrowHookText=function(){this.hook.proxy.view.stage||(this.hookTipsLabel.text=Arrester.getLang(LanguageKeyJar.TO_THROW),this.map.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToThrowHook,this))},t.prototype.onTapToThrowHook=function(e){this.throwHook(e.localX,e.localY)},t.prototype.throwHook=function(e,t){DisplayTool.removeChildInSafe(this.hookTipsLabel),this.map.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToThrowHook,this);var r=Arrester.rangeRandom(Arrester.limitLeft-100,Arrester.limitRight+100),n=Arrester.rangeRandom(Arrester.limitTop-200,Arrester.limitTop-100);this.hook.position.x=r,this.hook.position.y=n,this.hook.updatePosition(),this.map.addToFront(this.hook.proxy.view,0),this.map.addToFront(this.hook.proxy.hookLine,0),this.hook.followTarget=new FVector2D(e,t),this.hook.proxy.topHookLinePosition.x=e,this.hook.makeFVPrecision(this.hook.followTarget,1),this.hook.action=ActionJar.HOOK_THROW,this.hookRotationTween=egret.Tween.get(this.hook),this.hook.fakeRotation=450,this.hook.angleSpeed=Math.random()>.5?2:-2,this.hookRotationTween.to({fakeRotation:0},1e3),this.closePanels(),this.hook.isInWater=!0,this.hook.baitData.isWet=!0,Arrester.soundManager.play(SoundJar.HOOK_THROW,!1,!0)},t.prototype.closePanels=function(){this.dispatchEvent(new egret.Event(t.INSIDE_CLOSE))},t.prototype.onChange=function(e){Arrester.roleManager.hook.dispatchUpdatePositionEvent()},t.prototype.tweenHookComplete=function(){egret.Tween.removeTweens(this.hookTween),this.hook.action=ActionJar.HOOK_FREE,this.hook.takeAction=null,this.hook.fakeRotation=0,this.hook.dispatchUpdatePositionEvent(),this.touchOnDrag()},t.prototype.showInstallHookText=function(){this.hookTipsLabel.text=Arrester.getLang(LanguageKeyJar.TO_BAIT),Arrester.levelTailManager.standardToLevelTailPanel(),Arrester.mySpaceManager.showBaitPanel()},t.INSIDE_CLOSE="inside close",t}(BaseTent);__reflect(LevelTent.prototype,"LevelTent");var PoolsTent=function(e){function t(){var t=e.call(this)||this;return t.backgroundRect.color=7829094,t.initComponents(),t}return __extends(t,e),t.prototype.initComponents=function(){this.initPoolTitlePanel(),this.initPoolPathView()},t.prototype.initPoolTitlePanel=function(){this.poolTitlePanel=new eui.Panel,this.poolTitlePanel.skinName="resource/eui_skins/PanelSkin_2.exml",this.poolTitlePanel.moveArea.touchThrough=!1,this.poolTitlePanel.moveArea.touchChildren=!1,this.poolTitlePanel.moveArea.touchEnabled=!1,this.poolTitlePanel.left=0,this.poolTitlePanel.right=0,this.poolTitlePanel.top=0,this.poolTitlePanel.bottom=0,this.addChild(this.poolTitlePanel)},t.prototype.initPoolList=function(){this._poolList=new eui.List,this.scroller=new eui.Scroller;var e=1;this.scroller.width=this.width,this.scroller.height=this.height-this.poolTitlePanel.moveArea.height-e,this.scroller.y=this.poolTitlePanel.moveArea.height+e,this.scroller.viewport=this._poolList},t.prototype.initPoolPathView=function(){this._poolPathView=new PoolPathView,this._poolPathView.setSize(this.width,this.height-this.poolTitlePanel.moveArea.height),this._poolPathView.x=0,this._poolPathView.y=this.poolTitlePanel.moveArea.height,this.poolTitlePanel.addChild(this._poolPathView)},t.prototype.onReisze=function(t){e.prototype.onReisze.call(this,t),this._poolPathView&&(this._poolPathView.setSize(this.width,this.height-this.poolTitlePanel.moveArea.height),this._poolPathView.x=0,this._poolPathView.y=this.poolTitlePanel.moveArea.height)},Object.defineProperty(t.prototype,"poolList",{get:function(){return this._poolList},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"poolPathView",{get:function(){return this._poolPathView},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datas",{get:function(){return this._poolPathView.datas},set:function(e){this._poolPathView.datas=e},enumerable:!0,configurable:!0}),t}(BaseTent);__reflect(PoolsTent.prototype,"PoolsTent");var GameOverTent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(BaseTent);__reflect(GameOverTent.prototype,"GameOverTent");var IntroduceTent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(BaseTent);__reflect(IntroduceTent.prototype,"IntroduceTent");var ItemTent=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.itemPanel=new ItemPanel,this.itemPanel.left=0,this.itemPanel.right=0,this.itemPanel.top=0,this.itemPanel.bottom=0,this.addChild(this.itemPanel)},t}(BaseTent);__reflect(ItemTent.prototype,"ItemTent");var MySpaceTent=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.mySpacePanel=new MySpacePanel,this.mySpacePanel.width=this.width,this.mySpacePanel.height=this.height,this.mySpacePanel.left=0,this.mySpacePanel.right=0,this.mySpacePanel.top=0,this.mySpacePanel.bottom=0,this.addChild(this.mySpacePanel)},t}(BaseTent);__reflect(MySpaceTent.prototype,"MySpaceTent");var QuoteTent=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.quotePanel=new QuotePanel,this.quotePanel.left=0,this.quotePanel.right=0,this.quotePanel.top=0,this.quotePanel.bottom=0,this.addChild(this.quotePanel)},t.prototype.onCreationComplete=function(e){},t}(BaseTent);__reflect(QuoteTent.prototype,"QuoteTent");var ShopTent=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.shopPanel=new ShopPanel,this.shopPanel.left=0,this.shopPanel.right=0,this.shopPanel.top=0,this.shopPanel.bottom=0,this.addChild(this.shopPanel)},t}(BaseTent);__reflect(ShopTent.prototype,"ShopTent");var StartTent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.startPanel=new StartPanel,this.startPanel.left=0,this.startPanel.right=0,this.startPanel.top=0,this.startPanel.bottom=0,this.addChild(this.startPanel)},t}(BaseTent);__reflect(StartTent.prototype,"StartTent");var VividTent=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.vividPanel=new VividPanel,this.vividPanel.left=0,this.vividPanel.right=0,this.vividPanel.top=0,this.vividPanel.bottom=0,this.addChild(this.vividPanel)},t}(BaseTent);__reflect(VividTent.prototype,"VividTent");var RunPart=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/RunPartSkin.exml"},t}(eui.Component);__reflect(RunPart.prototype,"RunPart");var UnderBar=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/UnderBarSkin.exml"},t}(eui.Component);__reflect(UnderBar.prototype,"UnderBar");var VividBar=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/VividBarSkin.exml"},t}(eui.Component);__reflect(VividBar.prototype,"VividBar");var FishSellInfo=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/FishSellInfoSkin.exml"},t}(eui.Component);__reflect(FishSellInfo.prototype,"FishSellInfo");var QuoteChart=function(e){function t(){var t=e.call(this)||this;return t.isInvaild=!1,t.limitPrice=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){console.log("chart init"),this.skinName="resource/eui_skins/QuoteChartSkin.exml",this.axisShape=new egret.Shape,this.highTrendShape=new egret.Shape,this.mediumTrendShape=new egret.Shape,this.lowTrendShape=new egret.Shape,this.lastMark=new eui.Label,this.maxPriceMark=new eui.Label,this.highPriceLabel=new eui.Label,this.mediumPriceLabel=new eui.Label,this.lowPriceLabel=new eui.Label,this.highPriceLine=new egret.Shape,this.mediumPriceLine=new egret.Shape,this.lowPriceLine=new egret.Shape,this.lastMark.size=12,this.maxPriceMark.size=12,this.highPriceLabel.size=12,this.mediumPriceLabel.size=12,this.lowPriceLabel.size=12,this.lastMark.text="X",this.maxPriceMark.text="X",this.chartGroup.addChild(this.lastMark),this.chartGroup.addChild(this.maxPriceMark),this.chartGroup.addChild(this.axisShape),this.chartGroup.addChild(this.highTrendShape),this.chartGroup.addChild(this.mediumTrendShape),this.chartGroup.addChild(this.lowTrendShape),this.chartGroup.addChild(this.highPriceLabel),this.chartGroup.addChild(this.mediumPriceLabel),this.chartGroup.addChild(this.lowPriceLabel),this.chartGroup.addChild(this.highPriceLine),this.chartGroup.addChild(this.mediumPriceLine),this.chartGroup.addChild(this.lowPriceLine),this.initListeners()},t.prototype.initListeners=function(){this.chartTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t.prototype.onItemTap=function(e){this.drawShapes()},t.prototype.onCompareTouchTap=function(e){this.highTrendShape.visible=!0,this.mediumTrendShape.visible=!0,this.lowTrendShape.visible=!0},t.prototype.onHighTouchTap=function(e){this.highTrendShape.visible=!0,this.mediumTrendShape.visible=!1,this.lowTrendShape.visible=!1},t.prototype.onMediumTouchTap=function(e){this.highTrendShape.visible=!1,this.mediumTrendShape.visible=!0,this.lowTrendShape.visible=!1},t.prototype.onLowTouchTap=function(e){this.highTrendShape.visible=!1,this.mediumTrendShape.visible=!1,this.lowTrendShape.visible=!0},t.prototype.drawPriceLine=function(e,t){var r=e.graphics;r.clear(),r.lineStyle(3,t),r.moveTo(0,0),r.lineTo(20,0)},t.prototype.onCreateComplete=function(e){if(this.stage){if(0==this.chartRect.width)return void console.log("in valid");this.isInvaild=!0,console.log("has valided"),this.removeEventListener(egret.Event.ENTER_FRAME,this.onCreateComplete,this),this.drawShapes()}},Object.defineProperty(t.prototype,"priceObject",{get:function(){return this._priceObject},set:function(e){this._priceObject=e},enumerable:!0,configurable:!0}),t.prototype.drawShapes=function(){this.invalidateSize(),this.validateSize(),this.drawAxis(),this.drawTrend(),this.drawMark()},t.prototype.drawAxis=function(){var e=30,t=this.chartRect.width,r=this.chartRect.height-e,n=40,a=25;this.totalTrentWidth=t-n,this.totalTrentHeight=r-a;var i=this.totalTrentWidth,o=r,s=0,h=a,l=10,u=this.axisShape.graphics;u.clear(),u.lineStyle(2,0),u.moveTo(0,0),u.lineTo(0,r),u.lineTo(t,r),u.moveTo(s,h),u.lineTo(s+l,h),u.moveTo(i,o),u.lineTo(i,o-l),this.lastMark.y=o+10,this.maxPriceMark.x=s+l+5,this.maxPriceMark.y=h-.5*this.maxPriceMark.height},t.prototype.drawTrend=function(){var e,t,r=this,n=this.getCurrentFish(),a=QuoteManager.qualities;a.forEach(function(a){e=Arrester.makePriceKey(n,a),t=r._priceObject[e];var i=r.getLimitPrice(t.max);i>r.limitPrice&&(r.limitPrice=i)}),a.forEach(function(a){e=Arrester.makePriceKey(n,a),t=r._priceObject[e];var i=r[a+"PriceLabel"];i.text=t.last.toString();var o=r[a+"PriceLine"];r.drawPriceLine(o,t.lineColor);var s=r[a+"TrendShape"],h=s.graphics;r.drawSingleTrend(t.prices,h,t.lineColor)})},t.prototype.drawSingleTrend=function(e,t,r){void 0===r&&(r=15658734);var n=25,a=e.length>1?this.totalTrentWidth/(e.length-1):0,i=t;i.clear(),i.lineStyle(1,r);for(var o=0;o<e.length;o++){var s=e[o],h=s.price,l=o*a,u=n-3+Math.floor(this.totalTrentHeight*(1-h/this.limitPrice));0==o?i.moveTo(l+1,u):i.lineTo(l,u)}},t.prototype.getLimitPrice=function(e){var t;return t=100>e?100:10*(Math.floor(.1*e)+1)},t.prototype.drawMark=function(){var e=new Date;this.maxPriceMark.text=this.limitPrice.toString(),this.lastMark.text=e.toTimeString(),this.lastMark.x=this.chartGroup.width-this.lastMark.width-5,this.layoutPriceLabel()},t.prototype.layoutPriceLabel=function(){var e=5,t=10,r=15,n=this.highPriceLabel.width+this.highPriceLine.width+this.mediumPriceLabel.width+this.mediumPriceLine.width+this.lowPriceLabel.width+this.lowPriceLine.width+3*e+2*t;this.highPriceLine.x=.5*(this.chartRect.width-n),this.highPriceLine.y=r+.5*(this.highPriceLabel.height-this.highPriceLine.height),this.highPriceLabel.x=this.highPriceLine.x+this.highPriceLine.width+e,this.highPriceLabel.y=r,this.mediumPriceLine.x=this.highPriceLabel.x+this.highPriceLabel.width+t,this.mediumPriceLine.y=this.highPriceLine.y,this.mediumPriceLabel.x=this.mediumPriceLine.x+this.mediumPriceLine.width+e,this.mediumPriceLabel.y=r,this.lowPriceLine.x=this.mediumPriceLabel.x+this.mediumPriceLabel.width+t,this.lowPriceLine.y=this.highPriceLine.y,this.lowPriceLabel.x=this.lowPriceLine.x+this.lowPriceLine.width+e,this.lowPriceLabel.y=r},t.prototype.updateQuote=function(){this.drawShapes()},t.prototype.getCurrentFish=function(){var e;return this.chartTabBar.selectedItem||(this.chartTabBar.selectedIndex=0),e=this.chartTabBar.selectedItem},t}(eui.Component);__reflect(QuoteChart.prototype,"QuoteChart");var QuoteGroup=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/QuoteGroupSkin.exml",this.quoteDataGroup.itemRenderer=QuoteDataGroupRender,this.quoteTabBar.itemRenderer=ItemTabBarItemRenderer},Object.defineProperty(t.prototype,"naviPace",{get:function(){return Math.max(105,.3*this.quoteTabBar.scrollRect.width)},enumerable:!0,configurable:!0}),t.prototype.onNaviUpTap=function(e){this.quoteTabBar.scrollH=Math.max(0,this.quoteTabBar.scrollH-this.naviPace)},t.prototype.onNaviDownTap=function(e){this.quoteTabBar.scrollH=Math.min(this.quoteTabBar.scrollH+this.naviPace,this.quoteTabBar.scrollRect.width)},t}(eui.Component);__reflect(QuoteGroup.prototype,"QuoteGroup");var FishList=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.list=new eui.List,this.list.itemRendererSkinName="resource/eui_skins/FishBoxItemRendererSkin.exml",this.addChild(this.list)},Object.defineProperty(t.prototype,"listDatas",{get:function(){return this.list.dataProvider},set:function(e){this.list.dataProvider=e},enumerable:!0,configurable:!0}),t}(eui.Group);__reflect(FishList.prototype,"FishList");var AboutPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/AboutPanelSkin.exml"},t}(eui.Panel);__reflect(AboutPanel.prototype,"AboutPanel");var AnswerTwoPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/AnswerTwoPanelSkin.exml",this.yesButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onYesTap,this)},t.prototype.onYesTap=function(e){this.close()},t}(eui.Panel);__reflect(AnswerTwoPanel.prototype,"AnswerTwoPanel");var BaitPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/BaitPanelSkin.exml",this.baitList.itemRenderer=BaitItemRenderer},t}(eui.Panel);__reflect(BaitPanel.prototype,"BaitPanel");var ClarifyPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ClarifyPanelSkin.exml"},t}(eui.Panel);__reflect(ClarifyPanel.prototype,"ClarifyPanel");var CleanPoolPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/CleanPoolPanelSkin.exml",this.cleanserList.itemRenderer=BaitItemRenderer},t}(eui.Panel);__reflect(CleanPoolPanel.prototype,"CleanPoolPanel");var FeedPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/FeedPanelSkin.exml",this.feedList.itemRenderer=BaitItemRenderer},t}(eui.Panel);__reflect(FeedPanel.prototype,"FeedPanel");var FishBoxPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/FishBoxPanelSkin.exml",this.boxList.itemRendererSkinName="resource/eui_skins/FishBoxItemRendererSkin.exml"},t}(eui.Panel);__reflect(FishBoxPanel.prototype,"FishBoxPanel");var FishOpratePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/FishOperatePanel.exml",this.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this),this.freeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this)},t.prototype.onTapToClose=function(e){this.close()},t}(eui.Panel);__reflect(FishOpratePanel.prototype,"FishOpratePanel");var FishShowPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/FishShowPanelSkin.exml",this.close2Button.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose2ButtonTouchTap,this),this.okButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose2ButtonTouchTap,this),this.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose2ButtonTouchTap,this),this.putButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose2ButtonTouchTap,this)},t.prototype.onClose2ButtonTouchTap=function(e){this.close()},t.prototype.showSellFishGroup=function(){this.fishSellInfo.visible=!0,this.sellFishGroup.visible=!0,this.buyBareGroup.visible=!1,this.boxTipLabel.visible=!1},t.prototype.showBuyBareGroup=function(){this.fishSellInfo.visible=!1,this.sellFishGroup.visible=!1,this.buyBareGroup.visible=!0,this.boxTipLabel.visible=!0},t}(eui.Panel);__reflect(FishShowPanel.prototype,"FishShowPanel");var HelpPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/HelpPanelSkin.exml"},t}(eui.Panel);__reflect(HelpPanel.prototype,"HelpPanel");var InSideLevelPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/InSideLevelPanelSkin.exml",this.boxList.itemRendererSkinName="resource/eui_skins/FishBoxItemRendererSkin.exml",this.baitList.itemRenderer=BaitItemRenderer,this.hideButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHideTap,this)},t.prototype.onHideTap=function(e){DisplayTool.removeChildInSafe(this)},t}(eui.Component);__reflect(InSideLevelPanel.prototype,"InSideLevelPanel");var ItemPanel=function(e){function t(){var t=e.call(this)||this;return t.pace=20,t.columnHeight=65,t._pageIndex=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ItemPanelSkin.exml",this.itemTabBar.itemRenderer=ItemTabBarItemRenderer,this.itemList.itemRenderer=ItemListItemRenderer,this.moveLeftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftTap,this),this.moveRightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightTap,this),this.naviUpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNaviUpTap,this),this.naviDownButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNaviDownTap,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},t.prototype.onLeftTap=function(e){this.pageIndex--},t.prototype.onRightTap=function(e){this.pageIndex++},Object.defineProperty(t.prototype,"naviPace",{get:function(){return Math.max(105,.3*this.itemTabBar.scrollRect.width)},enumerable:!0,configurable:!0}),t.prototype.onNaviUpTap=function(e){this.itemTabBar.scrollH=Math.max(0,this.itemTabBar.scrollH-this.naviPace)},t.prototype.onNaviDownTap=function(e){this.itemTabBar.scrollH=Math.min(this.itemTabBar.scrollH+this.naviPace,this.itemTabBar.scrollRect.width)},t.prototype.onAdded=function(e){},Object.defineProperty(t.prototype,"listRowCount",{get:function(){return this.validateNow(),Math.max(1,Math.floor(this.itemList.height/this.columnHeight))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemListDatas",{get:function(){return this._itemlistDatas},set:function(e){this._itemlistDatas=e,this.isFresh=!0,this.pageIndex=1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(e){var t=e;if(t=Math.max(1,t),t=Math.min(this.totalPages,t),t!=this._pageIndex||this.isFresh){this._pageIndex=t,this.isFresh=!1;var r=this.fullItemCount,n=(this._pageIndex-1)*r,a=Math.min(this.itemListDatas.length,this._pageIndex*r),i=this.itemListDatas.slice(n,a);this.itemList.dataProvider=Arrester.changeToArrayCollection(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalPages",{get:function(){return Math.max(1,Math.ceil(this.itemListDatas.length/this.fullItemCount))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullItemCount",{get:function(){return 2*this.listRowCount},enumerable:!0,configurable:!0}),t}(eui.Panel);__reflect(ItemPanel.prototype,"ItemPanel");var ItemShowPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ItemShowPanelSkin.exml",this.useButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this),this.cancelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this)},t.prototype.onTapToClose=function(e){this.close()},t.prototype.updateText=function(e,t,r){this.itemNameLabel.text=e,this.itemDescriptionLabel.text=t,this.itemPriceLabel.text=r},t}(eui.Panel);__reflect(ItemShowPanel.prototype,"ItemShowPanel");var LanguagePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/LanguagePanelSkin.exml",this.languageList.itemRendererSkinName="resource/eui_skins/LanguageItemSkin.exml",this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.languageList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTap,this)},t.prototype.onTap=function(e){this.close()},t}(eui.Panel);__reflect(LanguagePanel.prototype,"LanguagePanel");var LevelTailPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/LevelTailPanelSkin.exml",this.moveArea.touchEnabled=!1},t}(eui.Panel);__reflect(LevelTailPanel.prototype,"LevelTailPanel");var LevyPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/LevyPanelSkin.exml",this.agreeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAgreeTap,this)},t.prototype.onAgreeTap=function(e){this.close()},t}(eui.Panel);__reflect(LevyPanel.prototype,"LevyPanel");var MorraPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/MorraPanelSkin.exml",this.selectedSign=MorraBolton.PAPER,this.morraButtons=[this.scissorsRadio,this.paperRadio,this.rockRadio],this.scissorsRadio.name=MorraBolton.SCISSOR,this.paperRadio.name=MorraBolton.PAPER,this.rockRadio.name=MorraBolton.ROCK,this.switchButtons=[this.firstSwitch,this.secondSwitch,this.thridSwitch],this.initListeners()},t.prototype.initListeners=function(){this.scissorsRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMorraTap,this),this.paperRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMorraTap,this),this.rockRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMorraTap,this),this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClose,this)},t.prototype.onClose=function(e){this.close()},t.prototype.onMorraTap=function(e){var t=e.target;this.selectedSign=t.name,this.morraButtons.forEach(function(e){e!=t&&(e.selected=!1)})},t.prototype.setWinTimes=function(e){for(var t=e>this.switchButtons.length?this.switchButtons.length:e,r=0;r<this.switchButtons.length;r++){var n=this.switchButtons[r];t>0?(n.selected=!0,t--):n.selected=!1}},t}(eui.Panel);__reflect(MorraPanel.prototype,"MorraPanel");var MySpacePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.title="我的空间",this.skinName="resource/eui_skins/MySpacePanelSkin.exml",this.moveArea.touchEnabled=!1,this.addEventListener(eui.UIEvent.ADDED_TO_STAGE,this.onAddedToStage,this)},t.prototype.onAddedToStage=function(e){this.initLayouts()},t.prototype.initLayouts=function(){},t}(eui.Panel);__reflect(MySpacePanel.prototype,"MySpacePanel");var PoolDescriptionPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/PoolDescriptionPanelSkin.exml",t}return __extends(t,e),t}(eui.Panel);__reflect(PoolDescriptionPanel.prototype,"PoolDescriptionPanel");var QuotePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/QuotePanelSkin2.exml",this.moveArea.touchEnabled=!1,this.quoteDataGroup.itemRenderer=QuoteDataGroupRender,this.quoteTabBar.itemRenderer=ItemTabBarItemRenderer},Object.defineProperty(t.prototype,"naviPace",{get:function(){return Math.max(105,.3*this.quoteTabBar.scrollRect.width)},enumerable:!0,configurable:!0}),t.prototype.onNaviUpTap=function(e){this.quoteTabBar.scrollH=Math.max(0,this.quoteTabBar.scrollH-this.naviPace)},t.prototype.onNaviDownTap=function(e){this.quoteTabBar.scrollH=Math.min(this.quoteTabBar.scrollH+this.naviPace,this.quoteTabBar.scrollRect.width)},t}(eui.Panel);__reflect(QuotePanel.prototype,"QuotePanel");var ShopPanel=function(e){function t(){var t=e.call(this)||this;return t.columnHeight=60,t._pageIndex=0,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ShopPanelSkin.exml",this.moveArea.touchEnabled=!1,this.shopTabBar.itemRenderer=ItemTabBarItemRenderer,this.shopList.itemRenderer=ItemListItemRenderer,this.moveLeftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLeftTap,this),this.moveRightButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRightTap,this),this.naviUpButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNaviUpTap,this),this.naviDownButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onNaviDownTap,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},t.prototype.onLeftTap=function(e){this.pageIndex--},t.prototype.onRightTap=function(e){this.pageIndex++},Object.defineProperty(t.prototype,"naviPace",{get:function(){return Math.max(105,.3*this.shopTabBar.scrollRect.width)},enumerable:!0,configurable:!0}),t.prototype.onNaviUpTap=function(e){this.shopTabBar.scrollH=Math.max(0,this.shopTabBar.scrollH-this.naviPace)},t.prototype.onNaviDownTap=function(e){this.shopTabBar.scrollH=Math.min(this.shopTabBar.scrollH+this.naviPace,this.shopTabBar.scrollRect.width)},t.prototype.onAdded=function(e){},Object.defineProperty(t.prototype,"listRowCount",{get:function(){return this.validateNow(),Math.max(1,Math.floor(this.shopList.height/this.columnHeight))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shopListDatas",{get:function(){return this._shopListDatas},set:function(e){this._shopListDatas=e,this.isFresh=!0,this.pageIndex=1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(e){var t=e;if(t=Math.max(1,t),t=Math.min(this.totalPages,t),t!=this._pageIndex||this.isFresh){this._pageIndex=t,this.isFresh=!1;var r=this.fullItemCount,n=(this._pageIndex-1)*r,a=Math.min(this.shopListDatas.length,this._pageIndex*r),i=this.shopListDatas.slice(n,a);this.shopList.dataProvider=Arrester.changeToArrayCollection(i)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalPages",{get:function(){return Math.max(1,Math.ceil(this.shopListDatas.length/this.fullItemCount))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullItemCount",{get:function(){return 3*this.listRowCount},enumerable:!0,configurable:!0}),t}(eui.Panel);__reflect(ShopPanel.prototype,"ShopPanel");var ShopShowPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ShopShowPanelSkin.exml",this.buyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this),this.notBuyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTapToClose,this)},t.prototype.onTapToClose=function(e){this.close()},t.prototype.updateText=function(e,t,r){this.itemNameLabel.text=e,this.itemDescriptionLabel.text=t,this.itemPriceLabel.text=r},t}(eui.Panel);__reflect(ShopShowPanel.prototype,"ShopShowPanel");var ShotMessagePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ShotMessagePanelSkin.exml"},t}(eui.Panel);__reflect(ShotMessagePanel.prototype,"ShotMessagePanel");var SoundPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/SoundPanelSkin.exml"},t}(eui.Panel);__reflect(SoundPanel.prototype,"SoundPanel");var StartPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/StartPanelSkin.exml"},t.prototype.tweemLogo=function(){this.logoGroup.visible=!0;var e=egret.Tween.get(this.logoGroup);e.wait(200).to({alpha:0},2e3).call(this.onTweenComplete,this)},t.prototype.onTweenComplete=function(){DisplayTool.removeChildInSafe(this.logoGroup)},t}(eui.Panel);__reflect(StartPanel.prototype,"StartPanel");var TradePanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/TradePanelSkin.exml",this.cancelSellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelSellTap,this),this.sellButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancelSellTap,this),this.minusButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMinusTap,this),this.plusButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPlusTap,this),this.allButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAllTap,this),this.countInput.addEventListener(eui.UIEvent.CHANGE,this.onChangeStart,this)},t.prototype.onAllTap=function(e){this.countInput.text=this._currentData.count,this.dispatchChangeEvent()},t.prototype.onPlusTap=function(e){var t=Number(this.countInput.text);t++,this.countInput.text=t.toString(),this.dispatchChangeEvent()
},t.prototype.onMinusTap=function(e){var t=Number(this.countInput.text);t=Math.max(0,t-1),this.countInput.text=t.toString(),this.dispatchChangeEvent()},t.prototype.onCancelSellTap=function(e){this.close()},t.prototype.onChangeStart=function(e){this.dispatchChangeEvent()},Object.defineProperty(t.prototype,"currentData",{get:function(){return this._currentData},set:function(e){this._currentData=e,this.dispatchChangeEvent()},enumerable:!0,configurable:!0}),t.prototype.dispatchChangeEvent=function(){this.dispatchEvent(new egret.Event(t.CURRENT_DATA_CHANGE))},t.CURRENT_DATA_CHANGE="current data change",t}(eui.Panel);__reflect(TradePanel.prototype,"TradePanel");var TrendPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/TrendPanelSkin.exml"},t}(eui.Panel);__reflect(TrendPanel.prototype,"TrendPanel");var VividPanel=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/VividPanelSkin.exml",this.moveArea.touchEnabled=!1},t}(eui.Panel);__reflect(VividPanel.prototype,"VividPanel");var BaitItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/BaitItemRendererSkin.exml"},t.prototype.dataChanged=function(){this.countLabel.text="x"+this.data.count},t}(eui.ItemRenderer);__reflect(BaitItemRenderer.prototype,"BaitItemRenderer");var FishTabBarItemRenderer=function(){function e(){}return e}();__reflect(FishTabBarItemRenderer.prototype,"FishTabBarItemRenderer");var ItemListItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ItemListItemRendererSkin.exml",Arrester.languageManager.addEventListener(LanguageManager.LANGUAGE_CHANGE,this.onLanguageChange,this)},t.prototype.dataChanged=function(){this.countLabel.text=this.data.count?"x"+this.data.count:"√",this.nameLabel.text=this.data?this.data.isFish?Arrester.getLang(this.data.name)+"/"+Arrester.getLang(LanguageKeyJar.getFishQuality(this.data.quality)):Arrester.getLang(this.data.name):"",this.data.thumb_url&&""!=this.data.thumb_url||(this.thumbImage.source=Arrester.roleManager.player.currentData.vivid)},t.prototype.onLanguageChange=function(e){this.dataChanged()},t}(eui.ItemRenderer);__reflect(ItemListItemRenderer.prototype,"ItemListItemRenderer");var ItemTabBarItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ItemTabRendererSkin.exml",Arrester.languageManager.addEventListener(LanguageManager.LANGUAGE_CHANGE,this.onLanguageChange,this)},t.prototype.dataChanged=function(){this.labelDisplay.text=SignJar.fishes.indexOf(this.data)>-1?Arrester.getLang(this.data+"_name"):Arrester.getLang(this.data)},t.prototype.onLanguageChange=function(e){this.dataChanged()},t}(eui.ItemRenderer);__reflect(ItemTabBarItemRenderer.prototype,"ItemTabBarItemRenderer");var PathNodeRenderer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/PoolPathNodeSkin.exml",this.touchChildren=!1,Arrester.languageManager.addEventListener(LanguageManager.LANGUAGE_CHANGE,this.onLanguageChange,this)},t.prototype.dataChanged=function(){this.nameLabel.text=Arrester.getLang(this.data.name),"plaza"==this.data.sign&&(this.bgRect.fillColor=2917332)},t.prototype.onLanguageChange=function(e){this.dataChanged()},t}(eui.ItemRenderer);__reflect(PathNodeRenderer.prototype,"PathNodeRenderer");var PoolListItemRenerer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){},t}(eui.ItemRenderer);__reflect(PoolListItemRenerer.prototype,"PoolListItemRenerer");var QuoteDataGroupRender=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/QuoteDataGroupRenderSkin.exml",this.tradeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTradeTouchTap,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTradeTouchTap,this)},t.prototype.dataChanged=function(){this.signLabel.text=Arrester.getLang(this.data.name),this.qualityLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.QUALITY),Arrester.getLang(LanguageKeyJar.getFishQuality(this.data.quality)),LanguageKeyJar.MACRO_SHARP),this.priceLabel.text=Arrester.replaceInMarco(Arrester.getLang(LanguageKeyJar.MONEY),this.data.last.toString(),LanguageKeyJar.MACRO_SHARP),this.tradeButton.label=Arrester.getLang(LanguageKeyJar.TRADE_BUTTON)},t.prototype.onTradeTouchTap=function(e){Arrester.tradeManager.showTradePanel();var t=Arrester.gameData.role[this.data.sign],r=Arrester.findMarines({sign:this.data.sign,quality:this.data.quality},Arrester.roleManager.player.currentData.items),n={name:this.data.name,sign:this.data.sign,description:t.description,count:r.length.toString(),buttonText:"",quality:this.data.quality,datas:r,isFish:!0,thumb_url:t.thumb_url,price:"0"};Arrester.tradeManager.tradePanel.currentData=n},t}(eui.ItemRenderer);__reflect(QuoteDataGroupRender.prototype,"QuoteDataGroupRender");var ShopListItemRenderer=function(e){function t(){var t=e.call(this)||this;return t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/ShopListItemRendererSkin.exml"},t}(eui.ItemRenderer);__reflect(ShopListItemRenderer.prototype,"ShopListItemRenderer");var TalkFishWindow=function(e){function t(){var t=e.call(this)||this;return t.words=[],t._wordLimitCount=5,t.inits(),t}return __extends(t,e),t.prototype.inits=function(){this.skinName="resource/eui_skins/TalkFishWindowSkin.exml"},t.prototype.addWord=function(e){e+="\n",this.words.length>=this.wordLimitCount&&(this.words.splice(0,1),this.talkField.text=this.buildWords()),this.words.push(e),this.talkField.text+=e},t.prototype.buildWords=function(){var e="";return this.words.forEach(function(t){e+=t}),e},t.prototype.clearWord=function(){this.talkField.text="",this.words=[]},Object.defineProperty(t.prototype,"wordLimitCount",{get:function(){return this._wordLimitCount},set:function(e){this._wordLimitCount=e},enumerable:!0,configurable:!0}),t}(eui.Component);__reflect(TalkFishWindow.prototype,"TalkFishWindow");